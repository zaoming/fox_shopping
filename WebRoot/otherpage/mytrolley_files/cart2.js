/*
 * jQuery blockUI plugin
 * Version 2.33 (29-MAR-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(i){if(/1\.(0|1|2)\.(0|1|2)/.test(i.fn.jquery)||/^1.1/.test(i.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+i.fn.jquery);return}i.fn._fadeIn=i.fn.fadeIn;var c=function(){};var j=document.documentMode||0;var e=i.browser.msie&&((i.browser.version<8&&!j)||j<8);var f=i.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!j;i.blockUI=function(p){d(window,p)};i.unblockUI=function(p){h(window,p)
};i.growlUI=function(t,r,s,p){var q=i('<div class="growlUI"></div>');if(t){q.append("<h1>"+t+"</h1>")}if(r){q.append("<h2>"+r+"</h2>")}if(s==undefined){s=3000}i.blockUI({message:q,fadeIn:700,fadeOut:1000,centerY:false,timeout:s,showOverlay:false,onUnblock:p,css:i.blockUI.defaults.growlCSS})};i.fn.block=function(p){return this.unblock({fadeOut:0}).each(function(){if(i.css(this,"position")=="static"){this.style.position="relative"}if(i.browser.msie){this.style.zoom=1}d(this,p)})};i.fn.unblock=function(p){return this.each(function(){h(this,p)})};i.blockUI.version=2.33;i.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};
var b=null;var g=[];function d(r,F){var A=(r==window);var w=F&&F.message!==undefined?F.message:undefined;F=i.extend({},i.blockUI.defaults,F||{});F.overlayCSS=i.extend({},i.blockUI.defaults.overlayCSS,F.overlayCSS||{});var C=i.extend({},i.blockUI.defaults.css,F.css||{});var N=i.extend({},i.blockUI.defaults.themedCSS,F.themedCSS||{});w=w===undefined?F.message:w;if(A&&b){h(window,{fadeOut:0})}if(w&&typeof w!="string"&&(w.parentNode||w.jquery)){var I=w.jquery?w[0]:w;var P={};i(r).data("blockUI.history",P);P.el=I;P.parent=I.parentNode;P.display=I.style.display;P.position=I.style.position;if(P.parent){P.parent.removeChild(I)}}var B=F.baseZ;var M=(i.browser.msie||F.forceIframe)?i('<iframe class="blockUI" style="z-index:'+(B++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+F.iframeSrc+'"></iframe>'):i('<div class="blockUI" style="display:none"></div>');
var L=i('<div class="blockUI blockOverlay" style="z-index:'+(B++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var K,G;if(F.theme&&A){G='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+B+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(F.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>'}else{if(F.theme){G='<div class="blockUI blockMsg blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+B+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(F.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>'}else{if(A){G='<div class="blockUI blockMsg blockPage" style="z-index:'+B+';display:none;position:fixed"></div>'
}else{G='<div class="blockUI blockMsg blockElement" style="z-index:'+B+';display:none;position:absolute"></div>'}}}K=i(G);if(w){if(F.theme){K.css(N);K.addClass("ui-widget-content")}else{K.css(C)}}if(!F.applyPlatformOpacityRules||!(i.browser.mozilla&&/Linux/.test(navigator.platform))){L.css(F.overlayCSS)}L.css("position",A?"fixed":"absolute");if(i.browser.msie||F.forceIframe){M.css("opacity",0)}var y=[M,L,K],O=A?i("body"):i(r);i.each(y,function(){this.appendTo(O)});if(F.theme&&F.draggable&&i.fn.draggable){K.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var v=e&&(!i.boxModel||i("object,embed",A?null:r).length>0);if(f||v){if(A&&F.allowBodyStretch&&i.boxModel){i("html,body").css("height","100%")}if((f||!i.boxModel)&&!A){var E=m(r,"borderTopWidth"),J=m(r,"borderLeftWidth");var x=E?"(0 - "+E+")":0;
var D=J?"(0 - "+J+")":0}i.each([M,L,K],function(t,S){var z=S[0].style;z.position="absolute";if(t<2){A?z.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+F.quirksmodeOffsetHack+') + "px"'):z.setExpression("height",'this.parentNode.offsetHeight + "px"');A?z.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):z.setExpression("width",'this.parentNode.offsetWidth + "px"');if(D){z.setExpression("left",D)}if(x){z.setExpression("top",x)}}else{if(F.centerY){if(A){z.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')
}z.marginTop=0}else{if(!F.centerY&&A){var Q=(F.css&&F.css.top)?parseInt(F.css.top):0;var R="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+Q+') + "px"';z.setExpression("top",R)}}}})}if(w){if(F.theme){K.find(".ui-widget-content").append(w)}else{K.append(w)}if(w.jquery||w.nodeType){i(w).show()}}if((i.browser.msie||F.forceIframe)&&F.showOverlay){M.show()}if(F.fadeIn){var H=F.onBlock?F.onBlock:c;var q=(F.showOverlay&&!w)?H:c;var p=w?H:c;if(F.showOverlay){L._fadeIn(F.fadeIn,q)}if(w){K._fadeIn(F.fadeIn,p)}}else{if(F.showOverlay){L.show()}if(w){K.show()}if(F.onBlock){F.onBlock()}}l(1,r,F);if(A){b=K[0];g=i(":input:enabled:visible",b);if(F.focusInput){setTimeout(o,20)}}else{a(K[0],F.centerX,F.centerY)}if(F.timeout){var u=setTimeout(function(){A?i.unblockUI(F):i(r).unblock(F)
},F.timeout);i(r).data("blockUI.timeout",u)}}function h(s,t){var r=(s==window);var q=i(s);var u=q.data("blockUI.history");var v=q.data("blockUI.timeout");if(v){clearTimeout(v);q.removeData("blockUI.timeout")}t=i.extend({},i.blockUI.defaults,t||{});l(0,s,t);var p;if(r){p=i("body").children().filter(".blockUI").add("body > .blockUI")}else{p=i(".blockUI",s)}if(r){b=g=null}if(t.fadeOut){p.fadeOut(t.fadeOut);setTimeout(function(){k(p,u,t,s)},t.fadeOut)}else{k(p,u,t,s)}}function k(p,s,r,q){p.each(function(t,u){if(this.parentNode){this.parentNode.removeChild(this)}});if(s&&s.el){s.el.style.display=s.display;s.el.style.position=s.position;if(s.parent){s.parent.appendChild(s.el)}i(q).removeData("blockUI.history")}if(typeof r.onUnblock=="function"){r.onUnblock(q,r)}}function l(p,t,u){var s=t==window,r=i(t);
if(!p&&(s&&!b||!s&&!r.data("blockUI.isBlocked"))){return}if(!s){r.data("blockUI.isBlocked",p)}if(!u.bindEvents||(p&&!u.showOverlay)){return}var q="mousedown mouseup keydown keypress";p?i(document).bind(q,u,n):i(document).unbind(q,n)}function n(s){if(s.keyCode&&s.keyCode==9){if(b&&s.data.constrainTabKey){var r=g;var q=!s.shiftKey&&s.target==r[r.length-1];var p=s.shiftKey&&s.target==r[0];if(q||p){setTimeout(function(){o(p)},10);return false}}}if(i(s.target).parents("div.blockMsg").length>0){return true}return i(s.target).parents().children().filter("div.blockUI").length==0}function o(p){if(!g){return}var q=g[p===true?g.length-1:0];if(q){q.focus()}}function a(w,q,A){var z=w.parentNode,v=w.style;var r=((z.offsetWidth-w.offsetWidth)/2)-m(z,"borderLeftWidth");var u=((z.offsetHeight-w.offsetHeight)/2)-m(z,"borderTopWidth");
if(q){v.left=r>0?(r+"px"):"0"}if(A){v.top=u>0?(u+"px"):"0"}}function m(q,r){return parseInt(i.css(q,r))||0}})(jQuery);(function(a){a.fn.textSlider=function(b){b=jQuery.extend({speed:"normal",line:2,timer:1000},b);return this.each(function(){a.fn.textSlider.scllor(a(this),b)})};a.fn.textSlider.scllor=function(j,d){var h=a("ul:eq(0)",j);var k;var n=h.children();var m=a(".up:eq(0)",j);var f=a(".down:eq(0)",j);var e=a(n[0]).height();var l=0-d.line*e;var c=function(){m.unbind("click",c);h.animate({marginTop:l},d.speed,function(){for(i=0;i<d.line;i++){h.find("li:first").appendTo(h)}h.css({marginTop:0});m.bind("click",c)})};var o=function(){f.unbind("click",o);h.css({marginTop:l});for(i=0;i<d.line;i++){h.find("li:last").prependTo(h)}h.animate({marginTop:0},d.speed,function(){f.bind("click",o)})};var g=function(){k=window.setInterval(c,d.timer)};var b=function(){window.clearInterval(k)};h.hover(b,g).mouseout();m.css("cursor","pointer").click(c);
m.hover(b,g);f.css("cursor","pointer").click(o);f.hover(b,g)}})(jQuery);var returnUrl=document.location.href;function checkLogin(){if(getCookie("ut")){return true}else{return false}}function getCookie(a){var b=document.cookie.split(";");for(var d=0;d<b.length;d++){var c=b[d].split("=");if(c[0].replace(/(^\s*)|(\s*$)/g,"")==a){return c[1]}}return""};var kxtimer;var KX001={appkey:"",receiver:"",timer:"",kxbtn:"",starid:"",ckname:"kx_connect_session_key",curl:"http://www.kaixin001.com/login/connect.php",isIE:(navigator.appVersion.indexOf("MSIE")!=-1)?true:false,init:function(b,c,e,a,d){this.appkey=b;this.receiver=c;this.kxbtn=document.getElementById("kx001_btn_login");if(typeof(e)!="undefined"&&e){this.btntext=e}else{this.btntext=unescape("%u767B%u5F55")}if(typeof(a)!="undefined"&&a){this.btnlogout=a}else{this.btnlogout=unescape("%u9000%u51FA")}if(typeof(d)!="undefined"&&d){this.nostyle=true}else{this.nostyle=false}this.setEvent()},setStarId:function(a){this.starid=a;this.kxbtn.href+="&starid="+escape(a)},getCookie:function(){var c=this.getDomain();if(c){document.domain=c}var a,b=new RegExp("(^| )"+this.ckname+"=([^;]*)(;|$)");if(a=document.cookie.match(b)){return unescape(a[2])
}else{return null}},getDomain:function(){var a=window.location.host;a=a.split(".");var b="";if(a.length==4){b=a[1]+"."+a[2]+"."+a[3]}else{if(a.length==3){b=a[1]+"."+a[2]}else{if(a.length==2){b=a[0]+"."+a[1]}}}return b},delCookie:function(){var b=this.getDomain();if(b){document.domain=b;b=";domain=."+b}var c=new Date();c.setTime(c.getTime()-1);var a=this.getCookie(this.ckname);if(a&&typeof(a)!="undefined"){document.cookie=this.ckname+"='';expires="+c.toGMTString()+";path=/"+b}},displayCookie:function(){},setEvent:function(){ck=this.getCookie();if(ck&&typeof(ck)!="undefined"){this.displayLogout()}else{this.displayLogin()}if(this.isIE){this.kxbtn.attachEvent("onclick",this.handleLogout)}else{this.kxbtn.addEventListener("click",this.handleLogout,false)}},handleLogout:function(){var a=document.getElementById("kx001_btn_login");
tip=a.attributes.tip.nodeValue;if(tip=="1"){KX001.delCookie();window.setTimeout("KX001.displayLogin()",500);KX001.kaixinLogout(KX001.appkey,KX001.receiver);if(typeof(kx001_onlogout)=="function"){window.setTimeout("kx001_onlogout()",500)}}},kaixinLogout:function(a,c){url="http://www.kaixin001.com/login/connect_logout.php?appkey="+a+"&re="+c;var b=document.createElement("div");b.innerHTML='<iframe id="kxiframeagent" src="'+url+'" scrolling="yes" style="display:none" height="0px" width="0px"></iframe>';document.documentElement.appendChild(b.firstChild)},handleLogin:function(){ck=this.getCookie();if(ck&&typeof(ck)!="undefined"){this.displayLogout();if(typeof(kx001_onlogin)=="function"){kx001_onlogin()}}},displayLogin:function(){kxtimer=window.setInterval("KX001.handleLogin()",1000);this.kxbtn.href=this.curl+"?appkey="+this.appkey+"&re="+this.receiver+"&t="+Math.round(Math.random()*99);
if(this.starid){this.kxbtn.href+="&starid="+this.starid}this.kxbtn.target="_blank";if(this.nostyle){this.kxbtn.innerHTML=this.btntext}else{this.kxbtn.innerHTML="<span style='float:left;cursor:pointer;background:url(http://img1.kaixin001.com.cn/i3/platform/rlink_btn.gif) no-repeat 100% 0;padding-right:8px;height:23px;'>"+this.btntext+"</span>";this.kxbtn.style.background="transparent url(http://img1.kaixin001.com.cn/i3/platform/rlink_btn.gif) no-repeat scroll 0 0";this.kxbtn.style.color="#ffffff";this.kxbtn.style.paddingLeft="30px";this.kxbtn.style.fontSize="12px";this.kxbtn.style.height="23px";this.kxbtn.style.lineHeight="23px";this.kxbtn.style.textDecoration="none";this.kxbtn.style.overflow="hidden";if(this.isIE){this.kxbtn.style.styleFloat="left"}else{this.kxbtn.style.cssFloat="left"}}this.kxbtn.setAttribute("tip","0");
return false},displayLogout:function(){clearInterval(kxtimer);if(this.nostyle){this.kxbtn.innerHTML=this.btnlogout}else{this.kxbtn.innerHTML="<span style='float:left;cursor:pointer;background:url(http://img1.kaixin001.com.cn/i3/platform/rlink_btn.gif) no-repeat 100% 0;padding-right:8px;height:23px;'>"+this.btnlogout+"</span>";this.kxbtn.style.background="transparent url(http://img1.kaixin001.com.cn/i3/platform/rlink_btn.gif) no-repeat scroll 0 0";this.kxbtn.style.color="#ffffff";this.kxbtn.style.paddingLeft="30px";this.kxbtn.style.fontSize="12px";this.kxbtn.style.height="23px";this.kxbtn.style.lineHeight="23px";this.kxbtn.style.textDecoration="none";this.kxbtn.style.overflow="hidden";this.kxbtn.target="_self";if(this.isIE){this.kxbtn.style.styleFloat="left"}else{this.kxbtn.style.cssFloat="left"
}}this.kxbtn.setAttribute("tip","1");this.kxbtn.href="javascript:void(0);"},showRestProxyDlg:function(a,f,c,b,g,e){a=a+"&r="+Math.random();var d="no";if(e==1){d="yes"}if(c==1){var h=(window.screen.height-g)/2;var i=(window.screen.width-b)/2;window.open(a+"&uu=1","kaixinRestDialog","width="+b+"px,height="+g+"px,location=no,menubar=no,toolbar=no,scrollbars="+d+",resizable=no,status=no,top="+h+"px,left="+i+"px")}else{openKxRestWindow(a,b,g,f,e)}}};(function(){var r=navigator.userAgent.toLowerCase();var e=(r.indexOf("opera")!=-1);var p="";var k=0;var g;var c;var o;var a;function b(t){return document.getElementById(t)}function q(t){return b(t)!=null}function d(u,t){if(q(u)){b(u).innerHTML=t}}function i(){if("function"==typeof(close_dlg_callback)){close_dlg_callback()}new l().close()}function l(w,u,t){var v=w;
var A=u;var z=t;p=z;var x='      <div id="dialogBox" style="display:none;z-index:1999999;width:'+v+'px;">       <div class=ts460 style="position:absolute;top:0px;width:'+v+'px;opacity:0.4;filter:alpha(opacity=40);"><img src="http://img1.kaixin001.com.cn/i/h460_t.gif" width="'+v+'" height="8" /></div>       <div style="position:absolute;height:'+A+'px;top:8px;" >       <table border="0" cellpadding="0" cellspacing="0">       <tr style="height:'+(A)+'px;"><td style="background:#000000;width:7px;opacity:0.4;filter:alpha(opacity=40);"></td>       <td style="width:'+(v-14)+'px;">        <div style="border:1px solid #565656;">        <table width="100%" border="0" cellpadding="0" cellspacing="0">        ';var C='<a style="color:#F6D2D8;text-decoration:none;" href="javascript:_closeKxRestDialog();"><b>脳</b></a>';
x+='        <tr height="24" bgcolor="#6795B4">         <td>          <div style="background:#D01E3B none repeat scroll 0 0;border-bottom:1px solid #565656;font-weight:bold;height:25px;" >           <div id="dialogBoxTitle" style="color:#FFFFFF;float:left;font-size:13px;padding:3px 8px;">'+z+'</div>           <div id="dialogClose" style="float:right;padding:2px 3px;">'+C+'</div>          </div>         </td>        </tr>        <tr valign="top">         <td id="dialogBody" style="height:'+(A-28)+'px" bgcolor="#ffffff"></td>        </tr>     ';x+='        </table>        </div>       </td>       <td style="background:#000000;width:7px;opacity:0.4;filter:alpha(opacity=40);"></td></tr>       </table>       </div>       <div class=ts460 style="position:absolute;top:'+parseInt(A+8)+"px;width:"+v+'px;opacity:0.4;filter:alpha(opacity=40);"><img src="http://img1.kaixin001.com.cn/i/h460_b.gif" width="'+v+'" height="8" /></div>      </div><div id="dialogBoxShadow" style="display:none;z-index:19998;"></div>     ';
var y='      <iframe id="dialogIframBG" name="dialogIframBG" frameborder="0" marginheight="0" marginwidth="0" hspace="0" vspace="0" scrolling="no" style="position:absolute;z-index:19997;display:none;"></iframe>     ';var B='      <div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;width:100%;height:100%;"></div>     ';this.init=function(){b("dialogCase")?b("dialogCase").parentNode.removeChild(b("dialogCase")):function(){};var D=document.createElement("span");D.id="dialogCase";if(!e){D.innerHTML=B+y+x}else{D.innerHTML=B+x}document.body.appendChild(D)};this.open=function(D){this.show();var F="scrolling='no'";if(typeof arguments[1]!="undefined"&&arguments[1]==1){F='scrolling="yes" style="overflow:visible;"'}if(typeof document.body.style.maxHeight==="undefined"){var E="<iframe width='100%' height='100%' name='iframe_parent' id='iframe_parent' frameborder='0' "+F+"></iframe>";
d("dialogBody",E);b("iframe_parent").src=D}else{var E="<iframe width='100%' height='100%' name='iframe_parent' id='iframe_parent' src='"+D+"' frameborder='0' "+F+"></iframe>";d("dialogBody",E)}};this.show=function(){this.middle("dialogBox");if(b("dialogIframBG")){b("dialogIframBG").style.top=b("dialogBox").style.top;b("dialogIframBG").style.left=b("dialogBox").style.left;b("dialogIframBG").style.width=b("dialogBox").offsetWidth+"px";b("dialogIframBG").style.height=b("dialogBox").offsetHeight+"px";b("dialogIframBG").style.display="block"}if(!e){this.shadow()}};this.reset=function(){this.close()};this.close=function(){if(window.removeEventListener){window.removeEventListener("resize",this.event_b,false);window.removeEventListener("scroll",this.event_b,false)}else{if(window.detachEvent){try{window.detachEvent("onresize",this.event_b);
window.detachEvent("onscroll",this.event_b)}catch(D){}}}if(b("dialogIframBG")){b("dialogIframBG").style.display="none"}b("dialogBox").style.display="none";b("dialogBoxBG").style.display="none";b("dialogBoxShadow").style.display="none";if(typeof(parent.onDialogClose)=="function"){parent.onDialogClose(b("dialogBoxTitle").innerHTML)}};this.set_title=function(D){if(b("dialogBoxTitle")){b("dialogBoxTitle").innerHTML=D}return this};this.shadow=function(){this.event_b_show();if(window.attachEvent){window.attachEvent("onresize",this.event_b);window.attachEvent("onscroll",this.event_b)}else{window.addEventListener("resize",this.event_b,false);window.addEventListener("scroll",this.event_b,false)}};this.event_b=function(){var D=b("dialogBoxShadow");D.style["width"]=document.documentElement.width+"px";
D.style["height"]=document.documentElement.height+"px";if(D.style.display!="none"){if(this.event_b_show){this.event_b_show()}}};this.event_b_show=function(){var F=b("dialogBoxShadow");F.style["position"]="absolute";F.style["display"]="";F.style["opacity"]="0.2";F.style["filter"]="alpha(opacity=20)";F.style["background"]="#000";var E=parent?parent.document.body.offsetWidth:document.body.offsetWidth;var G=parent?parent.document.body.offsetHeight:document.body.offsetHeight;var D=parent?(parent.document.body.scrollTop+parent.document.documentElement.scrollTop):(document.body.scrollTop+document.documentElement.scrollTop);F.style["top"]="0px";F.style["left"]="0px";F.style["width"]=E+"px";F.style["height"]=document.documentElement.height+"px"};this.middle=function(G){b(G)["style"]["display"]="";b(G)["style"]["position"]="absolute";
var F=parent.document.body.clientWidth;var I=parent.document.body.clientHeight;var E=parent.document.body.scrollTop+parent.document.documentElement.scrollTop;var H=(F-b(G).offsetWidth)/2;var J=E+80;var D=J>0?J:0;b(G)["style"]["left"]=H+"px";b(G)["style"]["top"]=D+"px"};this.resize=function(F,G){var E=b("dialogBody");var D=b("dialogBox");if(!E||!D){return}if(b("dialogBoxTitle")){E.setStyle({height:(G-28)+"px"})}else{E.setStyle({height:(G-2)+"px"})}D.setStyle({width:F+"px"}).down(".ts460").setStyle({width:F+"px"}).down().setStyle({width:F+"px"}).up().next(1).setStyle({top:(G+8)+"px",width:(F)+"px"}).down().setStyle({width:(F)+"px"}).up().previous().setStyle({height:(G)+"px"}).down().down("tr").setStyle({height:(G)+"px"}).down("td",1).setStyle({width:(F-14)+"px"});return this}}function n(v,u,t,w){var x=new l(u,t,w);
x.init();if(typeof arguments[4]!="undefined"){x.open(v,arguments[4])}else{x.open(v)}}function j(A,x,u,t,w,z,v,y){return h(A,x,u,t,w,z,"",v,y)}function f(z,w,u,t,v,y){var x=".rbs1{border:1px solid #d7e7fe; float:left;}\n.rb1-12,.rb2-12{height:23px; color:#fff; font-size:12px; background:#355582; padding:3px 5px; border-left:1px solid #fff; border-top:1px solid #fff; border-right:1px solid #6a6a6a; border-bottom:1px solid #6a6a6a; cursor:pointer;}\n.rb2-12{background:#355582;}\n";return h(z,w,u,t,v,y,x)}function h(A,E,C,x,w,D,B,z,v){var y=new l(C,x,w);y.init();y.show();var t="iframe_parent_"+k++;g=A;c=E;o=D;a=B;g_dialog_sButton2=z;g_dialog_sAction2=v;var u="<iframe width='100%' height='100%' name='"+t+"' id='"+t+"' src='http://"+Kx.Lib.Request.getFullHost()+"/interface/diablank.php' frameborder='0' scrolling='no' onload=\"javascript:_openAlert_write('"+t+"')\"></iframe>";
d("dialogBody",u)}function s(t){var x=g;var B=c;var z=o;var w=g_dialog_sButton2;var u=g_dialog_sAction2;var y=a;var v=window.frames[t];if(y&&y.length){try{v.document.getElementsByTagName("head").item(0).innerHTML+="<style>"+y+"</style>"}catch(A){var C=v.document.createElement("style");C.type="text/css";C.styleSheet.cssText=y;v.document.getElementsByTagName("head").item(0).appendChild(C)}}if(z==undefined){z="new parent.dialog().reset();"}v.document.body.innerHTML=m(x,B,z,w,u)}function m(y,v,x,u,w){var t="";var t='<div class="ts4">       <div class="ts45" style="border-top:none;padding-top:0;">         '+y+'        <div class="c"></div>       </div>       <div class="ts42 r">        <div class="rbs1"><input type="button" style="width:68px;" value="'+v+'" title="'+v+'" class="rb1-12" onmouseover="this.className=\'rb2-12\';" onmouseout="this.className=\'rb1-12\';" onclick="javascript:'+x+'" /></div>';
if(typeof(u)!="undefined"){if(typeof(w)=="undefined"){w="new parent.dialog().reset();"}t+='<div class="flw5">&nbsp;</div><div class="rbs1"><input type="button" style="width:68px;" value="'+u+'" title="'+u+'" class="rb1-12" onmouseover="this.className=\'rb2-12\';" onmouseout="this.className=\'rb1-12\';" onclick="javascript:'+w+'" /></div>'}t+='<div class="c"></div></div>';t+="</div>";return t}window.openKxRestWindow=n;window._closeKxRestDialog=i})();function Map(){var a=0;this.entry=new Array();this.put=function(b,c){if(!this.containsKey(b)){a++}this.entry[b]=c};this.get=function(b){if(this.containsKey(b)){return this.entry[b]}else{return null}};this.remove=function(b){if(delete this.entry[b]){a--}};this.containsKey=function(b){return(b in this.entry)};this.containsValue=function(b){for(var c in this.entry){if(this.entry[c]==b){return true}}return false};this.values=function(){var b=new Array(a);for(var c in this.entry){b.push(this.entry[c])}return b};this.keys=function(){var b=new Array(a);for(var c in this.entry){b.push(c)}return b};this.size=function(){return a};this.clear=function(){this.entry=new Array();this.size=0}}function addFavorite(){var c=new UrlSearch();if(c.favorite){var b=c.favorite;if(b.indexOf("add")>-1&&b.indexOf("_")>2){var a=b.split("_");
submitFavoriteFromCart(a[1],a[2])}}}function UrlSearch(){var c,e;var f=location.href;var b=f.indexOf("?");f=f.substr(b+1);var a=f.split("&");for(var d=0;d<a.length;d++){b=a[d].indexOf("=");if(b>0){c=a[d].substring(0,b);e=a[d].substr(b+1);this[c]=e}}}String.prototype.mylength=function(){var b=this.match(/[\u00FF-\uFFFF]/gi);if(!b||b==null){return this.length}var a=this.length+b.length;return a};function submitFavoriteFromCart(a,b){jQuery("#yhd_pop_win").css({width:"auto",height:"auto",position:"absolute"});if(!checkLogin()){yhdPublicLogin.showLoginDiv("",false)}else{cartFavorite(a,b)}}function cartFavorite(b,c){executiveLandedCheck();var a=URLPrefix.my+"/member/myCollection/addFavorite.do?tag.productID="+b+"&tag.merchantID="+c+"&callback=?";jQuery.getJSON(a,function(d){cartFavoriteResult(d,b)
})}function cartFavoriteResult(c,a){var b=c.code;if(b==-1){yhdPublicLogin.showLoginDiv("",false)}else{if(b==0){cart2.blockUI2("已添加入收藏夹",a)}else{if(b==1){cart2.blockUI2("您已经收藏过该商品",a)}else{if(b==3){cart2.blockUI2("添加收藏失败",a)}else{if(b==4){cart2.blockUI2("包含非法词汇，操作无法完成",a)}else{if(b==5){window.location.href=_indexUrl+"/passport/login_input.do?returnUrl="+encodeURIComponent(window.location.href)}else{if(b==6){window.location.href=URLPrefix.central+"/product/cart.do?action=view"}}}}}}}setTimeout("cart2.unblockUI('0')",2000)}function redirectIf(b){if(b){if(b.indexOf("redirectUrl")>=0){var d=b.split("=");window.location.href=d[1];return true}var e="result=popLogin";var c="URL=/not_found.do";var a="<head>";var f="cart2ErrorMsgDiv";if(b.indexOf(e)!=-1){yhdPublicLogin.showLoginDiv("",false);return true
}else{if(b.indexOf(c)!=-1){window.location.href="/not_found.do";return true}else{if(b.indexOf(a)!=-1){window.location.href="/";return true}else{if(b.indexOf(f)!=-1){jQuery("#cart2ErrorUI").html(b);return true}else{return false}}}}}else{return false}}function showPopbox(f){var e=document.documentElement.clientHeight;var b=document.documentElement.clientWidth;var a=$(document).height();var d=$(f).height();var c=$(document).scrollTop();$(f).css("top",e/2-d/2+c);$("<div class=mask></div>").appendTo($("body"));$(".mask").css("height",a);if($.browser.msie&&$.browser.version<=6){$(".mask").after("<iframe class=ifm></iframe>");$(".ifm").css({height:a*0.99,width:b*0.99})}$(f).show()}function closePopbox(a){$(a).hide();$(".mask").remove();if($.browser.msie&&$.browser.version<=6){$(".ifm").remove()}}var optMan=new Object();
optMan.map=new Map();optMan.mergeSelect=function(){var c=true;for(var a in this.map.entry){var b=this.map.get(a);if(b!=null&&b.stage==1){b.clearTimeout();b.setTimeout();c=false;break}}return c};optMan.mergeDelete=function(b,e,a){var f=true;for(var c in this.map.entry){var d=this.map.get(c);if(d!=null&&d.stage==1){if(d.type=="select"){d.clearTimeout();optMan.map.remove(c)}if(d.type=="delete"){d.addDeletePost(b,e,a);d.clearTimeout();d.setTimeout();f=false}}}return f};optMan.mergeNum=function(a,c,f){var e=true;for(var b in this.map.entry){var d=this.map.get(b);if(d!=null&&d.stage==1){if(d.type=="select"){d.clearTimeout();optMan.map.remove(b)}if(d.type=="num"&&d.productId==c&&d.merchantId==f){d.url=a;d.clearTimeout();d.setTimeout();e=false}}}return e};optMan.mergeLandingNum=function(b,d,g,a){var f=true;
for(var c in this.map.entry){var e=this.map.get(c);if(e!=null&&e.stage==1){if(e.type=="select"){e.clearTimeout();optMan.map.remove(c)}if(e.type=="landingNum"&&e.productId==d&&e.merchantId==g&&e.promotionId==a){e.url=b;e.clearTimeout();e.setTimeout();f=false}}}return f};optMan.mergeOther=function(){for(var a in this.map.entry){var b=this.map.get(a);if(b!=null&&b.stage==1&&b.type=="select"){b.clearTimeout();optMan.map.remove(a)}}return true};optMan.mergeReq=function(b,a,f,e,h,d,c){if(ajaxQueue.confirmFlag&&b!="check"){return}if(this.map.size()<=0){this.buildReq(b,a,f,e,h,d,c);return}var g=true;if(b=="select"){g=this.mergeSelect()}if(b=="delete"){g=this.mergeDelete(h,d,c)}if(b=="num"){g=this.mergeNum(a,h,d)}if(b=="landingNum"){g=this.mergeLandingNum(a,h,d,c)}if(b=="other"){g=this.mergeOther()}if(g){this.buildReq(b,a,f,e,h,d,c)
}};optMan.buildReq=function(b,a,g,f,h,e,d){var c=new Object();c.type=b;c.url=a;c.showMsg=g;c.stage=0;c.timer=null;if(b=="num"){c.productId=h;c.merchantId=e}else{if(b=="landingNum"){c.productId=h;c.merchantId=e;c.promotionId=d}}if(b=="delete"){c.deleteRecord=new Map();if(d!=null){c.deleteRecord.put(d,1)}c.deleteQueue=new Array();c.deleteOverPromotionQueue=new Array();c.deleteWarningQueue=new Array();c.deleteGiftQueue=new Array();c.deleteErrorPromotionQueue=new Array();c.addDeletePost=function(k,j,i){switch(j){case 0:this.deleteQueue.push(k);break;case 1:this.deleteOverPromotionQueue.push(k);break;case 2:this.deleteWarningQueue.push(k);break;case 3:this.deleteGiftQueue.push(k);break;case 4:this.deleteErrorPromotionQueue.push(k);break}this.deleteRecord.put(i,1);return true};c.addDeletePost(h,e)
}c.getParam=function(){var i=$('input[type="checkbox"][name="cart2Checkbox"]').map(function(){return $(this).val()+"="+($(this).attr("checked")?"1":"0")}).get().join(",");if(this.type=="delete"){return{deleteQueue:this.deleteQueue.join(","),deleteOverPromotionQueue:this.deleteOverPromotionQueue.join(","),deleteWarningQueue:this.deleteWarningQueue.join(","),deleteGiftQueue:this.deleteGiftQueue.join(","),deleteErrorPromotionQueue:this.deleteErrorPromotionQueue.join(","),cart2Checkbox:i,source:1}}return{cart2Checkbox:i,source:1}};c.getUrl=function(){if(this.type=="delete"){return"/cart/ajax.do?action=delete&rd="+Math.random()}if(this.type=="select"){return"/cart/ajax.do?action=select&rd="+Math.random()}return this.url};c.post=function(){ajaxQueue.add(this)};c.setTimeout=function(){this.timer=setTimeout(function(){c.post()
},(f==null||f<0)?0:f);this.stage=1};c.clearTimeout=function(){if(this.timer){clearTimeout(this.timer)}this.stage=0};if(c.type=="check"){ajaxQueue.add(c)}else{c.setTimeout()}this.map.put(c.timer,c)};optMan.reloadDelete=function(){$("#cart2_content .gray-box.pro-li .clear.list tr").each(function(){for(var a in optMan.map.entry){var b=optMan.map.get(a);if(b!=null&&b.type=="delete"&&b.stage<3&&b.deleteRecord.containsKey($(this).attr("id"))){$(this).find(".deleteButton").trigger("click")}}})};optMan.anyTimeout=function(){for(var a in this.map.entry){var b=this.map.get(a);if(b!=null&&b.stage==1){return true}}return false};var ajaxQueue=new Array();ajaxQueue.workingFlag=false;ajaxQueue.confirmFlag=false;ajaxQueue.go=function(){if(this.workingFlag){return}this.workingFlag=true;if(this.length<=0){this.workingFlag=false;
if(this.confirmFlag&&!optMan.anyTimeout()){this.confirmFlag=false;cart2.unblockUI("0");if(ckbMan.anyChecked()){confirmToPay()}}return}var a=ajaxQueue.shift();if(a.type==null||a.type==""){a.stage=3;optMan.map.remove(a.timer);this.workingFlag=false;this.go();return}if(!ajaxQueue.confirmFlag&&a.type=="other"){cart2.blockUI()}jQuery.post(a.getUrl(),a.getParam(),function(b){a.stage=3;optMan.map.remove(a.timer);ajaxQueue.workingFlag=false;if(!redirectIf(b)){if(!ajaxQueue.confirmFlag&&a.type=="other"){cart2.unblockUI(a.showMsg)}if(a.type!="check"){refreshCart2PageContent(b)}ajaxQueue.go()}else{cart2.unblockUI("0");if(ajaxQueue.confirmFlag){ajaxQueue.confirmFlag=false}}})};ajaxQueue.add=function(a){a.stage=2;ajaxQueue.push(a);ajaxQueue.go()};ajaxQueue.confirm=function(){cart2.blockUI();ajaxQueue.confirmFlag=true;
var a="/cart/checkCartBeforeConfirm.do?rd="+Math.random();optMan.mergeReq("check",a,"0")};var ckbMan={map:new Map(),reset:function(){$('input[type="checkbox"][name="cart2Checkbox"]').each(function(){var a=$(this).val();var b=ckbMan.map.get(a);if(b!=null){$(this).attr("checked",b)}else{ckbMan.map.put($(this).val(),$(this).attr("checked"))}})},click:function(a){this.map.put($(a).val(),$(a).attr("checked"))},remove:function(a){this.map.remove($(a).val())},removeByKey:function(a){this.map.remove(a)},loadStatusFromJs:function(){$('input[type="checkbox"][name="cart2Checkbox"]').each(function(){var a=$(this).val();var b=ckbMan.map.get(a)==null?true:ckbMan.map.get(a);$(this).attr("checked",b)});refreshCheckbox()},anyChecked:function(){var a=false;$('input[type="checkbox"][name="cart2Checkbox"]').each(function(){if($(this).attr("checked")){a=true;
return false}});if($('input[type="hidden"][name="XYItem"]').size()>0){a=true}return a},alertMap:function(){var b="";for(var a in this.map.entry){b+=a+"=>"+this.map.get(a)+"\n"}alert(b)}};var cart2={blockUITimer:null,isBlocked:false,ajaxSelect:function(){optMan.mergeReq("select",null,"0",1000)},ajaxDelete:function(b,a,c,d){optMan.mergeReq("delete",null,null,c,b,a,d)},ajaxNum:function(a,d,c,b,e){optMan.mergeReq("num",a,d,c,b,e)},ajaxLandingNum:function(b,e,d,c,f,a){optMan.mergeReq("landingNum",b,e,d,c,f,a)},ajaxRefresh:function(a,c,b){optMan.mergeReq("other",a,c,b)},showBlockUI:function(a){jQuery("#cart2BlockUI").block({message:a,css:{padding:0,margin:0,width:"35%",border:"1px solid #FFCC00",opacity:0.9,backgroundColor:"#FEFFDF"},overlayCSS:{background:"transparent",opacity:0.1,cursor:"default"}})
},blockUI:function(){cart2.isBlocked=true;var a=(jQuery(window).width())/2-400+jQuery(window).scrollLeft();if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){var b=(jQuery(window).height())/2+jQuery(window).scrollTop();a=(jQuery(window).width())/2+jQuery(window).scrollLeft()-300;jQuery("#cart2BlockUI").show().css({position:"absolute",width:"60%",height:"20%",zIndex:"9999",top:b,left:a})}else{jQuery("#cart2BlockUI").show().css({position:"fixed",width:"60%",height:"20%",zIndex:"9999",top:"200px",left:a})}cart2.showBlockUI('<table width="100%" border="0" cellspacing="0" cellpadding="0" id="cart2BlockUIMsg"><tr><td width="100%" height="50" align="center" class="font14"><img src="http://image.yihaodian.com/images/wait_loading.gif"/></td></tr><tr><td height="25" align="center" class="font14">正在处理中,请稍候...</td></tr></table>')
},blockUI2:function(d,b){cart2.isBlocked=true;var a=jQuery("#favorites_"+b).offset().left;var e=jQuery("#favorites_"+b).offset().top;if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){jQuery("#cart2BlockUI").show().css({position:"absolute",width:"40%",height:"20%",zIndex:"9999",top:e-32,left:a-215})}else{jQuery("#cart2BlockUI").show().css({position:"absolute",width:"30%",height:"50px",zIndex:"9999",top:e-40,left:a-230})}var c="";if(d=="已添加入收藏夹"){c="<i></i>"}cart2.showBlockUI('<table width="100%" border="0" cellspacing="0" cellpadding="0" id="cart2BlockUIMsg"><tr><td height="25" class="font14 fontIco">'+c+"&nbsp;"+d+"</td></tr></table>")},unblockUI:function(a){cart2.isBlocked=false;if(a&&a=="0"){jQuery("#cart2BlockUI").unblock().hide()}else{cart2.showBlockUI('<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td height="65" align="center" class="font14">您的操作已成功!</td></tr></table>');
if(cart2.blockUITimer){clearTimeout(cart2.blockUITimer)}cart2.blockUITimer=setTimeout(function(){jQuery("#cart2BlockUI").unblock().hide()},1000)}}};jQuery(function(){if($.browser.msie&&$.browser.version<=6){var a=$(".zr_section").find(".zr_warpper").width();if(a<240){$(".zr_section").find(".zr_warpper").width(240)}else{if(a>360){$(".zr_section").find(".zr_warpper").width(360)}else{$(".zr_section").find(".zr_warpper").width(a)}}}});function cartFeedBack2(){var b="lgp_header";if(currSiteId&&currSiteId==2){b="lgp_header111"}var c='<div id="cartFeedBack">';c+='<div class="'+b+'">请留下您对购物车的意见和建议<a onclick="closeWin();return false;" href="javascript:void(0);" class=\'close2\'>关闭</a></div>';c+='<div class="feedbackcontent"><div>';c+='<div style="align:center;height:145px"><input type="hidden" name="feedback.type" value="9"/>';c+='<textarea style="margin: 9px; width: 390px; height: 120px;" id="feedbackcontent" name="feedback.content"></textarea></div>';c+="<p class='verCode' style=\"margin-right:10px\"><label>验证码：</label><input id='vcd' type='text' name='validCode' size='8' class='ipt'><img id='valid_code_pic' class='code' src='http://www.yihaodian.com/cart/others/valid_code.do'/><a href='javascript:feedValidCode();'>换一张</a></p>";
c+='<div class="cartbutton" align="center" style="margin:5px;"><input type="button" class="btn-orange2" name="button" value="提交" onclick="ajaxCartFeedBack();"/>&nbsp;&nbsp;&nbsp;&nbsp;<input onclick="jQuery(\'#yhd_pop_win\').jqmHide();return false;" type="button" class="btn-gray2" name="reset" value="取消"/>';c+="</div></div>";YHD.popwin(c,410,238);var a=(jQuery(window).width())/2-200+jQuery(window).scrollLeft();if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){var d=(jQuery(window).height())/2+jQuery(window).scrollTop()-120;a=(jQuery(window).width())/2+jQuery(window).scrollLeft()-200;jQuery("#yhd_pop_win").css({position:"absolute",top:d,left:a})}else{jQuery("#yhd_pop_win").css({position:"fixed",top:"120px",left:a})}jQuery("#cartFeedBack").keydown(function(f){f.stopPropagation();if(f.keyCode==13){ajaxCartFeedBack()
}});feedValidCode()}function ajaxCartFeedBack(){var d=jQuery("#feedbackcontent").val();if(d.length>0){if(jQuery("#vcd").val().length>0){var c=/['|$|&|"]/;if(c.test(d)){alert("请不要输入非法字符");jQuery("#feedbackcontent").focus()}else{if(d.mylength()>500){alert("输入的内容请不要超过500个字符或250个汉字");jQuery("#feedbackcontent").focus()}else{jQuery("#feedbackcontent .cartbutton").empty();jQuery("#feedbackcontent .cartbutton").html("正在提交中。。。");var b=URLPrefix.central+"/cart/others/ajaxCartFeedBack.do";var d=jQuery("#feedbackcontent").val();var a={feedback_type:9,feedback_content:d,validCode:jQuery("#vcd").val()};jQuery.post(b,a,function(e){if(e&&e.message=="success"){jQuery("#cartFeedBack .feedbackcontent").empty();jQuery("#cartFeedBack .feedbackcontent").html('<div style="margin-top:50px;margin-left:20px;height:160px;font-size:13px;"><img src="../../images/v2/cart2/icon_yes.png"/> &nbsp;感谢您的宝贵意见，您的每个建议都对我们至关重要!</div>');
setTimeout("closeWin()",2000)}else{if(e&&e.message=="failure"&&e.data=="errorCode"){alert("验证码错误");feedValidCode();clearInput()}else{alert("建议提交失败");feedValidCode();clearInput()}}},"json")}}}else{alert("请输入验证码")}}else{alert("请输入您的意见和建议")}}function feedValidCode(){var a=new Date();jQuery("#valid_code_pic").attr("src","/cart/others/valid_code.do?t="+a)}function clearInput(){jQuery("#vcd").val("")}function closeWin(){jQuery("#yhd_pop_win").jqmHide();cart2.ajaxRefresh("/cart/ajax.do?action=view","0",0)};function messageHighLight(a){$("div[id^='sensitive_']").removeClass("highLight");$("#sensitive_"+a).addClass("highLight")}function messageDisHighLight(a){$("#sensitive_"+a).removeClass("highLight")}function messageSelect(a){$("div[id^='sensitive_']").removeClass("selected");$("#sensitive_"+a).addClass("selected");$("div[id^='product_']").removeClass("product_highlight");$("div[id^='product_"+a+"']").addClass("product_highlight")}var SensitiveProd={checkMobile:function(){initBind();this.showMask();this.showCheckMobileUi()},showMask:function(){var a=$("#sensitiveProdMaskDiv");a.css("width",a.parent().parent().css("width"));a.css("height",a.parent().parent().css("height"));a.css("z-index","9");a.show()},hideMask:function(){$("#sensitiveProdMaskDiv").hide()},showCheckMobileUi:function(){var b=$("#checkMobile");
if(b.size()==0){b=$("<div/>");b.attr("id","checkMobile");b.appendTo("body");b.css("width",765+"px");b.css("left",(document.body.scrollWidth-765)/2+"px");b.css("top","50px")}var a=$("#closeDiv");if(a.size()==0){a=$("<H3 id='closeDiv' ><a href='javascript:location.reload();'><img onclick=\"location.reload();\" src=\""+imagePath+'/icon_close.jpg"/>关闭</a></H3>')}a.appendTo(b);$("#bindDiv").appendTo(b);$("#bindDiv").show()}};$(document).ready(function(){var b=$(".sensitiveProdMessage .message:first-child");if(b.size()>0){var a=b.attr("id");a=a.replace("sensitive_","");messageSelect(a)}});function chooseSeriesProduct(b,f){var d;var c;if(b.indexOf("_")>-1){d=b.split("_")[0];c=b.split("_")[1]}else{d=b;c=1}var e={rd:Math.random(),doType:c,productId:d,merchantId:f};var a="/cart/cart2SeriesProduct.do";jQuery.post(a,e,function(g){viewSeriesDiv(g,d)})}function chooseSeriesGift(a,g,h,b,f){var a=a;var g=g;var h=h;var e=b;var f=f;var d={rd:Math.random(),doType:3,promotionId:a,promotionLevelId:g,promotionMerchantId:h,promotionGiftId:e,promotionNum:f};var c="/cart/cart2SeriesProduct.do";jQuery.post(c,d,function(i){viewSeriesDiv(i,b)})}function viewSeriesDiv(c,b){if(c.indexOf("zr_section")<0){YHD.alert("该商品已经下架或无库存。");var f=($(window).width()-$(".aptab").width())/2+$(window).scrollLeft();var e=($(window).height()-$(".aptab").height())/2+$(window).scrollTop();jQuery("#yhd_pop_win").css({position:"absolute",left:f,top:e});
return}var e=jQuery("#chooseSeriesProduct_"+b).offset().top-80;var f=jQuery("#chooseSeriesProduct_"+b).offset().left;jQuery("#seriesProduct").html(c);var d=(jQuery(window).height())/2-140+jQuery(window).scrollTop();var a=(jQuery(window).width())/2-280+jQuery(window).scrollLeft();if(e<=0||f<=0){e=d;f=a}else{if(f>800){jQuery("#seriesArrow").attr("class","arrow2");f=f-400}else{jQuery("#seriesArrow").attr("class","arrow");f=f+60}}jQuery("#seriesProduct").css({position:"absolute","z-index":"9999",top:e,left:f});jQuery(window).scroll(function(){var h=(jQuery(window).height())/2-140+jQuery(window).scrollTop();var g=(jQuery(window).width())/2-280+jQuery(window).scrollLeft();jQuery("#seriesProduct").css({position:"absolute","z-index":"9999",top:e,left:f})});jQuery("#seriesProduct").show()}function closeSeriesDiv(){jQuery("#seriesProduct").hide()
};function cartToggle(a,c){var b=jQuery("#"+a).attr("showUI");if(b=="1"){jQuery("#"+a).attr("showUI","0");if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){jQuery("#"+c).hide()}else{jQuery("#"+c).slideUp()}jQuery("#"+a).html("显示")}else{if(b=="0"){jQuery("#"+a).attr("showUI","1");if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){jQuery("#"+c).show()}else{jQuery("#"+c).slideDown()}jQuery("#"+a).html("隐藏")}}}function promotionSlider(){var f=jQuery("#top_promotion>dl").size();var e=1;var a=4;var c=Math.ceil(f/a);var d=jQuery(".promotion-list").width();var b=jQuery("#top_promotion");if(f<=4){jQuery("#pronext").removeClass("on");jQuery("#pronext,#proprev").hide()}jQuery("#pronext").click(function(){if(e<c){if(e==c-1){jQuery("#pronext").removeClass("on");jQuery("#pronext").addClass("end")}if(!b.is(":animated")){b.animate({marginLeft:"-="+d},"slow");
e++}}if(e>1&&!jQuery("#proprev").hasClass("on")){jQuery("#proprev").removeClass("end");jQuery("#proprev").addClass("on")}});jQuery("#proprev").click(function(){if(e>1){if(e==2){jQuery("#proprev").removeClass("on");jQuery("#proprev").addClass("end")}if(!b.is(":animated")){b.animate({marginLeft:"+="+d},"slow");e--}}if(e<c&&!jQuery("#pronext").hasClass("on")){jQuery("#pronext").addClass("on");jQuery("#pronext").removeClass("end")}})}function ajaxFreePromotionList(){var a=URLPrefix.central+"/cart/promotion/ajaxGetFreePromotionList.do?callback=?";jQuery.getJSON(a,function(c){if($("#free_promotion_container").html().indexOf("pro-title")>=0&&c.value.indexOf("pro-title")<0){$("#free_promotion_container").slideUp(500);$("#free_promotion_container").html(c.value)}else{if($("#free_promotion_container").html().indexOf("pro-title")<0&&c.value.indexOf("pro-title")>=0){$("#free_promotion_container").html(c.value);
$("#free_promotion_container").slideDown(500)}else{$("#free_promotion_container").html(c.value)}}var b=jQuery("#lastChangeNum");if(jQuery("#lastChangeDiv:visible").size()>0){lastChangeDivXY()}promotionSlider();initPromotionListEvent(jQuery("#freePromotionList"));openSearchUrl()})}function ajaxRedemptionPromotionList(){var a=URLPrefix.central+"/cart/promotion/ajaxGetRedemptionPromotionList.do?callback=?";jQuery.getJSON(a,function(b){jQuery("#redemptionPromotionList").html(b.value);initPromotionListEvent(jQuery("#redemptionPromotionList"));openSearchUrl()})}function inShopChoiceProduct(e){var d=jQuery("#"+e).attr("merchantId");var b=jQuery("#"+e).attr("bagProductIds");var a={merchantId:d,productIds:b};var c=URLPrefix.central+"/cart/dailyChoice/ajaxGetInshopCoudanProductList.do";jQuery.getJSON(c,a,function(f){jQuery("#yhd_pop_win").css({width:"auto",height:"auto",position:"absolute"});
YHD.popwin(f.value)})}function initPromotionDeleteEvent(){var a=200;jQuery("a[name='deletePromotion']").bind("click",function(){var c=jQuery(this).parent().parent().parent();var b=c.attr("id");var d="normal_"+this.id;if(isNotBatchConfirmFlag()==true){c.remove();cart2.ajaxDelete(d,3,a,b);return false}else{showDelConfirmDiv(jQuery(this).attr("id"),1);jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){c.remove();cart2.ajaxDelete(d,3,a,b);hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}});jQuery("a[name='deleteOptional']").bind("click",function(){var g=jQuery(this).parent().parent().parent();var c=g.attr("id");var i=this.id.split("_");var b=new Array();var f=new Array();var h=new Array();var d=new Array();var e=new Array();
for(x=0;x<i.length/5;x++){b[x]=i[0+x*5];f[x]=i[1+x*5];h[x]=i[2+x*5];d[x]=i[3+x*5];e[x]=i[4+x*5]}if(isNotBatchConfirmFlag()==true){g.remove();deleteOptional(b,f,h,d,e);return false}else{showDelConfirmDiv(jQuery(this).attr("id"),1);jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){g.remove();deleteOptional(b,f,h,d,e);hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}});jQuery("a[name='deleteLandingpage']").bind("click",function(){var c=jQuery(this).parent().parent().parent();var b=c.attr("id");var e="landingpage_"+this.id;var d=this;if(isNotBatchConfirmFlag()==true){c.remove();c.find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){ckbMan.remove(this)});cart2.ajaxDelete(e,3,a,b);return false}else{showDelConfirmDiv(jQuery(this).attr("id"),1);
jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){c.remove();c.find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){ckbMan.remove(this)});cart2.ajaxDelete(e,3,a,b);hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}});jQuery("a[name='deleteErrorPromotion']").bind("click",function(){var f=jQuery(this).parent().parent().parent();var c=f.attr("id");var i=this.id.split("_");var b=i[0];var e=i[1];var h=i[2];var d=i[3];var g=e+"_"+h+"_"+d;if(isNotBatchConfirmFlag()==true){f.remove();cart2.ajaxDelete(g,4,a,c);return false}else{showDelConfirmDiv(jQuery(this).attr("id"),1);jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){f.remove();cart2.ajaxDelete(g,4,a,c);
hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}})}function deleteOptional(a,e,f,b,d){var c="/cart/promotion/addOrDeletePromotionGift.do?operation=delete&promotionType=optional";for(x=0;x<a.length;x++){c=c+"&promotionIDs="+a[x]+"&promotionLevelIDs="+e[x]+"&promotionGiftIDs="+b[x]+"&promotionGiftMerchantIDs="+f[x]+"&promotionGiftNum="+d[x]}cart2.ajaxRefresh(c,"0",200);return false}function initPromotionListEvent(a){jQuery(a).find(".view-detail-btn").click(function(){jQuery("#yhd_pop_win").css({width:"auto",position:"absolute"});var e=jQuery(this);var g=e.attr("id");var f=g.replace("view_detail_btn_","");var c="view_detail_list_"+f;var b=jQuery("#"+c).html();if(b){YHD.popwin(b,950);var d=$(window).width()-$("#yhd_pop_win").width();jQuery("#yhd_pop_win").css({left:d/2+"px",height:"auto",overflow:"hidden",zoom:"1"})
}});jQuery("span > .pop_box4",".sale_list").removeClass("pop_box4").addClass("pop_box5");jQuery("span > .pop_box5",".sale_list").appendTo($(".sale_list"));jQuery(".sale_list").find(".zdsp").hover(function(){var c="zd-"+jQuery(this).attr("vn");var g=$(this).parents("dl");var d=$(".pro-con>dl").index(g);var b=d%4;var f=b*235+61;jQuery("#"+c).show().css("left",f);if($.browser.msie&&$.browser.version<=6){var e=jQuery("#"+c).find("ul").height();if(e<93){jQuery("#"+c).find("ul").height(93)}else{if(e>160){jQuery("#"+c).find("ul").height(160)}else{jQuery("#"+c).find("ul").height(e)}}}},function(){$(".sale_list").find(".pop_box5").hide()});jQuery(".sale_list").find(".pop_box5").hover(function(){jQuery(this).show()},function(){jQuery(this).hide()});jQuery(".pop_box5").find(".close").click(function(){$(this).parents(".pop_box5").hide();
return false});jQuery(".hg_list").find(".zdsp").hover(function(){jQuery(this).parent("dt").addClass("pos_reltv");var b="zd-"+jQuery(this).attr("vn");jQuery("#"+b).show();if(jQuery.browser.msie&&$.browser.version<=6){var c=jQuery("#"+b).find("ul").height();if(c<93){jQuery("#"+b).find("ul").height(93)}else{if(c>140){jQuery("#"+b).find("ul").height(140)}else{jQuery("#"+b).find("ul").height(c)}}}},function(){var b="zd-"+jQuery(this).attr("vn");jQuery(this).parent("dt").removeClass("pos_reltv");jQuery("#"+b).hide()});jQuery(".pop_box4").find(".close").click(function(){$(this).parents(".pop_box4").hide();return false})}function ajaxChooseGift(a,f,g,b,d){var e="cart2ChoiceGiftBtn:{pId:"+b+",mId:"+g+",num:"+d+"}";gotracker("2",e,null);var c="/cart/promotion/addOrDeletePromotionGift.do?operation=add&promotionType=normal&promotionIDs="+a+"&promotionLevelIDs="+f+"&promotionGiftIDs="+b+"&promotionGiftMerchantIDs="+g+"&promotionGiftNum="+d;
cart2.ajaxRefresh(c);return false}function chooseGift(a,f,g,b,d){var e="cart2ChoiceGiftBtn:{pId:"+b+",mId:"+g+",num:"+d+"}";gotracker("2",e,null);var c="/cart/promotion/addOrDeletePromotionGift.do?operation=add&promotionType=normal&promotionIDs="+a+"&promotionLevelIDs="+f+"&promotionGiftIDs="+b+"&promotionGiftMerchantIDs="+g+"&promotionGiftNum="+d;cart2.ajaxRefresh(c);jQuery("#yhd_pop_win").jqmHide();return false}function doDeletePromo(d,b,e,f,c,a){if(jQuery("#item_tr_"+productID+"_"+index).size()>0){jQuery("#item_tr_"+productID+"_"+index).remove()}if(jQuery("#item_tr_more_"+productID+"_"+index).size()>0){jQuery("#item_tr_more_"+productID+"_"+index).remove()}cart2.ajaxDelete(productID,deleteType,1000)}function addFreePromotion(a,g,h,b,e){var f="cart2ChoiceGiftBtn:{pId:"+b+",mId:"+h+",num:"+e+"}";
gotracker("2",f,null);var d="/cart/promotion/addOrDeletePromotionGift.do?operation=freeAjaxAdd&promotionType=normal&promotionIDs="+a+"&promotionLevelIDs="+g+"&promotionGiftIDs="+b+"&promotionGiftMerchantIDs="+h+"&promotionGiftNum="+e+"&r="+Math.random();cart2.blockUI();var c=$('input[type="checkbox"][name="cart2Checkbox"]').map(function(){return $(this).val()+"="+($(this).attr("checked")?"1":"0")}).get().join(",");jQuery.post(d,{cart2Checkbox:c},function(i){cart2.unblockUI();if("empty"==jQuery.trim(i)){goToDelivery()}else{popIfHasFreePromotionInCart()}})}function popIfHasFreePromotionInCart(){var a=URLPrefix.central+"/cart/promotion/ajaxGetFreePromotionList.do?callback=?";jQuery.getJSON(a,{proShow:"1"},function(b){if("empty"==jQuery.trim(b.value)||b.value.indexOf("directPassFlag")>=0){goToDelivery()
}else{YHD.popwin(b.value,943,"auto");var c=$(window).width()-$("#yhd_pop_win").width();jQuery("#yhd_pop_win").css({left:c/2+"px",width:"943px",height:"auto",position:"absolute"});initPromotionListEvent(jQuery("#promotion-list2"))}})}function buySeriesGift(a,f,g,d,c){var e="cart2ChoiceGiftBtn:{pId:"+d+",mId:"+g+",num:"+c+"}";gotracker("2",e,null);var b="/cart/promotion/addOrDeletePromotionGift.do?operation=add&promotionType=normal&promotionIDs="+a+"&promotionLevelIDs="+f+"&promotionGiftIDs="+d+"&promotionGiftMerchantIDs="+g+"&promotionGiftNum="+c;cart2.ajaxRefresh(b);closeSeriesDiv();jQuery("#yhd_pop_win").jqmHide();return false}function showOptionalDetailDiv(b,c,d){if(jQuery.browser.msie){jQuery("#optionalDiv").css("left",b.clientX+document.documentElement.scrollLeft+20);jQuery("#optionalDiv").css("top",b.clientY+document.documentElement.scrollTop-120)
}else{jQuery("#optionalDiv").css("left",b.pageX+20);jQuery("#optionalDiv").css("top",b.pageY-120)}jQuery("#optionalDiv").css("z-index","9998");jQuery("#optionalDiv").html("<div class='name fl tc black blod'>商品名称</div><div class='num fl tc black blod'>数量</div><div class='clear'></div>");for(var a=0;a<c.length;a++){jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='name fl tl '>"+c[a]+"</div>");jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='num fl tc '>"+d[a]+"</div>");jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='clear'></div>")}jQuery("#optionalDiv").css("display","block")}function showNewOptionalDetailDiv(b,c,e,d){if(jQuery.browser.msie){jQuery("#optionalDiv").css("left",b.clientX+document.documentElement.scrollLeft+20);jQuery("#optionalDiv").css("top",b.clientY+document.documentElement.scrollTop-120)
}else{jQuery("#optionalDiv").css("left",b.pageX+20);jQuery("#optionalDiv").css("top",b.pageY-120)}jQuery("#optionalDiv").css("z-index","9998");jQuery("#optionalDiv").html("<div class='name fl tc black blod'>商品名称</div><div class='num fl tc black blod'>数量</div><div class='num fl tc black blod'>商品合计</div><div class='clear'></div>");for(var a=0;a<c.length;a++){jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='name fl tl '>"+c[a]+"</div>");jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='num fl tc '>"+e[a]+"</div>");jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='num fl tc '>"+d[a]+"</div>");jQuery("#optionalDiv").html(jQuery("#optionalDiv").html()+"<div class='clear'></div>")}jQuery("#optionalDiv").css("display","block")}function hideOptionalDetailDiv(){jQuery("#optionalDiv").css("display","none")
}var floatTheseProductTimeout;function showFloatTheseProduct(b){clearTimeout(floatTheseProductTimeout);jQuery("div[id^='ap_titlebox_']").not("#ap_titlebox_"+b).hide();jQuery("#titlemenu_"+b).removeClass();jQuery("#titlemenu_"+b).addClass("ap_titlebox_menu_off");jQuery("#ap_titlebox_"+b).show();var a=document.getElementById("freePromotionListDiv");if(a){}else{if(jQuery(window).width()-jQuery("#titlemenu_"+b).offset().left<1000){jQuery("#ap_titlebox_"+b).css("left",jQuery("#titlemenu_"+b).offset().left-397+"px");jQuery("#ap_titlebox_"+b).css("top",jQuery("#titlemenu_"+b).offset().top+20+"px")}else{jQuery("#ap_titlebox_"+b).css("left",jQuery("#titlemenu_"+b).offset().left+"px");jQuery("#ap_titlebox_"+b).css("top",jQuery("#titlemenu_"+b).offset().top+20+"px")}}}function hideFloatTheseProduct(a){floatTheseProductTimeout=setTimeout("jQuery('#ap_titlebox_"+a+"').hide()",100);
jQuery("#titlemenu_"+a).removeClass();jQuery("#titlemenu_"+a).addClass("ap_titlebox_menu_on")}function openSearchUrl(){jQuery(".promo_title > span[surl]").click(function(){var a=jQuery(this).attr("surl");window.open(jQuery(this).attr("surl"));return false})};function initDailyChoiceToggleEvent(){jQuery("ul.sel-tab").find(".stab").hover(function(){jQuery("ul.sel-tab .stab").removeClass("on");jQuery(this).addClass("on");jQuery("#daily_select .pop_prolist").hide();var a=jQuery("ul.sel-tab .stab").index(this);jQuery("#daily_select .pop_prolist").eq(a).show()});jQuery("#dailyChoiceProductList").find(".close").click(function(){closePopbox("#dailyChoiceProductList");return false})}function ajaxDailyChoiceProductList(){var a=URLPrefix.central+"/cart/dailyChoice/ajaxGetDailyChoiceProductList.do?callback=?";jQuery.getJSON(a,null,function(b){if(b.value.indexOf("div")<0&&b.value.indexOf("DIV")<0){$(".cd").hide();return}jQuery("#dailyChoiceProductList").html(b.value);initDailyChoiceToggleEvent();if(jQuery(".nogoodsimg").size()>0){jQuery("#daily_choice_tab").hide()
}})};var lastChangeDivTimeout=null;function confirmToPay(){jQuery("#yhd_pop_win").css({width:"auto",height:"auto",position:"absolute"});if(jQuery("#cart2_content").find("tr.tr-error").size()>0){var b=false;if($("#cart2_content").find("tr.tr-error").find('input[type="checkbox"][name="cart2Checkbox"]').size()<=0){b=true}else{$("#cart2_content").find("tr.tr-error").find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){if($(this).attr("checked")){b=true;return false}})}if(b){YHD.alert("您的购物车中，含有无法购买的商品，请先删除红色高亮显示的商品之后再去结帐。");var d=$(window).width()-$(".aptab").width();jQuery("#yhd_pop_win").css({left:d/2});return}}if(jQuery("input[name='sensitiveFlag'][value='2']").size()!=0){YHD.alert("您的购物车中，有超过限购数量的商品，请先通过手机验证。");var d=$(window).width()-$(".aptab").width();jQuery("#yhd_pop_win").css({left:d/2});
return}if(jQuery("input[name='sensitiveFlag'][value='1']").size()!=0){YHD.alert("您的购物车中，有超过限购数量的商品，请根据提示，修改商品数量。");var d=$(window).width()-$(".aptab").width();jQuery("#yhd_pop_win").css({left:d/2});return}if(jQuery(".cart_have_book").size()!=0){var c="";var b=false;jQuery(".cart_have_book").each(function(e){if($(this).parent().parent().find('input[type="checkbox"][name="cart2Checkbox"]').size()<=0){b=true}else{$(this).parent().parent().find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){if($(this).attr("checked")){b=true;return false}})}if(b){if(c==""){c=c+jQuery(this).attr("product_name")}else{c=c+"，"+jQuery(this).attr("product_name")}return false}});if(b){var a=jQuery("#cart_have_book").html();a=a.replace("聚单商品名称",c);YHD.popwin(a);jQuery("#yhd_pop_win").css({position:"static",top:"0px"}).children(".aptab").css({top:"120px"});
jQuery(window).scrollTop(0);return false}}popIfHasFreePromotionInCart();return false}function goToDelivery(){if(!checkLogin()){jQuery("#freePromotionPopDiv").hide().empty();if(currSiteId&&currSiteId==2){showAuthDiv();return false}if(currSiteId==1){yhdPublicLogin.showLoginDiv("/checkoutV3/index.do",true)}else{yhdPublicLogin.showLoginDiv("/checkout/index.do",true)}}else{cart2.blockUI();if(currSiteId==1){window.location.href="/checkoutV3/index.do"}else{window.location.href="/checkout/index.do"}}}
function doDelete(d,b,a,c){
	if(isNotBatchConfirmFlag()==true){doDeleteOk(d,b,a,c)}
	else{showDelConfirmDiv(jQuery(d).attr("id"),1);
	jQuery("button","#productDelConfirm").unbind().bind("click",function(){
		if(jQuery(this).hasClass("delProductOk")){doDeleteOk(d,b,a,c);hidDelConfirmDiv()}
		else{hidDelConfirmDiv()
}return false})}}function doDeleteOk(f,d,c,e){var a=$(f).parent().parent().parent().attr("id");$(f).parent().parent().parent().remove();if($("#item_tr_more_"+d+"_"+c).size()>0){$("#item_tr_more_"+d+"_"+c).remove()}var b=$(f).parent().find("input[type=hidden][name=promoteLimit]").val();if($(".item"+d+"-"+b).size()>0){$(".item"+d+"-"+b).find(".deleteButton").trigger("click")}$(f).parent().parent().parent().find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){ckbMan.remove(this)});cart2.ajaxDelete(d,e,200,a)}
function ajaxDeletePromoteItem(c,b,a){doDelete(c,b,a,1)}
function ajaxDeleteItem(c,b,a){doDelete(c,b,a,0)}
function ajaxDeleteWaringItem(c,b,a){doDelete(c,b,a,2)}function clearAllCart(){showDelConfirmDiv("clearAllCart",3);jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){window.location.href="/product/cart.do?action=clear";
hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}function ajaxBatchDelete(){var a="";if(jQuery('input[type="checkbox"][name="cart2Checkbox"]').is(":checked")!=true){a=0}else{a=2}showDelConfirmDiv("batchDelete",a);jQuery("button","#productDelConfirm").unbind().bind("click",function(){if(jQuery(this).hasClass("delProductOk")){jQuery("#showBatchConfirmFlag").val(1);jQuery('input[type="checkbox"][name="cart2Checkbox"]:checked').each(function(){jQuery(this).parent().parent().find(".deleteButton").trigger("click")});jQuery("#showBatchConfirmFlag").val(0);hidDelConfirmDiv()}else{hidDelConfirmDiv()}return false})}function isNotBatchConfirmFlag(){var a=jQuery("#showBatchConfirmFlag").val();if(a==1||a=="1"){return true}else{return false}}function showDelConfirmDiv(f,d){if(isNotBatchConfirmFlag()==true){return
}var b=jQuery("#"+f).offset();var a=b.left;var e=b.top;jQuery("#productDelConfirm .delProductNo").show();if(d==0){a=a-68;e=e-120;jQuery("#productDelConfirm #tips").html("请选择需要删除的商品。");jQuery("#productDelConfirm .delProductNo").hide()}else{if(d==2){a=a-68;e=e-120;jQuery("#productDelConfirm #tips").html("确定从购物车中删除所有选中商品？")}else{if(d==3){a=a-68;e=e-120;jQuery("#productDelConfirm #tips").html("确定删除所有商品？")}else{a=a-166;e=e-110;jQuery("#productDelConfirm #tips").html("确定从购物车中删除吗？")}}}var c=jQuery("#productDelConfirm");c.css({left:a});c.css({top:e});c.fadeIn(500)}function hidDelConfirmDiv(){jQuery("#productDelConfirm").fadeOut(800)}function ajaxClearAllItemInCart(){var a="/cart/ajax.do?action=clear&rd="+Math.random();ckbMan.reset();cart2.ajaxRefresh(a)}function ajaxDeleteAllWaringItem(){var a="/cart/ajaxDeleteAllWaringItemList.do?rd="+Math.random();
jQuery.post(a,null,function(b){window.location.href=location.href},"json")}function continueShopping(){if(hasPingAnCookie==1&&currSiteId==1){window.open("/pingan");return false}else{window.open("/product/index.do");return false}}function checkOverLimit(l,h,b){var q=jQuery("#"+l).attr("oriNum");var d=parseInt(q);var i=jQuery("#"+l).attr("limitArgs");var j=jQuery("#"+l).parent().parent();var n=i.split("_");var p=parseInt(n[0]);var r=parseInt(n[1]);var m=parseInt(n[2]);var f=parseInt(n[3]);var g=parseInt(n[4]);var e=parseInt(n[5]);var o="";var c=h;var k=false;switch(b){case 0:if(p>0){if(h>p){o="该商品库存有限，您最多只能购买"+p+"件";c=p;k=c==d}else{if(f>1&&h<f){o="该商品["+f+"件起购]";c=f;k=c==d}else{if(h>r&&r>0){o="该商品[每人限购"+r+"件],超过则以1号店价购买"}else{if(m>0&&h>m&&e==5){o="该商品[限购"+m+"件]";c=m;k=c==d}else{if(m>0&&h>m){o="该商品[限购"+m+"件],超过则以1号店价购买"
}else{o=""}}}}}}else{c=0;o="该商品已下架或无库存"}break;case 1:if(p>0){if(h>p){o="该商品库存有限，您最多只能购买"+p+"件";c=p;k=c==d}}else{c=0;o="该商品已下架或无库存"}break;case 2:if(g>0&&h>g){o="该商品为特价商品，您最多只能购买"+g+"件";c=g;k=c==d}else{if(f>1&&h<f){o="该商品["+f+"件起购]";c=f;k=c==d}}break}if(j.find(".tr-error").size()>0){return true}if(o&&o.length>0&&c>0){jQuery("#"+l).val(c);j.addClass("tr-error");var a=j.find(".tips_2");a.html('<strong class="orange">'+o+"</strong>").show();clearTimeout();setTimeout(function(){a.fadeOut();j.removeClass("tr-error")},3000)}return k}function increment(f,g,e,a){var b=jQuery("#"+f).val();var d=/^[1-9]\d{0,2}$/g;if(!b.match(d)){alert("输入的数量有误,应为[1-999]");f.value="1";b=1}var c=parseInt(b)+1;if(c>999){c=999}jQuery("#"+f).val(c);if(e==2){calLandingTotal(f,g,a)}else{calSubTotal(f,g,e)}}function decrement(f,g,e,a){var b=jQuery("#"+f).val();
var d=/^[1-9]\d{0,2}$/g;if(!b.match(d)){alert("输入的数量有误,应为[1-999]");f.value="1";b=1}var c=parseInt(b)-1;if(c<1){var h=jQuery("#"+f).parent().parent().find(".deleteButton");if(jQuery("#"+f).parent().parent().find(".deleteButton").length>0){if(lastChangeDivTimeout!=null){clearTimeout(lastChangeDivTimeout)}h.click()}return false}jQuery("#"+f).val(c);if(e==2){calLandingTotal(f,g,a)}else{calSubTotal(f,g,e)}}function calSubTotal(i,h,g){var f=jQuery("#"+i).val();var c=/^[1-9]\d{0,2}$/g;if(!f.match(c)){alert("输入的数量有误,应为[1-999]");i.value="1";f=1}var b=jQuery("#"+i).attr("id");var e=b.split("_")[1];if(!checkOverLimit(i,f,g)){f=jQuery("#"+i).val();showMinusTips(i,f,g,e,h);var d=calItemNum(e,h,g,f);d=d>999?999:d;var a="/cart/ajax.do?lastChangeId="+b+"&action=update&productID="+e+"&productNum="+d+"&merchantId="+h;
cart2.ajaxNum(a,"0",1000,e,h);return true}return false}function showMinusTips(n,g,k,f,m){if(k!=0){return}var h=jQuery("#"+n).attr("oriNum");var e=parseInt(h);var i=$("input[type='hidden'][name='num_"+f+"_"+m+"_1']");if(g<e&&i.size()>0){var l=jQuery("#"+n).parent().parent();var a=jQuery("#"+n).attr("limitArgs");var c=a.split("_");var d=parseInt(c[1]);var j=parseInt(c[2]);l.addClass("tr-error");var b=l.find(".tips_2");b.html('<strong class="orange">该商品【'+(e==d?"每人":"")+"限购"+e+"件】，优先减去1号店价商品</strong>").show();clearTimeout();setTimeout(function(){b.fadeOut();l.removeClass("tr-error")},3000)}}function calItemNum(e,f,d,c){var b=parseInt(c);var a=$("input[type='hidden'][name='num_"+e+"_"+f+"_"+(d==0?1:0)+"']");if(a.size()>0){b+=parseInt(a.val())}return b}function calLandingTotal(f,g,a){var d=jQuery("#"+f).val();
var e=/^[1-9]\d{0,2}$/g;if(!d.match(e)){alert("输入的数量有误,应为[1-999]");f.value="1";d=1}var h=jQuery("#"+f).attr("id");var c=h.split("_")[1];if(!checkOverLimit(f,d,2)){d=jQuery("#"+f).val();var b="/cart/ajax.do?lastChangeId="+h+"&action=updateLanding&productID="+c+"&productNum="+d+"&merchantId="+g+"&promotionIDs="+a;cart2.ajaxLandingNum(b,"0",1000,c,g,a)}}function initTextSliderEvent(){jQuery(".textSlider").unbind();jQuery(".textSlider").each(function(){var a=jQuery(this).find("li").size();if(a>1){jQuery(this).textSlider({line:1,speed:600,timer:3000})}})}function addToCart2(d,c,g,b,a,f,e){var h=e+":{pId:"+c+",mId:"+g+",num:"+b+"}";gotracker("2",h,null);addToCart(d,c,g,b,null,e)}function hideLastChangeNumDiv(){jQuery("#lastChangeDiv").fadeOut(500)}function lastChangeDivXY(){var a=jQuery("#"+jQuery("#lastChangeNum").val()).offset().left;
var b=jQuery("#"+jQuery("#lastChangeNum").val()).offset().top;jQuery("#lastChangeDiv").css({left:a-85});jQuery("#lastChangeDiv").css({top:b-90})}function refreshCart2PageContent(a){document.getElementById("cart2_content").innerHTML=a;initCart2PageEvent();showDeleteAllWaringItemsBtn();buildCartNumber();if($("#dailyChoiceProductList").html().indexOf("div")<0&&$("#dailyChoiceProductList").html().indexOf("DIV")<0){$(".cd").hide()}}function showDeleteAllWaringItemsBtn(){if(jQuery("#cart2_content tr.tr-error").size()>0){jQuery("#btnDeleteAllWaringItems").show()}else{jQuery("#btnDeleteAllWaringItems").hide()}}function ajaxAddProductToCart(c,b,e){if(b<1){b=1}var d="";if(typeof(document.referrer)!="undefined"){d=encodeURIComponent(document.referrer)}if(typeof(e)=="undefined"){e=""}var a="/cart/ajax.do?action=add&productID="+c+"&productNum="+b;
a=a+"&linkPosition="+e+"&pageReferer="+d;cart2.ajaxRefresh(a);if(typeof(pms_cart_id)!="undefined"&&pms_cart_id!=null){pms_cart_id=pms_cart_id+c+","}lazyLoadPMSAd01HtmlData()}function ajaxAddProductExtendServiceToCart(b){var d=jQuery("input[name='"+b+"']:checked").attr("id");var c=d.split("_");var a="/cart/ajax.do?action=add&productID="+c[0]+"&productNum=1&linkPosition=cart2yanbaoBtn";cart2.ajaxRefresh(a)}function initChantItemPopDiv(){}function initCart2PageEvent(){lazyLoadPMSAd01HtmlData();ajaxFreePromotionList();ajaxRedemptionPromotionList();initPromotionDeleteEvent();initCart();initTextSliderEvent();initChantItemPopDiv();showDeleteAllWaringItemsBtn();initGotoPayButtonXY()}function initCart(){$("#total_price_top").html($("#total_price_bottom").html());optMan.reloadDelete();refreshCheckbox();
bindCheckbox();$("table.list").find("tr").hover(function(){$("table.list").find("tr").removeClass("on");$(this).addClass("on")},function(){$(this).removeClass("on")});jQuery(".tip_box").hover(function(){jQuery(this).find("span").show()},function(){jQuery(this).find("span").hide()})}function bindCheckbox(){$(".allselect").bind("click",function(){var a=$(this).attr("checked");$("input[type='checkbox']").each(function(){$(this).attr("checked",a);if($(this).attr("name")=="cart2Checkbox"){ckbMan.click(this)}});refreshCheckbox();cart2.ajaxSelect()});$("input[type='checkbox'][name='bagCheckbox']").bind("click",function(){var a=$(this).attr("checked");$(this).parent().parent().parent().find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){$(this).attr("checked",a);ckbMan.click(this)});
refreshCheckbox();cart2.ajaxSelect()});$('input[type="checkbox"][name="cart2Checkbox"]').bind("click",function(){var b=$(this).val().split("_");if($(this).attr("checked")&&b[2]=="0"&&b[3]=="1"){b[3]="0";var a=b.join("_");$('input[type="checkbox"][name="cart2Checkbox"][value="'+a+'"]').each(function(){$(this).attr("checked",true);ckbMan.click(this)})}else{if(!$(this).attr("checked")&&b[2]=="0"&&b[3]=="0"){b[3]="1";var c=b.join("_");$('input[type="checkbox"][name="cart2Checkbox"][value="'+c+'"]').each(function(){$(this).attr("checked",false);ckbMan.click(this)})}}ckbMan.click(this);refreshCheckbox();cart2.ajaxSelect()})}function refreshCheckbox(){ckbMan.reset();var a=true;$("input[type='checkbox'][name='cart2Checkbox']").each(function(){if(!$(this).attr("checked")){a=false}});$(".allselect").attr("checked",a);
$("input[type='checkbox'][name='bagCheckbox']").each(function(){var b=true;$(this).parent().parent().parent().find('input[type="checkbox"][name="cart2Checkbox"]').each(function(){if(!$(this).attr("checked")){b=false}});$(this).attr("checked",b)});$("input[type='checkbox'][name='cart2Checkbox']").each(function(){if($(this).attr("checked")){$(this).parents("tr").addClass("select")}else{$(this).parents("tr").removeClass("select")}var d=$(this).val().split("_");var c=d[1];var b=d[3];if($(this).attr("checked")){var e=$(".no_pro.item"+c+"-"+b);if(e.size()>0){e.removeClass("no_pro");e.addClass("tr-promotion")}}else{var e=$(".tr-promotion.item"+c+"-"+b);if(e.size()>0){e.removeClass("tr-promotion");e.addClass("no_pro")}}})}function showPingAnPoints(){if(hasPingAnCookie==1){var a="/pingan/queryPoints.do";
jQuery.post(a,function(b){showPoints(b)})}}function showPoints(a){var b=a;if(b){jQuery("#pinganDiv").addClass("cart_notice mt5 red");jQuery("#pinganDiv").show();jQuery("#pinganDiv").html(b)}}function initGotoPayButtonXY(){var e=$(window).height();var c=$(window).scrollTop();if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){$(".fix_btm_bar").attr("class","fix_btm_bar2");var d=$("#freePromotionList").height()+$("#cart2_content").height()+140-$("#guaranteeArea").height();var b=d-e;var a=e-35;if(c>b){$(".fix_btm_bar2").css("position","static");$(".fix_btm_bar2").removeClass("shadow")}else{$(".fix_btm_bar2").css({position:"absolute",top:a+c});$(".fix_btm_bar2").addClass("shadow")}}else{var d=$("#freePromotionList").height()+$("#cart2_content").height()-$("#guaranteeArea").height();var b=d+120-e;
if(c>b){$(".fix_btm_bar").css("position","static");$(".fix_btm_bar").removeClass("shadow")}else{$(".fix_btm_bar").css("position","fixed");$(".fix_btm_bar").addClass("shadow")}}if(c>150){jQuery("#back-to-top").show()}else{jQuery("#back-to-top").hide()}}function lazyLoadPMSAd01HtmlData(){var b="";if(typeof(pms_cart_id)!="undefined"){b=pms_cart_id}var a=URLPrefix.pms+"/pms/getRelatedProductByCartProductId.do?r="+Math.random()+"&currSiteId="+currSiteId+"&provinceId="+currProvinceId+"&productIdCart="+b+"&isNew=Y&type=html&callback=?";jQuery.getJSON(a,function(c){if(c&&c.value){jQuery("#pms_cart").html(c.value);initTabsHoverEvent()}})}function lazyLoadCollectionData(){var a="http://my.yihaodian.com/member/myCollection/getCollectionProductForCart.do?type=html&callback=?";jQuery.getJSON(a,function(b){if(b&&b.value){if(jQuery.trim(b.value)!="EMPTY"){jQuery("#collection_cart").html(b.value);
jQuery(".collection_cart").show();initTabsHoverEvent()}}})}function lazyLoadViewHistoryData(){var a=jQuery.cookie("search_browse_history");if(a){a=decodeURI(a);var c=a.split(",");if(c.length>10){c=c.slice(0,10)}var b="/product/getHistoryProductInfo2Cart.do?productID="+a;jQuery.getJSON(b,function(d){if(d&&d.value){if(jQuery.trim(d.value)!="EMPTY"){jQuery("#view_history_cart").html(d.value);jQuery(".view_history_cart").show();initTabsHoverEvent()}}})}}function lazyLoad(){lazyLoadCollectionData();lazyLoadViewHistoryData()}function initTabsEvent(){jQuery(".hide").toggle(function(){jQuery(this).parent("div.clearfix").next("div").hide();jQuery(this).text("显示")},function(){jQuery(this).parent("div.clearfix").next("div").show();jQuery(this).text("隐藏")});jQuery(".tabs_content:first").show();jQuery(".tabs li").hover(function(){var b=$(".tabs li.current");
var c=$(".tabs li").index(b[0]);b.removeClass("current");jQuery(this).addClass("current");var a=jQuery(".tabs li").index(this);if(a!==c){jQuery(".tabs_content").eq(a).fadeIn();jQuery(".tabs_content").eq(c).hide()}return false})}function initTabsHoverEvent(){jQuery(".ap-prolist ").find("li").hover(function(){jQuery(".ap-prolist ").find("li").removeClass("graybg");jQuery(this).addClass("graybg")},function(){jQuery(this).removeClass("graybg")})}jQuery(document).ready(function(){$("#yhd_pop_win").appendTo($("body"));initCart2PageEvent();$(window).scroll(function(){initGotoPayButtonXY()});ckbMan.reset();showPingAnPoints();jQuery("#myYihaodianFloatDiv").css("z-index",9999);initTabsEvent();if(currSiteId==1){ajaxDailyChoiceProductList();setTimeout(lazyLoad,1500)}if($.browser.msie&&$.browser.version<=6){var b=0,a;
YHD.popwin("");a=setInterval(function(){++b;if(b==1){jQuery("#yhd_pop_win").jqmHide()}else{if(b==2){YHD.popwin("")}else{if(b==3){jQuery("#yhd_pop_win").jqmHide();clearInterval(a)}}}},1)}});function yw_login_submit(){var a=jQuery("#un_for_auth").val();if(a==""){jQuery("#accountDesc_for_auth").addClass("error_contract");jQuery("#accountDesc_for_auth").text("登录账号不能为空");jQuery("#un_for_auth").focus();return false}else{if(a.length>100){jQuery("#accountDesc_for_auth").addClass("error_contract");jQuery("#accountDesc_for_auth").text("账号长度不能超过100位");jQuery("#un_for_auth").focus();return false}else{if(a.toLowerCase().indexOf("<script")>-1||a.toLowerCase().indexOf("<\/script")>-1){jQuery("#accountDesc_for_auth").addClass("error_contract");jQuery("#accountDesc_for_auth").html("账号中包含非法字符");jQuery("#un_for_auth").focus();return false}}}var b=/\s+/;var c=jQuery("#pwd_for_auth").val();if(jQuery("#pwd_for_auth").val()==""){jQuery("#pwd_desc_for_auth").addClass("error_contract");jQuery("#pwd_desc_for_auth").text("登录密码不能为空");
jQuery("#pwd_for_auth").focus();return false}else{if(b.test(c)){jQuery("#pwd_desc_for_auth").addClass("error_contract");jQuery("#pwd_desc_for_auth").text("登录密码不能有空格");jQuery("#pwd_for_auth").focus();return false}}if(jQuery("#contract_second").attr("checked")==false){jQuery("#contract_second_desc").addClass("error_contract");return false}return true};function check_email_for_auth(){var a=jQuery("#email_for_auth").val();if(a==""){return 1}var b=/^([a-zA-Z0-9_\-|\.])+@([a-zA-Z0-9_\-])+((\.[a-zA-Z0-9_\-]{2,3}){1,2})$/;if(!b.test(a)){return 2}if(a.length>=40){return 3}return 0}function checkEmailOnBlur_for_auth(){var b=check_email_for_auth();if(b==1){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").text("Email不能为空");jQuery("#email_desc_for_auth").show()}else{if(b==2){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").html("请输入正确的Email地址");jQuery("#email_desc_for_auth").show()}else{if(b==3){jQuery("#email_desc_for_auth").removeClass("authrightInfo");
jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").html("邮箱长度不能超过40位");jQuery("#email_desc_for_auth").show()}else{var a="https://passport.111.com.cn/auth/checkEmail.do?";var c="ywUser.email="+jQuery("#email_for_auth").val();a=a+c+"&callback=?";jQuery.getJSON(a,function(d){if(d){if(d.returnCode==0){jQuery("#email_desc_for_auth").removeClass("error_contract");jQuery("#email_desc_for_auth").addClass("authrightInfo");jQuery("#email_desc_for_auth").text("");jQuery("#email_desc_for_auth").show()}else{if(d.returnCode==1){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").html("重复的email")}}jQuery("#email_desc_for_auth").show()}})}}}}function check_pwd1_for_auth(){var a=jQuery("#password_for_auth").val();
if(a==""){return 1}if(a.length>20){return 2}if(a.length<6){return 3}var b=/\s+/;if(b.test(a)){return 4}return 0}function checkPasswordOnBlur(){var a=check_pwd1_for_auth();if(a==1){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码不能为空")}else{if(a==2){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能超过20")}else{if(a==3){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能少于6")}else{if(a==4){jQuery("#password_desc_for_auth").removeClass("authrightInfo");
jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码中不允许有空格")}else{jQuery("#password_desc_for_auth").removeClass("error_contract");jQuery("#password_desc_for_auth").addClass("authrightInfo");jQuery("#password_desc_for_auth").text("")}}}}}function checkPassword2OnBlur_for_auth(){var a=check_pwd2_for_auth();if(a==1){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("重复密码不能为空")}else{if(a==2){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("密码不一致")}else{jQuery("#password2_desc_for_auth").removeClass("error_contract");
jQuery("#password2_desc_for_auth").addClass("authrightInfo");jQuery("#password2_desc_for_auth").text("")}}jQuery("#password2_desc_for_auth").show()}function check_pwd2_for_auth(){var a=jQuery("#password_for_auth").val();var b=jQuery("#password2_for_auth").val();if(b==""){return 1}if(a!=b){return 2}return 0}function beforeRegister(){var c=check_email_for_auth();if(c==1){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").text("Email不能为空");jQuery("#email_for_auth").focus();return false}else{if(c==2){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error");jQuery("#email_desc_for_auth").html("请输入正确的Email地址");jQuery("#email_for_auth").focus();return false
}else{if(c==3){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").html("邮箱长度不能超过40位");return false}else{if(jQuery("#email_desc_for_auth").html()=="重复的email"){jQuery("#email_for_auth").focus();return false}}}}var b=check_pwd1_for_auth();if(b==1){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码不能为空");jQuery("#password_for_auth").focus();return false}else{if(b==2){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能超过20");jQuery("#password_for_auth").focus();return false
}else{if(b==3){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能少于6");jQuery("#password_for_auth").focus();return false}else{if(b==4){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码中不允许有空格");jQuery("#password_for_auth").focus();return false}}}}var a=check_pwd2_for_auth();if(a==1){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("重复密码不能为空");jQuery("#password2_for_auth").focus();return false}else{if(a==2){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");
jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("密码不一致");jQuery("#password2_for_auth").focus();return false}}if(jQuery("#validCode_for_auth").val()==""){jQuery("#validCode_desc_for_auth").removeClass("authrightInfo");jQuery("#validCode_desc_for_auth").addClass("error_contract");jQuery("#validCode_desc_for_auth").text("验证码不能为空");jQuery("#validCode_for_auth").focus();return false}else{if(jQuery("#validCode_for_auth").val().length!=4){jQuery("#validCode_desc_for_auth").removeClass("authrightInfo");jQuery("#validCode_desc_for_auth").addClass("error_contract");jQuery("#validCode_desc_for_auth").text("验证码长度必须是4位");jQuery("#validCode_for_auth").focus();return false}else{jQuery("#validCode_desc_for_auth").removeClass()}}if(jQuery("#contract_third").attr("checked")==false){jQuery("#contract_third_desc").addClass("error_contract");
return false}return true};function authDiv_contentStr_first(b){jQuery("#authAccount").html(b);jQuery("#authAccount").css("display","");var a=jQuery("#authDiv_contentStr_first").html();return a}function authDiv_contentStr_sencode(b){if(b){jQuery("#la_des").show();jQuery("#ac_span").html(b+"<input type='hidden' id='un_for_auth'  value="+b+">")}else{jQuery("#la_des").hide();var c="<input type='text' id='un_for_auth' onkeydown='javascript:jQuery(\"#accountDesc_for_auth\").removeClass();'>";jQuery("#ac_span").html(c)}var a=jQuery("#authDiv_contentStr_sencode").html();return a}function authDiv_contentStr_third(){refresh_valid_code_for_auth();var a=jQuery("#authDiv_contentStr_third").html();return a}function authDiv_contentStr_four(b){if(b){jQuery("#ac_span_union").html("<strong>"+b+"</strong>")}else{}var a=jQuery("#authDiv_contentStr_four").html();
return a}function authDiv_contentStr_sucess(b){if(b){jQuery("#ac_success").html("<strong>"+b+"</strong")}var a=jQuery("#authDiv_contentStr_sucess").html();return a}function authDiv_contentStr_error(){var a=jQuery("#authDiv_contentStr_error").html();return a}function authDiv_pwd_error(){var a=jQuery("#authDiv_pwd_error").html();return a}function showLoginAuthDiv(){var b="";var a=authDiv_contentStr_sencode(b);YHD.popwin(a,550,430)}function showRegAuthDiv(){refresh_valid_code_for_auth();var a=authDiv_contentStr_third();YHD.popwin(a,550,430)}function ywAutoAuth(){if(jQuery("#contract_first").attr("checked")==false){jQuery("#contract_first_desc").addClass("error_contract");jQuery("#contract_first").focus();return false}var e="https://passport.111.com.cn/auth/beforeAutoAuthByYhdUserInfo.do?callback=?";
var d="https://passport.yihaodian.com/auth/authAccount.do?";var b,f,a,c,h,g;jQuery.getJSON(e,function(j){if(j){if(j.regitserCode==-1||j.regitserCode==1){var i=authDiv_contentStr_error();YHD.popwin(i,550,430);return false}else{if(j.regitserCode==0){b=j.yhd_user_id;f=j.yw_user_id;a=j.yw_time;c=j.yhd_yw_sign;h="yhd_user_id="+b+"&yw_user_id="+f+"&yw_time="+a+"&authorize_type=1&yhd_yw_sign="+c;d=d+h+"&callback=?";jQuery.getJSON(d,function(n){if(n){g=n.auth_status;if(g&&g==1){var k=n.userEmail;var m=authDiv_contentStr_sucess(k);YHD.popwin(m,550,430);return false}else{var l=authDiv_contentStr_error();YHD.popwin(l,550,430);return false}}})}}}})}function ywLoginAuth(){if(yw_login_submit()){var h="credentials.username="+jQuery("#un_for_auth").val();h+="&credentials.password="+encodeURIComponent(jQuery("#pwd_for_auth").val());
var e="https://passport.111.com.cn/auth/beforeAuthLogin.do?"+h+"&callback=?";var d="https://passport.yihaodian.com/auth/authAccount.do?";var b,f,a,c,h,g;jQuery.getJSON(e,function(j){if(j){if(j.returnCode==-1){var i=authDiv_contentStr_error();YHD.popwin(i,550,430);return false}if(j.errorTimes>6){var i=authDiv_pwd_error();YHD.popwin(i,550,430);return false}if(j.returnCode==1){jQuery("#accountDesc_for_auth").removeClass("authrightInfo");jQuery("#accountDesc_for_auth").addClass("error_contract");jQuery("#accountDesc_for_auth").text("账号不存在");jQuery("#un_for_auth").focus()}else{if(j.returnCode==2){jQuery("#pwd_desc_for_auth").removeClass("authrightInfo");jQuery("#pwd_desc_for_auth").addClass("error_contract");jQuery("#pwd_desc_for_auth").text("账号与密码不匹配");jQuery("#pwd_for_auth").focus()}else{if(j.returnCode==0){b=j.yhd_user_id;
f=j.yw_user_id;a=j.yw_time;c=j.yhd_yw_sign;h="yhd_user_id="+b+"&yw_user_id="+f+"&yw_time="+a+"&authorize_type=1&yhd_yw_sign="+c;d=d+h+"&callback=?";jQuery.getJSON(d,function(n){if(n){g=n.auth_status;if(g&&g==1){var k=n.userEmail;var m=authDiv_contentStr_sucess(k);YHD.popwin(m,550,430);return false}else{var l=authDiv_contentStr_error();YHD.popwin(l,550,430);return false}}})}}}}})}}function ywRegisterAuth(){var e="https://passport.111.com.cn/auth/beforeAuthRegister.do?";var b,f,a,c,h,g;var d="https://passport.yihaodian.com/auth/authAccount.do?";var h="ywUser.email="+jQuery("#email_for_auth").val()+"&passWord="+encodeURIComponent(jQuery("#password_for_auth").val())+"&confirmPwd="+encodeURIComponent(jQuery("#password2_for_auth").val())+"&validCode="+jQuery("#validCode_for_auth").val();e=e+h+"&callback=?";
if(beforeRegister()){jQuery.getJSON(e,function(j){if(j){if(j.regitserCode==-1){var i=authDiv_contentStr_error();YHD.popwin(i,550,430);return false}if(j.regitserCode!=0){refresh_valid_code_for_auth()}if(j.regitserCode==1){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").text("Email不能为空");jQuery("#email_for_auth").focus();return false}else{if(j.regitserCode==2){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").text("邮箱长度不能超过40位");jQuery("#email_for_auth").focus();return false}else{if(j.regitserCode==3){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");
jQuery("#email_desc_for_auth").text("请输入正确的Email地址");jQuery("#email_for_auth").focus();return false}else{if(j.regitserCode==4){jQuery("#email_desc_for_auth").removeClass("authrightInfo");jQuery("#email_desc_for_auth").addClass("error_contract");jQuery("#email_desc_for_auth").text("重复的email");jQuery("#email_for_auth").focus();return false}else{if(j.regitserCode==5){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码不能为空");jQuery("#password_for_auth").focus();return false}else{if(j.regitserCode==6){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能超过20");jQuery("#password_for_auth").focus();
return false}else{if(j.regitserCode==7){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码长度不能少于6");jQuery("#password_for_auth").focus();return false}else{if(j.regitserCode==8){jQuery("#password_desc_for_auth").removeClass("authrightInfo");jQuery("#password_desc_for_auth").addClass("error_contract");jQuery("#password_desc_for_auth").text("密码中不允许有空格");jQuery("#password_for_auth").focus();return false}else{if(j.regitserCode==9){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("重复密码不能为空");jQuery("#password2_for_auth").focus();return false}else{if(j.regitserCode==10){jQuery("#password2_desc_for_auth").removeClass("authrightInfo");
jQuery("#password2_desc_for_auth").addClass("error_contract");jQuery("#password2_desc_for_auth").text("密码不一致");jQuery("#password2_for_auth").focus();return false}else{if(j.regitserCode==11){jQuery("#validCode_desc_for_auth").removeClass("authrightInfo");jQuery("#validCode_desc_for_auth").addClass("error_contract");jQuery("#validCode_desc_for_auth").text("验证码不正确");jQuery("#validCode_for_auth").focus();return false}else{if(j.regitserCode==0){b=j.yhd_user_id;f=j.yw_user_id;a=j.yw_time;c=j.yhd_yw_sign;h="yhd_user_id="+b+"&yw_user_id="+f+"&yw_time="+a+"&authorize_type=1&yhd_yw_sign="+c;d=d+h+"&callback=?";jQuery.getJSON(d,function(n){if(n){g=n.auth_status;if(g&&g==1){var k=n.userEmail;var m=authDiv_contentStr_sucess(k);YHD.popwin(m,550,430);return false}else{var l=authDiv_contentStr_error();YHD.popwin(l,550,430);
return false}}})}}}}}}}}}}}}}})}}function ywAuth(){var a="https://passport.111.com.cn/auth/authYw.do?callback=?";jQuery.getJSON(a,function(e){if(e){if(e.authCode==1){var b=e.userEmail;var d=authDiv_contentStr_sucess(b);YHD.popwin(c,550,430);return false}else{if(e.authCode==0){var c=authDiv_contentStr_error();YHD.popwin(c,550,430);return false}}}})}function showAuthDiv(){var a="https://passport.111.com.cn/auth/showAuthBox.do?callback=?";jQuery.getJSON(a,function(e){if(e){if(e.returnCode==-1){yhdPublicLogin.showLoginDiv("/checkout/index.do",false);return false}else{if(e.returnCode==1){var d=e.authEmail;var b=e.ywAuthType;if(b==1){var c=authDiv_contentStr_first(d);YHD.popwin(c,550,430)}else{if(b==2){var c=authDiv_contentStr_sencode(d);YHD.popwin(c,550,430)}else{if(b==3){var c=authDiv_contentStr_third(d);
YHD.popwin(c,550,430)}else{if(b==4){var c=authDiv_contentStr_four(d);YHD.popwin(c,550,430)}}}}}}}})}function refresh_valid_code_for_auth(){var a=new Date();jQuery("#valid_code_pic_for_auth").attr("src","https://passport.111.com.cn/passport/valid_code.do?t="+a)}function hidenAuth(){var a=jQuery("#yhd_pop_win");if(a){a.jqmHide()}};