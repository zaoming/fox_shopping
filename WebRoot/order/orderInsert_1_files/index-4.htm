<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0045)http://chongzhi.360buy.com/static/index-4.htm -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">

<title>手机充值-京东商城</title>
    <style type="text/css">
    html,body,div,span,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,address,big,cite,code,del,em,font,img,ins,small,strong,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend{margin:0;padding:0;}ol,ul{list-style:none;}:focus{outline:0;}a img{border:0;}img{vertical-align:middle;}table{empty-cells:show;}ins{text-decoration:none;}del{text-decoration:line-through;}em{font-style:normal;}
    button::-moz-focus-inner,
    input[type="reset"]::-moz-focus-inner,
    input[type="button"]::-moz-focus-inner,
    input[type="submit"]::-moz-focus-inner,
    input[type="file"]>input[type="button"]::-moz-focus-inner{border:none;padding:0;}
    .fl{float:left;}.fr{float:right;}.fn{float:none;}.al{text-align:left;}.ac{text-align:center;}.ar{text-align:right;}
    .clr{display:block;overflow:hidden;clear:both;height:0;line-height:0;font-size:0;}.clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden;}.clearfix{display:inline-table;}/* Hides from IE-mac \*/*html .clearfix{height:1%;}.clearfix{display:block;}/* End hide from IE-mac */*+html .clearfix{min-height:1%;}.overflow{overflow:hidden;}
    .form label,.form input,.form select,.form textarea,.form button,.form .label{float:left;font-size:12px;}
    .block{display:block;overflow:hidden;cursor:pointer;}
    .hide{display:none;}
    .invisible{visibility:hidden;}
    .tab{overflow:hidden;zoom:1;}
    .tab li,.tab a,.tab-item{float:left;cursor:pointer;text-align:center;}
    .btn-img,.button{display:inline-block;margin:0;padding:0;border:0;text-align:center;cursor:pointer;}
    .btn-text{margin:0;padding:0;text-align:center;cursor:pointer;}
    body{font:12px/150% Arial,Verdana,"\5b8b\4f53";color:#333;background:#fff;_background-image:url(about:blank);_background-attachment:fixed;}
    h1{font:20px "microsoft yahei","\5b8b\4f53";}
    h2,h3{font-size:14px;}
    h4,h5,h6{font-size:12px;}
    a:link,a:visited{color:#333;text-decoration:none;}
    a:hover{color:#C00;text-decoration:underline;}
    a:active{color:#900;}
    /*virtuals-iframe*/
    #chongzhi{width:200px;height:131px;padding:8px 0 0 8px;}
    #chongzhi .item{overflow:hidden;padding:5px 0;line-height:22px;zoom:1;}
    #chongzhi .fl{width:140px;}
    #chongzhi label{width:50px;text-align:right;}
    #chongzhi select{height:22px;padding:2px;margin-right:5px;margin-left:0;}
    #chongzhi .select2{margin-right:0;}
    #chongzhi .text1{width:133px;height:16px;padding:2px;border:1px inset #ccc;margin-right:5px;}
    #chongzhi .button{float:left;width:73px;height:25px;line-height:25px;background:url(http://misc.360buyimg.com/lib/skin/2012/i/20111221B.png) no-repeat -124px -220px;margin-right:5px;}
    #chongzhi .button-gray{background:url(http://misc.360buyimg.com/201007/skin/df/i/20120709A.png) no-repeat;color:#CBCBCB;}
    #chongzhi .label{color:#999;}
    #chongzhi a{color:#005EA7;}
    #chongzhi strong,
    #chongzhi .error{color:#c30;}
    #chongzhi #promotwords{display:none;line-height:25px;}
    #gameWord{display: none}
    .root61 #chongzhi{width:300px;}
    .root61 #chongzhi .fl{width:220px;}
    .root61 #chongzhi #promotwords{display:block;}
    .game #chongzhi{width:190px;height:178px;background:#F9FAFE;padding: 0}
    .game #chongzhi .item{overflow:hidden;padding:5px 0;line-height:20px;zoom:1;}
    .game #chongzhi .fl{width:140px;}
    .game #chongzhi label{width:50px;text-align:right;}
    .game #chongzhi select{height:22px;padding:2px;margin-right:2px;margin-left:0;}
    .game #chongzhi .select2{margin-right:0;}
    .game #chongzhi .text1{width:116px;height:16px;padding:2px;border:1px inset #ccc;margin-right:5px;_width: 106px;}
    .game #chongzhi .button{float:left;width:73px;height:25px;line-height:25px;background:url(http://misc.360buyimg.com/lib/skin/2012/i/20111221B.png) no-repeat -124px -220px;margin-right:5px;}
    .game #chongzhi .button-gray{background:url(http://misc.360buyimg.com/201007/skin/df/i/20120709A.png) no-repeat;color:#CBCBCB;}
    .game #chongzhi .label{color:#999;}
    .game #chongzhi a{color:#005EA7;}
    .game #chongzhi strong,
    .game #chongzhi .error{color:#c30;}
    .game #chongzhi #promotwords{display:none;line-height:25px;}
    .game #jdPrice{padding-left: 52px;}
    .game #gameWord{display: block;}
    .game #jdPrice{width:70px;text-align: left;}
    </style>

</head>

<body class="root61">
<script>(function(b){if(b)document.getElementsByTagName("body")[0].className=""})(window.location.href.match(/\?990/))</script>
<script>(function(b){if(b)document.getElementsByTagName("body")[0].className="game"})(window.location.href.match(/\?game/))</script>
 <form action="" id="rechargePhone" method="post" autocomplete="off">
<div class="form" id="chongzhi">
	<div class="item">
		<label>手机号：</label>
		<div class="fl">
			<input type="text" id="txtPn" name="txtPn" class="text1" value="请输入手机号" maxlength="11" style="color: rgb(153, 153, 153); " onkeyup="LoadISPJSON()" onblur="showDefault()" onkeydown="return (event.keyCode!=13)" onfocus="clearDefault()"><span class="clr"></span>
			<span id="defaultMobileInfo">
				支持移动、联通、电信
            </span>
            <span class="clr"></span>
			<span id="ISPmodi" class="hide">
				<select onchange="changeEverything()" class="select1" name="area" id="area">
					 <option value="-1"> 请选择</option>
					 <option value="1"> 北京</option>
					 <option value="2"> 上海</option>
					 <option value="3"> 天津</option>
					 <option value="4"> 重庆</option>
					 <option value="5"> 河北</option>
					 <option value="6"> 山西</option>
					 <option value="7"> 河南</option>
					 <option value="8"> 辽宁</option>
					 <option value="9"> 吉林</option>
					 <option value="10"> 黑龙江</option>
					 <option value="11"> 内蒙古</option>
					 <option value="12"> 江苏</option>
					 <option value="13"> 山东</option>
					 <option value="14"> 安徽</option>
					 <option value="15"> 浙江</option>
					 <option value="16"> 福建</option>
					 <option value="17"> 湖北</option>
					 <option value="18"> 湖南</option>
					 <option value="19"> 广东</option>
					 <option value="20"> 广西</option>
					 <option value="21"> 江西</option>
					 <option value="22"> 四川</option>
					 <option value="23"> 海南</option>
					 <option value="24"> 贵州</option>
					 <option value="25"> 云南</option>
					 <option value="26"> 西藏</option>
					 <option value="27"> 陕西</option>
					 <option value="28"> 甘肃</option>
					 <option value="29"> 青海</option>
					 <option value="30"> 宁夏</option>
					 <option value="31"> 新疆</option>
				</select>
				<select onchange="changeEverything()" class="select2" name="ISP" id="ISP">
					<option value="-1"> 请选择</option>
					<option value="0"> 联通</option>
					<option value="1"> 移动</option>
					<option value="2"> 电信</option>
				</select>
			</span>
		</div>
	</div>
	<div class="item">
		<label>面值：</label>
		<select id="facePrice" name="facePrice" onchange="changeEverything()">
			<option value="10">10元</option>
            <option value="20">20元</option>			
			<option value="30">30元</option>
            <option value="50">50元</option>
            <option value="100" selected="selected">100元</option>
            <option value="200">200元</option>
            <option value="300">300元</option>
            <option value="500">500元</option>
		</select>
		<span class="label" id="jdPrice"><strong>98.60-99.60</strong></span>
	</div>
	<div class="item">
		<label>&nbsp;</label>
		<input type="button" id="submit" class="button" value="点击充值" onclick="submitPhone();try{window.parent.pageTracker._trackEvent(&#39;Button&#39;,&#39;TopUp&#39;,&#39;HomePage&#39;);}catch(err){}">
		<span id="promotwords" class="label"><a href="http://chongzhi.360buy.com/act/kami.action" target="_blank">充话费送20元话费</a></span>
	</div>
	<div class="item" id="gameWord">
        <label>&nbsp;</label> 
        <span id="gamePromotWords"><a href="http://chongzhi.360buy.com/act/kami.action" target="_blank">充话费送20元话费</a></span>
    </div>
</div>
     <input type="hidden" value="" id="skuId">
</form>
<script type="text/javascript">
	(function(){
var adContent="<A href='http://chongzhi.360buy.com/act/kami.action' target='_blank'>充话费送20元话费</A>";
document.getElementById("promotwords").innerHTML=adContent;
document.getElementById("gamePromotWords").innerHTML=adContent;
})();


</script>
<script type="text/javascript">
    //域名地址,线上改为:http://chongzhi.360buy.com
    var url = "";
    function PriceRange(price, facePrice) {
        this.price = price;
        this.facePrice = facePrice;
    }
    var priceRangeList = new Array();
    priceRangeList[0] = new PriceRange("10", "<strong>10.00</strong>");
	priceRangeList[1] = new PriceRange("20", "<strong>20.00</strong>");
    priceRangeList[2] = new PriceRange("50", "<strong>49.20-49.80</strong>");	
    priceRangeList[3] = new PriceRange("30", "<strong>29.65-30.13</strong>");
    priceRangeList[4] = new PriceRange("50", "<strong>49.20-49.80</strong>");
    priceRangeList[5] = new PriceRange("100", "<strong>98.60-99.60</strong>");
    priceRangeList[6] = new PriceRange("200", "<strong>197.0-199.0</strong>");
    priceRangeList[7] = new PriceRange("300", "<strong>295.5-298.5</strong>");
    priceRangeList[8] = new PriceRange("500", "<strong>492.5-496.5</strong>");
    //校验手机号
    var checkPhone = function(num) {
        if (num.length != 11) {
            return false;
        }
        var tel = /^(1)\d{10}$/;
        return  tel.test(num);
    };

    var xmlDoc = null, xmlhttp = null,xmlhttp2 = null;
    function InitXMLHttpRequest() {
        xmlhttp = window.XMLHttpRequest ? new window.XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHttp");
    }
    function InitXMLHttpRequest2() {
        xmlhttp2 = window.XMLHttpRequest ? new window.XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHttp");
    }

    function LoadISPJSON() {
        if (xmlhttp == null) {
            InitXMLHttpRequest();
        }
        if (xmlhttp == null) {
            alert("你的浏览器不支持 XMLHttpRequest");
            return false;
        }
        if (!checkPhone(document.getElementById("txtPn").value)) {
            var ISPmodi = document.getElementById("ISPmodi");
            var defaultMobileInfo = document.getElementById("defaultMobileInfo");
            defaultMobileInfo.className = "label error";
            ISPmodi.className = "hide";
            var ispspan = document.getElementById("defaultMobileInfo");
            ispspan.innerHTML = '请输入正确的手机号';
            var rsubmit = document.getElementById("submit");
            rsubmit.className = "button";
            rsubmit.disabled = false;
            changeEverything();
            return false;
        }
        xmlhttp.open("GET", url+"/json/order/search_searchPhone.action?mobile=" + document.getElementById("txtPn").value, false);
        xmlhttp.setRequestHeader("Content-Type", "text/plain");
        xmlhttp.onreadystatechange = GetISPJSONMessage;
        xmlhttp.send(null);
        if (xmlhttp.status == 200&&navigator.userAgent.indexOf("Firefox")>0) {
            xmlhttp.onreadystatechange = GetISPJSONMessage();
        }
    }
    function GetISPJSONMessage() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var jsonText = xmlhttp.responseText;
            if (jsonText == null || jsonText == "") {
                return;
            }
            var jsonObj = eval('(' + jsonText + ')');
            ShowInfo(jsonObj);
        }
    }

    function LoadSkuJSON() {
        if (xmlhttp2 == null) {
            InitXMLHttpRequest2();
        }
        if (xmlhttp2 == null) {
            alert("你的浏览器不支持 XMLHttpRequest");
            return;
        }
        xmlhttp2.open("GET", url+"/json/order/search_searchSkuId.action?faceValue=" + document.getElementById("facePrice").value+"&ISP="+document.getElementById("ISP").value+"&area="+document.getElementById("area").value+"&filltype=0", false);
        xmlhttp2.setRequestHeader("Content-Type", "text/plain");
        xmlhttp2.onreadystatechange = GetSkuJSONMessage;
        xmlhttp2.send(null);
        if (xmlhttp2.status == 200&&navigator.userAgent.indexOf("Firefox")>0) {
            xmlhttp2.onreadystatechange = GetSkuJSONMessage();
        }
    }
    function GetSkuJSONMessage() {
        if (!checkHtmlValue("facePrice,ISP,area,txtPn")) {
            return;
        }
        if (xmlhttp2.readyState == 4 && xmlhttp2.status == 200) {
            var skuJsonText = xmlhttp2.responseText;
            var rsubmit = document.getElementById("submit");
            if (skuJsonText == null || skuJsonText == "") {
                var jdPrice = document.getElementById("jdPrice");
                rsubmit.className = "button button-gray";
                rsubmit.disabled = true;
                jdPrice.innerHTML = "<strong>【暂无】</strong>";
                return;
            } else {
                rsubmit.className = "button";
                rsubmit.disabled = false;
            }

            rsubmit.disabled = false;
            var skuInfo = eval('(' + skuJsonText + ')');
            ShowSkuInfo(skuInfo);
        }
    }

    function checkHtmlValue(valueList){
        var list = valueList.split(",");
        for(var i = 0; i < list.length; i++){
             if(document.getElementById(list[i])==null||document.getElementById(list[i]).value==null||document.getElementById(list[i]).value==""){
                 return false;
             }
        }
        return true;
    }

    function ShowInfo(phoneInfo) {
        var ispspan = document.getElementById("defaultMobileInfo");
        var ISP = document.getElementById("ISP");
        var area = document.getElementById("area");
        if (phoneInfo.area == null || phoneInfo.provider == null) {
            ispspan.innerHTML = '未知地区和运营商&nbsp;<a id="modifyISP"  style="cursor:pointer;color:#005EA7" onclick=\"showIpsSelect()\">[修改]</a>';
            ISP.value = "-1";
            area.value = "-1";
        } else {
            ispspan.innerHTML =  phoneInfo.areaName + phoneInfo.providerName + "&nbsp;<a id=\"modifyISP\" class=\"fore\"  style=\"cursor:pointer;color:#005EA7\" onclick=\"showIpsSelect()\">[修改]</a>";
            ISP.value = phoneInfo.provider;
            area.value =  phoneInfo.area;
            changeEverything();
        }
    }

    function ShowSkuInfo(skuInfo){
        var jdPrice = document.getElementById("jdPrice");
        var skuId = document.getElementById("skuId");
        var rsubmit = document.getElementById("submit");
        if(skuInfo==null||skuInfo.skuId==null||skuInfo.frontJdPrice==null){
            rsubmit.className = "button button-gray";
            rsubmit.disabled=true;
            jdPrice.innerHTML="<strong>【暂无】</strong>";
            return;
        }else{
            rsubmit.className = "button";
            rsubmit.disabled = false;
        }
        skuId.value = skuInfo.skuId;
        jdPrice.innerHTML = "<strong>"+skuInfo.frontJdPrice+"元</strong>";
    }

    var showIpsSelect = function() {
        var ISPmodi = document.getElementById("ISPmodi");
        var defaultMobileInfo = document.getElementById("defaultMobileInfo");
        defaultMobileInfo.className = "hide";
        ISPmodi.className = "";
    };

    var changeEverything = function(){
        var ISP = document.getElementById("ISP");
        var area = document.getElementById("area");
        var facePrice = document.getElementById("facePrice");
        var txtPn = document.getElementById("txtPn").value;
        var jdPrice = document.getElementById("jdPrice");
        var skuId = document.getElementById("skuId");

        skuId.value="";
        if(!checkPhone(txtPn)){
            for (var i = 0; i < priceRangeList.length; i++) {
                if(priceRangeList[i].price == facePrice.value){
                  jdPrice.innerHTML=priceRangeList[i].facePrice;
                  return;
                }
            }
             return;
        }
        if (ISP == null || ISP.value == "-1" || area == null || area.value == "-1" || facePrice == null || facePrice.value == "") {
            return;
        }
        LoadSkuJSON();
    };

    var submitPhone = function(){
//      LoadISPJSON();
      if (!checkHtmlValue("facePrice,ISP,area,txtPn,skuId")) {
            var ispspan = document.getElementById("defaultMobileInfo");
            ispspan.className = "label error";
            ispspan.innerHTML = '请填写正确的充值信息';
            return;
        }
		var entryValue = 1;
		if(window.location.href.match(/\?990/) == "?990"){
		    entryValue = "2";
		}
		if(window.location.href.match(/\?game/) == "?game"){
		    entryValue = "6";
		}
        window.open(url+"/order/order_place.action?skuId="+document.getElementById("skuId").value+"&mobile="+document.getElementById("txtPn").value+"&entry="+entryValue) ;
    };

    var clearDefault = function(){
        if(document.getElementById("txtPn").value=="请输入手机号"){
          document.getElementById("txtPn").value = "";
          document.getElementById("txtPn").style.color="black";
        }
    } ;

    var showDefault = function(){
        if(document.getElementById("txtPn").value==null||document.getElementById("txtPn").value==""){
          document.getElementById("txtPn").value = "请输入手机号";
          document.getElementById("txtPn").style.color="#999";
        }
    }
    //根据cookie初始化手机号及面额  ---------start
    //读取cookie
    function getCookie(name) {
        var arg = name + "=";
        var alen = arg.length;
        var clen = document.cookie.length;
        var i = 0;
        var j = 0;
        while(i < clen) {
            j = i + alen;
            if(document.cookie.substring(i, j) == arg){
               return getCookieval_r(j);
            }
            i = document.cookie.indexOf(" ", i) + 1;
            if(i === 0){
               break;
            }
        }
        return '';
    }
    //获取cookie的值
    function getCookieval_r(offset) {
        var endstr = document.cookie.indexOf(";", offset);
        if(endstr == -1) {
            endstr = document.cookie.length;
        }
        return document.cookie.substring(offset, endstr);
    }

    function initPhoneAndPrice(){
        //读取cookie的值
        var cookieValue = getCookie("_creat_");
        if(cookieValue == "" || cookieValue.split(",").length != 2){
            document.getElementById("txtPn").value = "请输入手机号";
            document.getElementById("txtPn").style.color="#999";
            return;
        }else{
            var cookieValues = cookieValue.split(",");
            var phoneNos = cookieValues[1];
            var prices = cookieValues[0];
            if(phoneNos == null || prices == null || phoneNos == "" || prices == "" ||
                    phoneNos.split(":").length != 2 || prices.split(":").length != 2 ){
                document.getElementById("txtPn").value = "请输入手机号";
                document.getElementById("txtPn").style.color="#999";
                return;
            }
            var phoneNo = phoneNos.split(":")[1];
            var price = prices.split(":")[1];
            if(phoneNo == null || "null"==phoneNo || phoneNo == "" || price == null || "null"==price || price == ""){
                document.getElementById("txtPn").value = "请输入手机号";
                document.getElementById("txtPn").style.color="#999";
                return;
            }else{
                phoneNo = phoneNo.replace("\"","");
            }
            if(!checkPhone(phoneNo)){
                document.getElementById("txtPn").value = "请输入手机号";
                document.getElementById("txtPn").style.color="#999";
                return;
            }
            //初始化手机号
            document.getElementById("txtPn").value=phoneNo;
            document.getElementById("txtPn").style.color="black";
            //初始化面额
            setPrice(price);
            //加载手机面额相关数据
            LoadISPJSON();
        }
    }
    function setPrice(price){
        var obj;
        obj=document.getElementById("facePrice");
        if(obj!=null){
            for(var i=0;i<obj.length;i++){
                if(obj[i].value == price){
                    obj[i].selected=true;
                }
            }
        }
    }
    initPhoneAndPrice();
    //根据cookie初始化手机号及面额  ---------end
</script>

</body></html>