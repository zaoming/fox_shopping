/* SVN.committedRevision=396276 */
function newDiv(f,b,e,a){var c=document.createElement("div");c.id="deployDiv";c.style.position="absolute";c.style.zIndex="9999";c.style.width=e;c.style.height=a;c.style.top=(document.body.scrollTop+document.documentElement.scrollTop+(window.screen.availHeight-200)/2)+"px";c.style.left=(document.body.scrollLeft+(window.screen.availWidth-400)/2)+"px";c.style.background="#ffffff";c.style.border=b;c.style.padding="0px";document.body.appendChild(c);var g=document.createElement("div");g.id="maskdiv";g.style.position="absolute";g.style.zIndex="9990";g.style.width=document.body.scrollWidth+"px";g.style.height=document.body.scrollHeight+"px";g.style.top="0px";g.style.left="0px";g.style.background="#000";g.style.filter="alpha(opacity=40)";g.style.opacity="0.40";document.body.appendChild(g);var d=document.createElement("div");
if("styleFloat" in document.documentElement.style){d.style.styleFloat="left"}else{if("cssFloat" in document.documentElement.style){d.style.cssFloat="left"}}c.appendChild(d);d.innerHTML=f}function closeDiv(){jQuery("#deployDiv").remove();jQuery("#maskdiv").remove();return false}jQuery(document).ready(function(){var tabNum=jQuery(".ul_tab").attr("alt");jQuery("#tab"+tabNum).addClass("on").siblings().removeClass("on");var index=jQuery(".ul_tab li").index(jQuery("#tab"+tabNum));jQuery(".tab_content").addClass("hide");jQuery(".tab_content").eq(index).removeClass("hide");if(jQuery("#container").attr("alt")!=""){MY_YHD.alert("您的个人信息修改成功！")}var url="/member/userinfo/address.do?type=";jQuery("select[name='userInfo.address.provinceID']").empty();jQuery("select[name='userInfo.address.provinceID']").prepend("<option value='0'>请选择省</option>");
jQuery("select[name='userInfo.address.cityID']").empty();jQuery("select[name='userInfo.address.cityID']").prepend("<option value='0'>请选择市/区</option>");jQuery("select[name='userInfo.address.countyID']").empty();jQuery("select[name='userInfo.address.countyID']").prepend("<option value='0'>请选择区/县/街道</option>");bandProvince(jQuery("#address_province_id").val(),function(){if(jQuery("#address_province_id").val()>0){bandCity(jQuery("#address_province_id").val(),jQuery("#address_city_id").val(),function(){if(jQuery("#address_city_id").val()>0){bandCounty(jQuery("#address_city_id").val(),jQuery("#address_county_id").val(),function(){if(jQuery("#address_county_id").val()>0){}})}})}});jQuery("select[name='userInfo.address.provinceID']").change(function(){jQuery("select[name='userInfo.address.cityID']").empty();
jQuery("select[name='userInfo.address.cityID']").prepend("<option value='0'>请选择市/区</option>");jQuery("select[name='userInfo.address.countyID']").empty();jQuery("select[name='userInfo.address.countyID']").prepend("<option value='0'>请选择区/县/街道</option>");bandCity(jQuery(this).val(),0,function(){})});jQuery("select[name='userInfo.address.cityID']").change(function(){jQuery("select[name='userInfo.address.countyID']").empty();jQuery("select[name='userInfo.address.countyID']").prepend("<option value='0'>请选择区/县/街道</option>");bandCounty(jQuery(this).val(),0,function(){})});function bandProvince(provId,callback){jQuery("select[name='userInfo.address.provinceID']").empty();jQuery("select[name='userInfo.address.provinceID']").prepend("<option value='0'>请选择省</option>");jQuery.get(url+"province&countryID=1",function(data){jQuery.each(eval(data),function(entryIndex,entry){if(provId==entry.id){jQuery("select[name='userInfo.address.provinceID']").append("<option value='"+entry.id+"' selected>"+entry.cnname+"</option>")
}else{jQuery("select[name='userInfo.address.provinceID']").append("<option value='"+entry.id+"'>"+entry.cnname+"</option>")}});callback()})}function bandCity(provId,cityId,callback){jQuery("select[name='userInfo.address.cityID']").empty();jQuery("select[name='userInfo.address.cityID']").prepend("<option value='0'>请选择市/区</option>");jQuery.get(url+"city&provId="+provId,function(data){jQuery.each(eval(data),function(entryIndex,entry){if(cityId==entry.id){jQuery("select[name='userInfo.address.cityID']").append("<option value='"+entry.id+"' selected>"+entry.cnname+"</option>")}else{jQuery("select[name='userInfo.address.cityID']").append("<option value='"+entry.id+"'>"+entry.cnname+"</option>")}});callback()})}function bandCounty(cityId,countyId,callback){jQuery("select[name='userInfo.address.countyID']").empty();
jQuery("select[name='userInfo.address.countyID']").prepend("<option value='0'>请选择区/县/街道</option>");jQuery.get(url+"county&cityId="+cityId,function(data){jQuery.each(eval(data),function(entryIndex,entry){if(countyId==entry.id){jQuery("select[name='userInfo.address.countyID']").append("<option value='"+entry.id+"' selected>"+entry.cnname+"</option>")}else{jQuery("select[name='userInfo.address.countyID']").append("<option value='"+entry.id+"'>"+entry.cnname+"</option>")}});callback()})}var alterEmail=true;var emailAttr=jQuery("#useremail").html();jQuery("#notValid").click(function(){sendEmail()});var date=new Date();var year=date.getFullYear();if(jQuery("select[name='birthYear']").attr("alt")!=""){var tempyearselect=jQuery("select[name='birthYear']").attr("alt");for(var i=0;i<80;i++){if((year-i)==tempyearselect){jQuery("select[name='birthYear']").append("<option value='"+(year-i)+"' selected>"+(year-i)+"</option>");
jQuery("select[name='birthYear']").attr("disabled","disabled")}else{jQuery("select[name='birthYear']").append("<option value='"+(year-i)+"'>"+(year-i)+"</option>")}}}else{jQuery("select[name='birthYear']").prepend("<option value='0' selected='selected'>选择年</option>");for(var i=0;i<80;i++){jQuery("select[name='birthYear']").append("<option value='"+(year-i)+"'>"+(year-i)+"</option>")}}if(jQuery("select[name='birthMonth']").attr("alt")!=""){var tempmonthselect=jQuery("select[name='birthMonth']").attr("alt");for(var i=1;i<=12;i++){if(i==tempmonthselect){jQuery("select[name='birthMonth']").append("<option value='"+i+"' selected>"+i+"</option>");jQuery("select[name='birthMonth']").attr("disabled","disabled")}else{jQuery("select[name='birthMonth']").append("<option value='"+i+"'>"+i+"</option>")}}}else{jQuery("select[name='birthMonth']").prepend("<option value='0' selected='selected'>选择月</option>");
for(var i=1;i<=12;i++){jQuery("select[name='birthMonth']").append("<option value='"+i+"'>"+i+"</option>")}}var day=31;if(jQuery("select[name='birthYear']").attr("alt")!==""&&jQuery("select[name='birthMonth']").attr("alt")!=""){day=dateInMonth(jQuery("select[name='birthYear']").attr("alt"),jQuery("select[name='birthMonth']").attr("alt"))}if(jQuery("select[name='birthDate']").attr("alt")!=""){var tempdateselect=jQuery("select[name='birthDate']").attr("alt");for(var i=1;i<=day;i++){if(i==tempdateselect){jQuery("select[name='birthDate']").append("<option value='"+i+"' selected='selected'>"+i+"</option>");jQuery("select[name='birthDate']").attr("disabled","disabled")}else{jQuery("select[name='birthDate']").append("<option value='"+i+"'>"+i+"</option>")}}}else{jQuery("select[name='birthDate']").prepend("<option value='0' selected='selected'>选择日</option>");
for(var i=1;i<=day;i++){jQuery("select[name='birthDate']").append("<option value='"+i+"'>"+i+"</option>")}}jQuery("select[name='birthYear']").click(function(){if(jQuery("select[name='birthYear']").val()!="0"){jQuery("select[name='birthYear'] option[value='"+jQuery("select[name='birthYear']").val()+"']").attr("select",true)}else{jQuery("select[name='birthYear']").val(year-20)}jQuery("select[name='birthYear'] option[value='0']").remove()});jQuery("select[name='birthYear']").change(function(){});jQuery("select[name='birthMonth']").change(function(){bindDay()});function bindDay(){var tempday=jQuery("select[name='birthDate']").val();jQuery("select[name='birthDate']").empty();day=dateInMonth(jQuery("select[name='birthYear']").val(),jQuery("select[name='birthMonth']").val());if(tempday>day){tempday=day
}for(var i=1;i<=day;i++){if(i==tempday){jQuery("select[name='birthDate']").append("<option value='"+i+"' selected>"+i+"</option>")}else{jQuery("select[name='birthDate']").append("<option value='"+i+"'>"+i+"</option>")}}}function dateInMonth(year,month){if(month==4||month==6||month==9||month==11){return 30}else{if(month==1||month==3||month==5||month==7||month==8||month==10||month==12){return 31}else{if(year%4==0&&year%100!=0){return 29}else{return 28}}}}jQuery("#editp button").click(function(){jQuery.get("/member/userinfo/alterImage.do?userInfo.userPic="+encodeURIComponent(jQuery("#userface").attr("src")),function(){jQuery("#editp").css("display","none")});return false});var face=new Array(6);face[0]=URLPrefix.statics+"/member/images/peopleicon_01.gif";face[1]=URLPrefix.statics+"/member/images/peopleicon_02.gif";
face[2]=URLPrefix.statics+"/member/images/peopleicon_03.gif";face[3]=URLPrefix.statics+"/member/images/peopleicon_04.gif";face[4]=URLPrefix.statics+"/member/images/peopleicon_05.gif";face[5]=URLPrefix.statics+"/member/images/peopleicon_06.gif";jQuery("#editp a img").each(function(e){jQuery(this).attr("src",face[e]);jQuery(this).click(function(){jQuery("#userface").attr("src",jQuery(this).attr("src"));jQuery(":hidden[name='userInfo.userPic']").val(jQuery(this).attr("src"))})});var infoIntegrity=calcInfoIntegrity();jQuery("#infoIntegrity").css("width",infoIntegrity+"%");if(infoIntegrity>=60){jQuery("#integrityCss").addClass("yellow")}else{if(infoIntegrity==100){jQuery("#integrityCss").addClass("green")}}jQuery(":text[name='userInfo.profileInfo.schoolTagDate']").bind("copy paste",function(e){e.preventDefault();
jQuery("#err_popwin").html("禁止毕业时间文本框内容的复制和粘贴！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})})});var sendEmail=function(){var a="/activate/sendEmail.do?callback=?";jQuery.getJSON(a,function(b){if(b.code==0){jQuery("#err_popwin").html("验证邮件已经发送至您的邮箱，请登录邮箱进行验证！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})}else{jQuery("#err_popwin").html("验证邮件发送失败，请重试！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})}})};var MY_YHD=new function(){this.alert=function(a){if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.match(/6./i)=="6."){jQuery("select").css("display","none");YHD.alert(a,function(){jQuery("select").css("display","")})}else{YHD.alert(a)}}};function filterScripts(a){var b="";b=decodeURIComponent(a);b=b.replace(/<script(.|\n)*\/script>\s*/ig,"").replace(/<javascript(.|\n)*\/javascript>\s*/ig,"").replace(/<[^>]+/ig,function(c){return c.replace(/\s*on\w+=[^ ]+/ig,"")
});return b}function tab1ContentSubmit(a){if(!check1UserInputParameters()){return}jQuery("#updateBaseinfoSubmit").submit()}function tab2ContentSubmit(a){if(!check2UserInputParameters()){return}jQuery("#updateProfileInfoSubmit").submit()}function tab3ContentSubmit(a){if(!check3UserInputParameters()){return}jQuery("#updateProfileHobbySubmit").submit()}function check1UserInputParameters(){var f=jQuery(":text[name='userInfo.userRealName']").val();if(f!=""){if(f.length>40){jQuery("#err_popwin").html("请填写昵称，不超过40个字。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(f!=filterScripts(f)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var o=jQuery(":text[name='userInfo.userRealRealName']").val();
if(o==""){jQuery("#err_popwin").html("请输入您的真实姓名");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(o!=""){if(o.length>40){jQuery("#err_popwin").html("请填写姓名，不超过40个字。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(o!=filterScripts(o)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var n=jQuery(":radio[name='userInfo.userSex']");var c=false;for(var j=0;j<n.length;j++){if(n[j].checked){c=true;break}}if(!c){jQuery("#err_popwin").html("请选择您是先生还是女士");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(jQuery(":radio[name='userInfo.userSex']").val()!=1&&jQuery(":radio[name='userInfo.userSex']").val()!=0){jQuery("#err_popwin").html("请选择您是先生还是女士");
yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var e=jQuery("select[name='birthYear']").find("option").attr("value");var g=jQuery("select[name='birthDate']").find("option").attr("value");if(e==0||g==0){jQuery("#err_popwin").html("请选择生日的年、月、日");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var k=jQuery.trim(jQuery(":text[name='userInfo.userPhone']").val());var a=jQuery.trim(jQuery(":text[name='userInfo.userMobile']").val());if(k==""&&a==""){jQuery("#err_popwin").html("手机和电话不能同时为空");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});jQuery("#mobile").focus();return false}else{if(a!=""){var d=/^\d{11}$/g;if(!a.match(d)){jQuery("#err_popwin").html("请填写正确手机号码。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});jQuery("[name='giftCardOrderInvoiceVo.mobilePhone']").focus();
return false}}if(a!=filterScripts(a)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(k!=""){var d=/^((\d{3,4})-)?(\d{7,8})(-(\d{1,6}))?$/;if(!k.match(d)){jQuery("#err_popwin").html("请填写正确电话号码。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});jQuery("[name='giftCardOrderInvoiceVo.telephone']").focus();return false}}if(k!=filterScripts(k)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var b=jQuery(":text[name='userInfo.address.address1']").val();if(b!=""){if(b.length>66||b.length<3){jQuery("#err_popwin").html("请填写正确详细地址。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(b!=filterScripts(b)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");
yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var q=jQuery(":radio[name='userInfo.profileInfo.userDegree']");var h=false;for(var j=0;j<q.length;j++){if(q[j].checked){h=true;break}}if(!h){jQuery("#err_popwin").html("请选择您的身份");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var l=jQuery(":radio[name='userInfo.profileInfo.marriage']");var r=false;for(var j=0;j<l.length;j++){if(l[j].checked){r=true;break}}if(!r){jQuery("#err_popwin").html("请选择您的婚姻状况");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(jQuery("select[name='userInfo.profileInfo.incomeDesc']").val()==0){jQuery("#err_popwin").html("请选择您的个人收入状况");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var m=jQuery(":radio[name='userInfo.profileInfo.car']");
var p=false;for(var j=0;j<m.length;j++){if(m[j].checked){p=true;break}}if(!p){jQuery("#err_popwin").html("请选择您是否有车");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}return true}function check2UserInputParameters(){var j=jQuery(":text[name='userInfo.profileInfo.companyName']").val();if(j!=""){if(j.length>50){jQuery("#err_popwin").html("请填写公司名，不超过50个字。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(j!=filterScripts(j)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var g=jQuery(":radio[name='userInfo.profileInfo.industry']");var a=false;for(var c=0;c<g.length;c++){if(g[c].checked){a=true;break}}if(!a){jQuery("#err_popwin").html("请选择您的行业");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});
return false}var d=jQuery(":text[name='userInfo.profileInfo.position']").val();if(d!=""){if(d.length>50){jQuery("#err_popwin").html("请填写职位名，不超过50个字。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(d!=filterScripts(d)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var f=jQuery("select[name='userInfo.profileInfo.workSeniority']");if(f.val()==0){jQuery("#err_popwin").html("请选择您的工作年限");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var e=false;var b=jQuery(":radio[name='userInfo.profileInfo.degree']");for(var c=0;c<b.length;c++){if(b[c].checked){e=true;break}}if(!e){jQuery("#err_popwin").html("请选择您的教育程度");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});
return false}var h=jQuery(":text[name='userInfo.profileInfo.schoolTag']").val();if(h!=""){if(h.length>50){jQuery("#err_popwin").html("请填写学校名，不超过50个字。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(h!=filterScripts(h)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}return true}function check3UserInputParameters(){var j=jQuery(":checkbox[name='shopingHabits']");var f=false;for(var e=0;e<j.length;e++){if(j[e].checked){f=true;break}}if(!f){jQuery("#err_popwin").html("请选择您的购物喜好");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var d=jQuery(":checkbox[name='buyTypes']");var c=false;for(var e=0;e<d.length;e++){if(d[e].checked){c=true;break}}if(!c){jQuery("#err_popwin").html("请选择您的购物类型");
yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}var a=jQuery("textarea[name='userInfo.profileInfo.favoriteBrand']").val();if(a!=""){if(a.length>133){jQuery("#err_popwin").html("输入过长。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(a!=filterScripts(a)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var g=jQuery("textarea[name='userInfo.profileInfo.favoriteStar']").val();if(g!=""){if(g.length>66){jQuery("#err_popwin").html("输入过长。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(g!=filterScripts(g)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var b=jQuery("textarea[name='userInfo.profileInfo.favoriteMovie']").val();
if(b!=""){if(b.length>66){jQuery("#err_popwin").html("输入过长。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(b!=filterScripts(b)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}var h=jQuery("textarea[name='userInfo.profileInfo.favoritePersonage']").val();if(h!=""){if(h.length>66){jQuery("#err_popwin").html("输入过长。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}if(h!=filterScripts(h)){jQuery("#err_popwin").html("您填写的内容包含非法信息。");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return false}}return true}function calcInfoIntegrity(){var a=0;jQuery("form").find("li").each(function(){jQuery(this).find("input").each(function(){var d=jQuery(this).val();
var c=jQuery(this).attr("type")=="radio";var b=jQuery(this).attr("type")=="checkbox";if(b&&jQuery(this).attr("checked")){a=parseInt(a+1)}if(c&&jQuery(this).attr("checked")){a=parseInt(a+1)}if(d!=""&&d!=0&&!c&&!b){a=parseInt(a+1)}})});return parseFloat(a/33).toFixed(2)*100}jQuery(".ul_tab li").click(function(){jQuery(this).addClass("on").siblings().removeClass("on");var a=jQuery(".ul_tab li").index(this);jQuery(".tab_content").addClass("hide");jQuery(".tab_content").eq(a).removeClass("hide")});(function(j){var g=Math.abs,h=Math.max,k=Math.min,l=Math.round;function i(){return j("<div/>")}j.imgAreaSelect=function(br,e){var b=j(br),a,ax=i(),a1=i(),aV=i().add(i()).add(i()).add(i()),be=i().add(i()).add(i()).add(i()),aN=j([]),aw,bv,bt,bi={left:0,top:0},aJ,bz,bb,aL={left:0,top:0},a9=0,a5="absolute",aE,aG,ba,bd,aT,a7,ay,o,aS,c,aP,bf,bh,bl,bj,bm={x1:0,y1:0,x2:0,y2:0,width:0,height:0},bu=document.documentElement,bx,az,aM,aZ,a6,aK,bn;function aX(m){return m+bi.left-aL.left}function aY(m){return m+bi.top-aL.top}function a0(m){return m-bi.left+aL.left}function bc(m){return m-bi.top+aL.top}function aO(m){return m.pageX-aL.left}function aU(m){return m.pageY-aL.top}function a3(n){var p=n||ba,m=n||bd;return{x1:l(bm.x1*p),y1:l(bm.y1*m),x2:l(bm.x2*p),y2:l(bm.y2*m),width:l(bm.x2*p)-l(bm.x1*p),height:l(bm.y2*m)-l(bm.y1*m)}
}function a2(r,n,s,t,q){var m=q||ba,p=q||bd;bm={x1:l(r/m||0),y1:l(n/p||0),x2:l(s/m||0),y2:l(t/p||0)};bm.width=bm.x2-bm.x1;bm.height=bm.y2-bm.y1}function aI(){if(!b.width()){return}bi={left:l(b.offset().left),top:l(b.offset().top)};aJ=b.innerWidth();bz=b.innerHeight();bi.top+=(b.outerHeight()-bz)>>1;bi.left+=(b.outerWidth()-aJ)>>1;a7=l(e.minWidth/ba)||0;ay=l(e.minHeight/bd)||0;o=l(k(e.maxWidth/ba||1<<24,aJ));aS=l(k(e.maxHeight/bd||1<<24,bz));if(j().jquery=="1.3.2"&&a5=="fixed"&&!bu.getBoundingClientRect){bi.top+=h(document.body.scrollTop,bu.scrollTop);bi.left+=h(document.body.scrollLeft,bu.scrollLeft)}aL=/absolute|relative/.test(bb.css("position"))?{left:l(bb.offset().left)-bb.scrollLeft(),top:l(bb.offset().top)-bb.scrollTop()}:a5=="fixed"?{left:j(document).scrollLeft(),top:j(document).scrollTop()}:{left:0,top:0};
bv=aX(0);bt=aY(0);if(bm.x2>aJ||bm.y2>bz){d()}}function bg(m){if(!aP){return}ax.css({left:aX(bm.x1),top:aY(bm.y1)}).add(a1).width(a6=bm.width).height(aK=bm.height);a1.add(aV).add(aN).css({left:0,top:0});aV.width(h(a6-aV.outerWidth()+aV.innerWidth(),0)).height(h(aK-aV.outerHeight()+aV.innerHeight(),0));j(be[0]).css({left:bv,top:bt,width:bm.x1,height:bz});j(be[1]).css({left:bv+bm.x1,top:bt,width:a6,height:bm.y1});j(be[2]).css({left:bv+bm.x2,top:bt,width:aJ-bm.x2,height:bz});j(be[3]).css({left:bv+bm.x1,top:bt+bm.y2,width:a6,height:bz-bm.y2});a6-=aN.outerWidth();aK-=aN.outerHeight();switch(aN.length){case 8:j(aN[4]).css({left:a6>>1});j(aN[5]).css({left:a6,top:aK>>1});j(aN[6]).css({left:a6>>1,top:aK});j(aN[7]).css({top:aK>>1});case 4:aN.slice(1,3).css({left:a6});aN.slice(2,4).css({top:aK})}if(m!==false){if(j.imgAreaSelect.keyPress!=w){j(document).unbind(j.imgAreaSelect.keyPress,j.imgAreaSelect.onKeyPress)
}if(e.keys){j(document)[j.imgAreaSelect.keyPress](j.imgAreaSelect.onKeyPress=w)}}if(j.browser.msie&&aV.outerWidth()-aV.innerWidth()==2){aV.css("margin",0);setTimeout(function(){aV.css("margin","auto")},0)}}function bp(m){aI();bg(m);bf=aX(bm.x1);bh=aY(bm.y1);bl=aX(bm.x2);bj=aY(bm.y2)}function aW(n,m){e.fadeSpeed?n.fadeOut(e.fadeSpeed,m):n.hide()}function a4(m){var n=a0(aO(m))-bm.x1,p=bc(aU(m))-bm.y1;if(!bn){aI();bn=true;ax.one("mouseout",function(){bn=false})}aT="";if(e.resizable){if(p<=e.resizeMargin){aT="n"}else{if(p>=bm.height-e.resizeMargin){aT="s"}}if(n<=e.resizeMargin){aT+="w"}else{if(n>=bm.width-e.resizeMargin){aT+="e"}}}ax.css("cursor",aT?aT+"-resize":e.movable?"move":"");if(aw){aw.toggle()}}function aR(m){j("body").css("cursor","");if(e.autoHide||bm.width*bm.height==0){aW(ax.add(be),function(){j(this).hide()
})}j(document).unbind("mousemove",a8);ax.mousemove(a4);e.onSelectEnd(br,a3())}function bq(m){if(m.which!=1){return false}aI();if(aT){j("body").css("cursor",aT+"-resize");bf=aX(bm[/w/.test(aT)?"x2":"x1"]);bh=aY(bm[/n/.test(aT)?"y2":"y1"]);j(document).mousemove(a8).one("mouseup",aR);ax.unbind("mousemove",a4)}else{if(e.movable){aE=bv+bm.x1-aO(m);aG=bt+bm.y1-aU(m);ax.unbind("mousemove",a4);j(document).mousemove(bA).one("mouseup",function(){e.onSelectEnd(br,a3());j(document).unbind("mousemove",bA);ax.mousemove(a4)})}else{b.mousedown(m)}}return false}function bs(m){if(c){if(m){bl=h(bv,k(bv+aJ,bf+g(bj-bh)*c*(bl>bf||-1)));bj=l(h(bt,k(bt+bz,bh+g(bl-bf)/c*(bj>bh||-1))));bl=l(bl)}else{bj=h(bt,k(bt+bz,bh+g(bl-bf)/c*(bj>bh||-1)));bl=l(h(bv,k(bv+aJ,bf+g(bj-bh)*c*(bl>bf||-1))));bj=l(bj)}}}function d(){bf=k(bf,bv+aJ);
bh=k(bh,bt+bz);if(g(bl-bf)<a7){bl=bf-a7*(bl<bf||-1);if(bl<bv){bf=bv+a7}else{if(bl>bv+aJ){bf=bv+aJ-a7}}}if(g(bj-bh)<ay){bj=bh-ay*(bj<bh||-1);if(bj<bt){bh=bt+ay}else{if(bj>bt+bz){bh=bt+bz-ay}}}bl=h(bv,k(bl,bv+aJ));bj=h(bt,k(bj,bt+bz));bs(g(bl-bf)<g(bj-bh)*c);if(g(bl-bf)>o){bl=bf-o*(bl<bf||-1);bs()}if(g(bj-bh)>aS){bj=bh-aS*(bj<bh||-1);bs(true)}bm={x1:a0(k(bf,bl)),x2:a0(h(bf,bl)),y1:bc(k(bh,bj)),y2:bc(h(bh,bj)),width:g(bl-bf),height:g(bj-bh)};bg();e.onSelectChange(br,a3())}function a8(m){bl=/w|e|^$/.test(aT)||c?aO(m):aX(bm.x2);bj=/n|s|^$/.test(aT)||c?aU(m):aY(bm.y2);d();return false}function aH(n,m){bl=(bf=n)+bm.width;bj=(bh=m)+bm.height;j.extend(bm,{x1:a0(bf),y1:bc(bh),x2:a0(bl),y2:bc(bj)});bg();e.onSelectChange(br,a3())}function bA(m){bf=h(bv,k(aE+aO(m),bv+aJ-bm.width));bh=h(bt,k(aG+aU(m),bt+bz-bm.height));
aH(bf,bh);m.preventDefault();return false}function bk(){j(document).unbind("mousemove",bk);aI();bl=bf;bj=bh;d();aT="";if(!be.is(":visible")){ax.add(be).hide().fadeIn(e.fadeSpeed||0)}aP=true;j(document).unbind("mouseup",aF).mousemove(a8).one("mouseup",aR);ax.unbind("mousemove",a4);e.onSelectStart(br,a3())}function aF(){j(document).unbind("mousemove",bk).unbind("mouseup",aF);aW(ax.add(be));a2(a0(bf),bc(bh),a0(bf),bc(bh));if(!this instanceof j.imgAreaSelect){e.onSelectChange(br,a3());e.onSelectEnd(br,a3())}}function bw(m){if(m.which!=1||be.is(":animated")){return false}aI();aE=bf=aO(m);aG=bh=aU(m);j(document).mousemove(bk).mouseup(aF);return false}function bo(){bp(false)}function f(){a=true;aQ(e=j.extend({classPrefix:"imgareaselect",movable:true,parent:"body",resizable:true,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},e));
ax.add(be).css({visibility:""});if(e.show){aP=true;aI();bg();ax.add(be).hide().fadeIn(e.fadeSpeed||0)}setTimeout(function(){e.onInit(br,a3())},0)}var w=function(m){var q=e.keys,n,r,p=m.keyCode;n=!isNaN(q.alt)&&(m.altKey||m.originalEvent.altKey)?q.alt:!isNaN(q.ctrl)&&m.ctrlKey?q.ctrl:!isNaN(q.shift)&&m.shiftKey?q.shift:!isNaN(q.arrows)?q.arrows:10;if(q.arrows=="resize"||(q.shift=="resize"&&m.shiftKey)||(q.ctrl=="resize"&&m.ctrlKey)||(q.alt=="resize"&&(m.altKey||m.originalEvent.altKey))){switch(p){case 37:n=-n;case 39:r=h(bf,bl);bf=k(bf,bl);bl=h(r+n,bf);bs();break;case 38:n=-n;case 40:r=h(bh,bj);bh=k(bh,bj);bj=h(r+n,bh);bs(true);break;default:return}d()}else{bf=k(bf,bl);bh=k(bh,bj);switch(p){case 37:aH(h(bf-n,bv),bh);break;case 38:aH(bf,h(bh-n,bt));break;case 39:aH(bf+k(n,aJ-a0(bl)),bh);break;
case 40:aH(bf,bh+k(n,bz-bc(bj)));break;default:return}}return false};function by(n,m){for(option in m){if(e[option]!==undefined){n.css(m[option],e[option])}}}function aQ(m){if(m.parent){(bb=j(m.parent)).append(ax.add(be))}j.extend(e,m);aI();if(m.handles!=null){aN.remove();aN=j([]);aM=m.handles?m.handles=="corners"?4:8:0;while(aM--){aN=aN.add(i())}aN.addClass(e.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:a9+1||1});if(!parseInt(aN.css("width"))>=0){aN.width(5).height(5)}if(aZ=e.borderWidth){aN.css({borderWidth:aZ,borderStyle:"solid"})}by(aN,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}ba=e.imageWidth/aJ||1;bd=e.imageHeight/bz||1;if(m.x1!=null){a2(m.x1,m.y1,m.x2,m.y2);m.show=!m.hide}if(m.keys){e.keys=j.extend({shift:1,ctrl:"resize"},m.keys)
}ax.addClass(e.classPrefix+"-imgdiv");be.addClass(e.classPrefix+"-outer");a1.addClass(e.classPrefix+"-selection");for(aM=0;aM++<4;){j(aV[aM-1]).addClass(e.classPrefix+"-border"+aM)}by(a1,{selectionColor:"background-color",selectionOpacity:"opacity"});by(aV,{borderOpacity:"opacity",borderWidth:"border-width"});by(be,{outerColor:"background-color",outerOpacity:"opacity"});if(aZ=e.borderColor1){j(aV[0]).css({borderStyle:"solid",borderColor:aZ})}if(aZ=e.borderColor2){j(aV[1]).css({borderStyle:"dashed",borderColor:aZ})}ax.append(a1.add(aV).add(aw).add(aN));if(j.browser.msie){if(aZ=be.css("filter").match(/opacity=(\d+)/)){be.css("opacity",aZ[1]/100)}if(aZ=aV.css("filter").match(/opacity=(\d+)/)){aV.css("opacity",aZ[1]/100)}}if(m.hide){aW(ax.add(be))}else{if(m.show&&a){aP=true;ax.add(be).fadeIn(e.fadeSpeed||0);
bp()}}c=(az=(e.aspectRatio||"").split(/:/))[0]/az[1];b.add(be).unbind("mousedown",bw);if(e.disable||e.enable===false){ax.unbind("mousemove",a4).unbind("mousedown",bq);j(window).unbind("resize",bo)}else{if(e.enable||e.disable===false){if(e.resizable||e.movable){ax.mousemove(a4).mousedown(bq)}j(window).resize(bo)}if(!e.persistent){b.add(be).mousedown(bw)}}e.enable=e.disable=undefined}this.remove=function(){aQ({disable:true});ax.add(be).remove()};this.getOptions=function(){return e};this.setOptions=aQ;this.getSelection=a3;this.setSelection=a2;this.cancelSelection=aF;this.update=bp;bx=b;while(bx.length){a9=h(a9,!isNaN(bx.css("z-index"))?bx.css("z-index"):a9);if(bx.css("position")=="fixed"){a5="fixed"}bx=bx.parent(":not(body)")}a9=e.zIndex||a9;if(j.browser.msie){b.attr("unselectable","on")}j.imgAreaSelect.keyPress=j.browser.msie||j.browser.safari?"keydown":"keypress";
if(j.browser.opera){aw=i().css({width:"100%",height:"100%",position:"absolute",zIndex:a9+2||2})}ax.add(be).css({visibility:"hidden",position:a5,overflow:"hidden",zIndex:a9||"0"});ax.css({zIndex:a9+2||2});a1.add(aV).css({position:"absolute",fontSize:0});br.complete||br.readyState=="complete"||!b.is("img")?f():b.one("load",f);if(j.browser.msie&&j.browser.version>=7){br.src=br.src}};j.fn.imgAreaSelect=function(a){a=a||{};this.each(function(){if(j(this).data("imgAreaSelect")){if(a.remove){j(this).data("imgAreaSelect").remove();j(this).removeData("imgAreaSelect")}else{j(this).data("imgAreaSelect").setOptions(a)}}else{if(!a.remove){if(a.enable===undefined&&a.disable===undefined){a.enable=true}j(this).data("imgAreaSelect",new j.imgAreaSelect(this,a))}}});if(a.instance){return j(this).data("imgAreaSelect")
}return this}})(jQuery);function FileProgress(l,h){this.fileProgressID=l.id;this.opacity=100;this.height=0;this.fileProgressWrapper=document.getElementById(this.fileProgressID);if(!this.fileProgressWrapper){this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var i=document.createElement("a");i.className="progressCancel";i.href="#";i.style.visibility="hidden";i.appendChild(document.createTextNode(" "));var g=document.createElement("div");g.className="progressName";g.appendChild(document.createTextNode(l.name));var j=document.createElement("div");j.className="progressBarInProgress";var k=document.createElement("div");
k.className="progressBarStatus";k.innerHTML="&nbsp;";this.fileProgressElement.appendChild(i);this.fileProgressElement.appendChild(g);this.fileProgressElement.appendChild(k);this.fileProgressElement.appendChild(j);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(h).appendChild(this.fileProgressWrapper)}else{this.fileProgressElement=this.fileProgressWrapper.firstChild;this.reset()}this.height=this.fileProgressWrapper.offsetHeight;this.setTimer(null)}FileProgress.prototype.setTimer=function(b){this.fileProgressElement.FP_TIMER=b};FileProgress.prototype.getTimer=function(b){return this.fileProgressElement.FP_TIMER||null};FileProgress.prototype.reset=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[2].innerHTML="&nbsp;";
this.fileProgressElement.childNodes[2].className="progressBarStatus";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width="0%";this.appear()};FileProgress.prototype.setProgress=function(b){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=b+"%";this.appear()};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},10000))};FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";
this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},5000))};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},2000))};FileProgress.prototype.setStatus=function(b){this.fileProgressElement.childNodes[2].innerHTML=b};FileProgress.prototype.toggleCancel=function(d,f){this.fileProgressElement.childNodes[0].style.visibility=d?"visible":"hidden";if(f){var e=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){f.cancelUpload(e);
return false}}};FileProgress.prototype.appear=function(){if(this.getTimer()!==null){clearTimeout(this.getTimer());this.setTimer(null)}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(b){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"}}else{this.fileProgressWrapper.style.opacity=1}this.fileProgressWrapper.style.height="";this.height=this.fileProgressWrapper.offsetHeight;this.opacity=100;this.fileProgressWrapper.style.display=""};FileProgress.prototype.disappear=function(){var h=15;var j=4;var e=30;if(this.opacity>0){this.opacity-=h;if(this.opacity<0){this.opacity=0}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity
}catch(i){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}}else{this.fileProgressWrapper.style.opacity=this.opacity/100}}if(this.height>0){this.height-=j;if(this.height<0){this.height=0}this.fileProgressWrapper.style.height=this.height+"px"}if(this.height>0||this.opacity>0){var g=this;this.setTimer(setTimeout(function(){g.disappear()},e))}else{this.fileProgressWrapper.style.display="none";this.setTimer(null)}};function cancelQueue(d){document.getElementById(d.customSettings.cancelButtonId).disabled=true;d.stopUpload();var c;do{c=d.getStats();d.cancelUpload()}while(c.files_queued!==0)}function preLoad(){if(!this.support.loading){alert("You need the Flash Player 9.028 or above to use SWFUpload.");return false}}function loadFailed(){alert("Something went wrong while loading SWFUpload. If this were a real application we'd clean up and then give you an alternative")}function fileDialogStart(){}function mouseClick(){DialogLogin.execute(function(){upload2.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)})}function fileQueued(f){try{var e=new FileProgress(f,this.customSettings.progressTarget);e.setStatus("Pending...");e.toggleCancel(true,this)}catch(d){this.debug(d)}}function fileQueueError(j,h,i){try{if(h==SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT){alert(j.name+"文件过大,最多不能超过5MB！");
return}if(h==SWFUpload.QUEUE_ERROR.INVALID_FILETYPE){alert("只能上传jpg,png,jpeg格式的文件");return}var g=new FileProgress(j,this.customSettings.progressTarget);g.setError();g.toggleCancel(false);switch(h){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:g.setStatus("File is too big.");this.debug("Error Code: File too big, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:g.setStatus("Cannot upload Zero Byte files.");this.debug("Error Code: Zero byte file, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:g.setStatus("Invalid File Type.");this.debug("Error Code: Invalid File Type, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:alert("You have selected too many files.  "+(i>1?"You may only add "+i+" more files":"You cannot add any more files."));
break;default:if(j!==null){g.setStatus("Unhandled Error")}this.debug("Error Code: "+h+", File name: "+j.name+", File size: "+j.size+", Message: "+i);break}}catch(f){this.debug(f)}}function fileDialogComplete(e,f){try{if(this.getStats().files_queued>0){document.getElementById(this.customSettings.cancelButtonId).disabled=false}jQuery("#image_count_to_upload").text(this.getStats().files_queued+"张图片准备上传");jQuery(".image_preview").fadeIn();jQuery(".success_uploading").attr({disabled:false});this.startUpload()}catch(d){this.debug(d)}}function uploadStart(f){try{var e=new FileProgress(f,this.customSettings.progressTarget);e.setStatus("Uploading...");e.toggleCancel(true,this)}catch(d){}return true}function uploadProgress(l,i,j){try{var k=Math.ceil((i/j)*100);var h=new FileProgress(l,this.customSettings.progressTarget);
h.setProgress(k);h.setStatus("Uploading...")}catch(g){this.debug(g)}}function uploadSuccess(g,e){try{var f=new FileProgress(g,this.customSettings.progressTarget);f.setComplete();f.setStatus("Complete.");f.toggleCancel(false)}catch(h){this.debug(h)}}function uploadComplete(c){try{if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}else{this.startUpload()}}catch(d){this.debug(d)}}function uploadError(j,h,i){try{var g=new FileProgress(j,this.customSettings.progressTarget);g.setError();g.toggleCancel(false);switch(h){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:g.setStatus("Upload Error: "+i);this.debug("Error Code: HTTP Error, File name: "+j.name+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:g.setStatus("Configuration Error");
this.debug("Error Code: No backend file, File name: "+j.name+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:g.setStatus("Upload Failed.");this.debug("Error Code: Upload Failed, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:g.setStatus("Server (IO) Error");this.debug("Error Code: IO Error, File name: "+j.name+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:g.setStatus("Security Error");this.debug("Error Code: Security Error, File name: "+j.name+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:g.setStatus("Upload limit exceeded.");this.debug("Error Code: Upload Limit Exceeded, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:g.setStatus("File not found.");
this.debug("Error Code: The file was not found, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:g.setStatus("Failed Validation.  Upload skipped.");this.debug("Error Code: File Validation Failed, File name: "+j.name+", File size: "+j.size+", Message: "+i);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}g.setStatus("Cancelled");g.setCancelled();break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:g.setStatus("Stopped");break;default:g.setStatus("Unhandled Error: "+error_code);this.debug("Error Code: "+h+", File name: "+j.name+", File size: "+j.size+", Message: "+i);break}}catch(f){this.debug(f)}};var SWFUpload;if(typeof(SWFUpload)==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=(function(b){return function(a){if(typeof(b)==="function"){b.call(this,a)}this.queueSettings={};this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler;this.settings.queue_complete_handler=a.queue_complete_handler||null}})(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(b){this.queueSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",[b])
};SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=true;this.stopUpload();var b=this.getStats();while(b.files_queued>0){this.cancelUpload();b=this.getStats()}};SWFUpload.queue.uploadStartHandler=function(d){var c;if(typeof(this.queueSettings.user_upload_start_handler)==="function"){c=this.queueSettings.user_upload_start_handler.call(this,d)}c=(c===false)?false:true;this.queueSettings.queue_cancelled_flag=!c;return c};SWFUpload.queue.uploadCompleteHandler=function(e){var h=this.queueSettings.user_upload_complete_handler;var g;if(e.filestatus===SWFUpload.FILE_STATUS.COMPLETE){this.queueSettings.queue_upload_count++}if(typeof(h)==="function"){g=(h.call(this,e)===false)?false:true}else{if(e.filestatus===SWFUpload.FILE_STATUS.QUEUED){g=false}else{g=true}}if(g){var f=this.getStats();
if(f.files_queued>0&&this.queueSettings.queue_cancelled_flag===false){this.startUpload()}else{if(this.queueSettings.queue_cancelled_flag===false){this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]);this.queueSettings.queue_upload_count=0}else{this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0}}}}};var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(b){this.initSWFUpload(b)}}SWFUpload.prototype.initSWFUpload=function(c){try{this.customSettings={};this.settings=c;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};
SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){return b};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(c,d){this.settings[c]=(this.settings[c]==undefined)?d:this.settings[c]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);
this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");
this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);
this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var d,c;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}d=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;
if(d==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}c=document.createElement("div");c.innerHTML=this.getFlashHTML();d.parentNode.replaceChild(c.firstChild,d);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")
};SWFUpload.prototype.getFlashVars=function(){var c=this.buildParamString();var d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(c),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")
};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var d=this.settings.post_params;var e=[];if(typeof(d)==="object"){for(var f in d){if(d.hasOwnProperty(f)){e.push(encodeURIComponent(f.toString())+"="+encodeURIComponent(d[f].toString()))}}}return e.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var f=null;f=this.getMovieElement();if(f&&typeof(f.CallFunction)==="unknown"){for(var i in f){try{if(typeof(f[i])==="function"){f[i]=null}}catch(g){}}try{f.parentNode.removeChild(f)}catch(j){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;
delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(h){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))
};SWFUpload.prototype.addSetting=function(e,d,f){if(d==undefined){return(this.settings[e]=f)}else{return(this.settings[e]=d)}};SWFUpload.prototype.getSetting=function(b){if(this.settings[b]!=undefined){return this.settings[b]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")
};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(b){this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelUpload=function(d,c){if(c!==false){c=true}this.callFlash("CancelUpload",[d,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(b){this.callFlash("SetStats",[b])};SWFUpload.prototype.getFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.addFileParam=function(f,e,d){return this.callFlash("AddFileParam",[f,e,d])};SWFUpload.prototype.removeFileParam=function(d,c){this.callFlash("RemoveFileParam",[d,c])
};SWFUpload.prototype.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};SWFUpload.prototype.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};SWFUpload.prototype.addPostParam=function(d,c){this.settings.post_params[d]=c;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(d,c){this.settings.file_types=d;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[d,c])};SWFUpload.prototype.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};SWFUpload.prototype.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;
this.callFlash("SetFileUploadLimit",[b])};SWFUpload.prototype.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};SWFUpload.prototype.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};SWFUpload.prototype.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};SWFUpload.prototype.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};SWFUpload.prototype.setHTTPSuccess=function(b){if(typeof b==="string"){b=b.replace(" ","").split(",")}this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};SWFUpload.prototype.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])
};SWFUpload.prototype.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};SWFUpload.prototype.setButtonImageURL=function(b){if(b==undefined){b=""}this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};SWFUpload.prototype.setButtonDimensions=function(d,f){this.settings.button_width=d;this.settings.button_height=f;var e=this.getMovieElement();if(e!=undefined){e.style.width=d+"px";e.style.height=f+"px"}this.callFlash("SetButtonDimensions",[d,f])};SWFUpload.prototype.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};SWFUpload.prototype.setButtonTextPadding=function(c,d){this.settings.button_text_top_padding=d;this.settings.button_text_left_padding=c;this.callFlash("SetButtonTextPadding",[c,d])
};SWFUpload.prototype.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};SWFUpload.prototype.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};SWFUpload.prototype.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};SWFUpload.prototype.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};SWFUpload.prototype.queueEvent=function(e,d){if(d==undefined){d=[]}else{if(!(d instanceof Array)){d=[d]}}var f=this;if(typeof this.settings[e]==="function"){this.eventQueue.push(function(){this.settings[e].apply(this,d)});setTimeout(function(){f.executeNextEvent()},0)}else{if(this.settings[e]!==null){throw"Event handler "+e+" is unknown or is not a function"
}}};SWFUpload.prototype.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;if(typeof(b)==="function"){b.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(j){var h=/[$]([0-9a-f]{4})/i;var g={};var i;if(j!=undefined){for(var l in j.post){if(j.post.hasOwnProperty(l)){i=l;var k;while((k=h.exec(i))!==null){i=i.replace(k[0],String.fromCharCode(parseInt("0x"+k[1],16)))}g[i]=j.post[l]}}j.post=g}return j};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};SWFUpload.prototype.flashReady=function(){var b=this.getMovieElement();if(!b){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(f){try{if(this.movieElement&&typeof(f.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");
for(var h in f){try{if(typeof(f[h])==="function"){f[h]=null}}catch(e){}}}}catch(g){}window.__flash__removeCallback=function(b,a){try{if(b){b[a]=null}}catch(c){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};SWFUpload.prototype.fileQueueError=function(f,d,e){f=this.unescapeFilePostParams(f);this.queueEvent("file_queue_error_handler",[f,d,e])};SWFUpload.prototype.fileDialogComplete=function(e,d,f){this.queueEvent("file_dialog_complete_handler",[e,d,f])};SWFUpload.prototype.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};SWFUpload.prototype.returnUploadStart=function(d){var c;
if(typeof this.settings.upload_start_handler==="function"){d=this.unescapeFilePostParams(d);c=this.settings.upload_start_handler.call(this,d)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(c===undefined){c=true}c=!!c;this.callFlash("ReturnUploadStart",[c])};SWFUpload.prototype.uploadProgress=function(f,d,e){f=this.unescapeFilePostParams(f);this.queueEvent("upload_progress_handler",[f,d,e])};SWFUpload.prototype.uploadError=function(f,d,e){f=this.unescapeFilePostParams(f);this.queueEvent("upload_error_handler",[f,d,e])};SWFUpload.prototype.uploadSuccess=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("upload_success_handler",[e,f,d])};SWFUpload.prototype.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)
};SWFUpload.prototype.debug=function(b){this.queueEvent("debug_handler",b)};SWFUpload.prototype.debugMessage=function(h){if(this.settings.debug){var f,g=[];if(typeof h==="object"&&typeof h.name==="string"&&typeof h.message==="string"){for(var e in h){if(h.hasOwnProperty(e)){g.push(e+": "+h[e])}}f=g.join("\n")||"";g=f.split("\n");f="EXCEPTION: "+g.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(f)}else{SWFUpload.Console.writeLine(h)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(g){var e,f;try{e=document.getElementById("SWFUpload_Console");if(!e){f=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(f);e=document.createElement("textarea");e.id="SWFUpload_Console";e.style.fontFamily="monospace";e.setAttribute("wrap","off");e.wrap="off";e.style.overflow="auto";
e.style.width="700px";e.style.height="350px";e.style.margin="5px";f.appendChild(e)}e.value+=g+"\n";e.scrollTop=e.scrollHeight-e.clientHeight}catch(h){alert("Exception: "+h.name+" Message: "+h.message)}};var x1=0;var y1=0;var x2=0;var y2=0;var isUpload=false;var picType="1";var urlPrefixEditUserInfo=currSiteType==1?URLPrefix.my:URLPrefix.mymall;jQuery(document).ready(function(){var ut=jQuery.cookie("ut");var width=jQuery("#upload_pic img").attr("width");var height=jQuery("#upload_pic img").attr("height");var userId=jQuery("input[name='userId']").val();var user_pic_upload=new SWFUpload({upload_url:urlPrefixEditUserInfo+"/member/userinfo/uploadPic.do",flash_url:URLPrefix.statics+"/member/swf/swfupload.swf",post_params:{ut:ut,endUserId:userId,width:width,height:height},file_size_limit:"1024",file_upload_limit:"0",file_queue_limit:"0",file_types:"*.jpg;*.png;*.jpeg",file_types_description:"Image Files",file_queue_error_handler:function(file,errorCode,message){try{if(errorCode==SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT){YHD.alert("图片大小不能超过1MB，请重新上传");
return}if(errorCode==SWFUpload.QUEUE_ERROR.INVALID_FILETYPE){YHD.alert("图片仅支持JPG、JPEG、PNG格式，请重新上传");return}}catch(ex){this.debug(ex)}},file_dialog_complete_handler:function(numFilesSelected,numFilesQueued){try{user_pic_upload.startUpload()}catch(ex){this.debug(ex)}},upload_progress_handler:function(file,bytesLoaded,bytesTotal){jQuery("#fsUploadProgress").show()},upload_error_handler:uploadError,upload_success_handler:function(file,result){var data=eval("("+result+")");if(data.outnumber){YHD.alert("超过每天最大上传次数10次");return}else{if(data.fail==1){YHD.alert("头像上传失败，请检查网络或稍后再试!");return}else{isUpload=true;jQuery("#upload_pic img").attr("src",data.picUrl);jQuery("#size1 img").attr("src",data.picUrl);jQuery("#size2 img").attr("src",data.picUrl);jQuery("#size3 img").attr("src",data.picUrl);jQuery("#size4 img").attr("src",data.picUrl);
setTimeout(selectImg,20)}}},upload_complete_handler:function(file){jQuery("#fsUploadProgress").hide()},button_image_url:URLPrefix.statics+"/member/images/swf.jpg",button_placeholder_id:"userPicUpload",button_width:60,button_height:24,button_text:"<span class='btn-txt'>选择图片</span>",button_text_style:".btn-txt{color:#ffffff;margin-right: 10px;vertical-align: middle;font-weight:bold}",button_text_top_padding:3,button_text_left_padding:3,button_cursor:SWFUpload.CURSOR.HAND,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,flash_color:"#FFffff",custom_settings:{progressTarget:"fsUploadProgress"},debug:false})});function showUploadPopbox(){var e=document.body.clientWidth;var g=document.body.clientHeight;jQuery("<div id='maskDivDeatil'/>").width(e).height(g+document.body.scrollHeight/8).css("background","#000").css("position","absolute").css("top","0px").css("left","0px").css("opacity","0.1").css("filter","Alpha(Opacity=10)").css("z-index",8000).appendTo("body").fadeIn(200);
YHD.popwinId("popbox_editpic");jQuery("#popbox_editpic").css("z-index",9000).css("top",150).css("left",650).css("width",580).css("height",465);var f=jQuery(".user_pic img").attr("src").toString();var h=new Array(6);h[0]=URLPrefix.statics+"/member/images/peopleicon_01.gif";h[1]=URLPrefix.statics+"/member/images/peopleicon_02.gif";h[2]=URLPrefix.statics+"/member/images/peopleicon_03.gif";h[3]=URLPrefix.statics+"/member/images/peopleicon_04.gif";h[4]=URLPrefix.statics+"/member/images/peopleicon_05.gif";h[5]=URLPrefix.statics+"/member/images/peopleicon_06.gif";jQuery("#sys_pic_box .select_pic img").each(function(a){jQuery(this).attr("src",h[a]);if(h[a]===f){jQuery(this).click();jQuery("#sys_pic_box .preview").find("img").attr("src",h[a])}});jQuery("#upload_pic img").attr("src",f);jQuery("#size1 img").attr("src",f);
jQuery("#size2 img").attr("src",f);jQuery("#size3 img").attr("src",f);jQuery("#size4 img").attr("src",f);jQuery("#user_pic_box").show();jQuery("#sys_pic_box").hide();jQuery(".select_way").find("a").removeClass("cur_edit");jQuery("#user_pic_sel").addClass("cur_edit");selectImg();return false}function cancelUpload(){jQuery("#maskDivDeatil").remove();jQuery("#popbox_editpic").hide();jQuery(".imgareaselect-imgdiv").hide();jQuery(".imgareaselect-outer").hide();if($.browser.msie&&$.browser.version<=6){jQuery(".ifm").hide()}if(isUpload){var c="picUrl="+jQuery("#upload_pic img").attr("src").toString();var d=urlPrefixEditUserInfo+"/member/userinfo/cancelUpload.do";jQuery.ajax({type:"post",url:d,data:c,success:function(a){}})}return false}function closePromptPopbox(){jQuery(".popGeneral").remove();jQuery(".mask_tcdiv").remove();
return false}function saveUpload(){var k=jQuery(".select_way .cur_edit").attr("id");if(k=="user_pic_sel"){picType="1"}else{picType="2"}var l="";var o=jQuery("input[name='userId']").val();if(picType==="1"){l=jQuery("#upload_pic img").attr("src").toString()}else{if(picType==="2"){l=jQuery("#sys_pic_box").find(".size1").attr("src").toString()}}var m=jQuery.cookie("ut");var n=jQuery("#upload_pic img").attr("width");var j=jQuery("#upload_pic img").attr("height");var p="picUrl="+l+"&picType="+picType+"&ut="+m+"&endUserId="+o+"&x1="+x1+"&y1="+y1+"&x2="+x2+"&y2="+y2+"&width="+n+"&height="+j;var i=urlPrefixEditUserInfo+"/member/userinfo/saveUpload.do";jQuery.ajax({type:"post",url:i,data:p,success:function(a){if(a.badUrl){YHD.alert("请选择正确的头像图片！")}else{jQuery(".user_pic img").attr("src",a.picUrl);jQuery("#maskDivDeatil").remove();
jQuery("#popbox_editpic").hide();jQuery(".imgareaselect-imgdiv").hide();jQuery(".imgareaselect-outer").hide();if($.browser.msie&&$.browser.version<=6){jQuery(".ifm").hide()}if(picType==="1"){yhdLib.popwin({popcontent:".prompt",mask:1})}}}})}function changePicType(c){jQuery(".pic_editbox").hide();jQuery(".select_way").find("a").removeClass("cur_edit");jQuery(c).addClass("cur_edit");var d=jQuery(".select_way").find("a").index(c);jQuery(".pic_editbox").eq(d).show();if(d===1){picType="2";jQuery(".imgareaselect-imgdiv").css("display","none");jQuery(".imgareaselect-outer").css("display","none")}else{if(d===0){picType="1";jQuery(".imgareaselect-imgdiv").css("display","block");jQuery(".imgareaselect-outer").css("display","block")}}return false}function selectSysPic(c){jQuery("#sys_pic_box .select_pic").find("dd").removeClass("cur");
jQuery(c).parent("dd").addClass("cur");var d=jQuery(c).attr("src");jQuery("#sys_pic_box .preview ").find("img").attr("src",d);return false}function selectImg(){jQuery("#upload_pic").imgAreaSelect({x1:0,x2:150,y1:0,y2:150,aspectRatio:"1:1",handles:true,minHeight:30,minWidth:30,onSelectChange:previewImg})}function previewImg(q,n){var k=150/(n.width||1);var m=150/(n.height||1);jQuery("#size1 img").css({width:Math.round(k*238)+"px",height:Math.round(m*238)+"px",marginLeft:"-"+Math.round(k*n.x1)+"px",marginTop:"-"+Math.round(m*n.y1)+"px"});var r=50/(n.width||1);var l=50/(n.height||1);jQuery("#size2 img").css({width:Math.round(r*238)+"px",height:Math.round(l*238)+"px",marginLeft:"-"+Math.round(r*n.x1)+"px",marginTop:"-"+Math.round(l*n.y1)+"px"});var s=80/(n.width||1);var o=80/(n.height||1);jQuery("#size3 img").css({width:Math.round(s*238)+"px",height:Math.round(o*238)+"px",marginLeft:"-"+Math.round(s*n.x1)+"px",marginTop:"-"+Math.round(o*n.y1)+"px"});
var t=30/(n.width||1);var p=30/(n.height||1);jQuery("#size4 img").css({width:Math.round(t*238)+"px",height:Math.round(p*238)+"px",marginLeft:"-"+Math.round(t*n.x1)+"px",marginTop:"-"+Math.round(p*n.y1)+"px"});x1=n.x1;x2=n.x2;y1=n.y1;y2=n.y2};jQuery(document).ready(function(){var f="";if(currSiteType==1){f=URLPrefix.central}else{f=URLPrefix.mall}var h=f+"/advertise/getAdVoByJsonp.do?callback=?";var g;jQuery.getJSON(h,function(a){if(a.flag==1){jQuery("#fixedRight").addClass("fixedRight");jQuery("#fixedRight").html("<a id ='fixedLink' target='_blank'  onclick=\"gotracker(1,'"+a.tk+"')\"><span>"+a.text.substr(0,8)+"</span></a>");jQuery("#fixedLink").attr("href",a.link);jQuery("#fixedRight").css("marginTop",-jQuery("#fixedRight").height()/2+"px")}else{jQuery("#fixedRight").hide()}});if(navigator.userAgent.indexOf("MSIE 6.")!=-1){function e(){document.getElementById("fixedRight").style.pixelTop=jQuery(window).scrollTop()+jQuery(window).height()/2}window.onscroll=e}});