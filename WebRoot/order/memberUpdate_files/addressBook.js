/* SVN.committedRevision=396276 */
function filterScripts(a){var b="";b=decodeURIComponent(a);b=b.replace(/<script(.|\n)*\/script>\s*/ig,"").replace(/<javascript(.|\n)*\/javascript>\s*/ig,"").replace(/<[^>]+/ig,function(c){return c.replace(/\s*on\w+=[^ ]+/ig,"")});return b}jQuery(document).ready(function(){c();e("form[name='addAddress'] ",function(){jQuery("form[name='addAddress']").submit()});jQuery("form[name='addAddress'] a[name='set_post_code']").click(function(){d("addAddress")});function c(){jQuery(":text[name^='goodReceiver.phone'],:text[name='goodReceiver.mobil']").each(function(){jQuery(this).keyup(function(){var g=jQuery(this).val();jQuery(this).val(g.replace(/\D/g,""))}).bind("paste",function(){var g=jQuery(this).val();jQuery(this).val(g.replace(/\D/g,""))}).css("ime-mode","disabled")})}function e(g,h){jQuery(g+" button[type='button']").click(function(){var i="";
if(jQuery(g+" :text[name='goodReceiver.goodReceiverName']").val()==""||jQuery(g+" :text[name='goodReceiver.goodReceiverName']").val().length>20){jQuery(g).find("span[name='receiverNameInputDesc']").hide();jQuery(g).find("span[name='receiverNameDesc']").show();i+="goodReceiverName "}else{if(jQuery(g+" :text[name='goodReceiver.goodReceiverName']").val()!=filterScripts(jQuery(g+" :text[name='goodReceiver.goodReceiverName']").val())){jQuery(g).find("span[name='receiverNameDesc']").hide();jQuery(g).find("span[name='receiverNameInputDesc']").show();i+="goodReceiverName "}else{jQuery(g).find("span[name='receiverNameDesc']").hide();jQuery(g).find("span[name='receiverNameInputDesc']").hide()}}if(jQuery(g+" :text[name='goodReceiver.postCode']").val()==""){jQuery(g).find("span[name='postCodeTooLong']").hide();
jQuery(g).find("span[name='postCodeDesc']").show();i+="postCode "}else{if(!(jQuery(g+" :text[name='goodReceiver.postCode']").val()).match(/^\d{4,6}$/)){jQuery(g).find("span[name='postCodeDesc']").hide();jQuery(g).find("span[name='postCodeTooLong']").show();i+="postCode "}}if(jQuery(g+" :text[name='goodReceiver.address1']").val()==""){jQuery(g).find("span[name='detailAddressInputDesc']").hide();jQuery(g).find("span[name='detailAddressDesc']").show();i+="address1 "}else{if(jQuery(g+" :text[name='goodReceiver.address1']").val().length<3||jQuery(g+" :text[name='goodReceiver.address1']").val().length>100){jQuery(g).find("span[name='detailAddressInputDesc']").hide();jQuery(g).find("span[name='detailAddressDesc']").show();i+="address1 "}else{if(jQuery(g+" :text[name='goodReceiver.address1']").val()!=filterScripts(jQuery(g+" :text[name='goodReceiver.address1']").val())){jQuery(g).find("span[name='detailAddressDesc']").hide();
jQuery(g).find("span[name='detailAddressInputDesc']").show();i+="address1 "}else{jQuery(g).find("span[name='detailAddressDesc']").hide();jQuery(g).find("span[name='detailAddressInputDesc']").hide()}}}if(jQuery(g+" :text[name='goodReceiver.phone2']").val()==""&&jQuery(g+" :text[name='goodReceiver.mobil']").val()==""){jQuery(g).find("span[name='cellDesc']").show();i+="phone2  mobil "}else{if(!/^0?1[3458]\d{9}$/.test(jQuery(g+" :text[name='goodReceiver.mobil']").val())&&jQuery(g+" :text[name='goodReceiver.mobil']").val()!=""){jQuery(g).find("span[name='cellDesc']").hide();jQuery(g).find("span[name='errorMobilDesc']").show();i+="errorMobilDesc "}else{if(jQuery(g+" :text[name='goodReceiver.phone2']").val()!=""&&(!(jQuery(g+" :text[name='goodReceiver.phone1']").val()).match(/^(0\d{2,3})?$/)||!(jQuery(g+" :text[name='goodReceiver.phone2']").val()).match(/^\d{7,8}$/)||!(jQuery(g+" :text[name='goodReceiver.phone3']").val()).match(/^\d{0,6}$/))){jQuery(g).find("span[name='cellDesc']").hide();
jQuery(g).find("span[name='errorPhone2Desc']").show();i+="errorPhone2Desc "}else{jQuery(g).find("span[name='errorMobilDesc']").hide();jQuery(g).find("span[name='errorPhone2Desc']").hide()}}}if(i==""){h()}})}new YHDaddressSelector("addAddress").init();function f(i,h,g){return((i.replace(/[^\x00-\xff]/g,"xx")).length<=g&&(i.replace(/[^\x00-\xff]/g,"xx")).length>=h)}jQuery(".address li button[class='w44']").each(function(g){jQuery(this).click(function(){if(confirm("确定删除此收货地址?")){window.location="/member/address/deleteAddress.do?goodReceiver.id="+jQuery("form[name='editAddress_"+g+"'] :hidden[name='goodReceiver.id']").val()}})});jQuery("a[name='set_default']").each(function(){jQuery(this).click(function(){jQuery(jQuery(this).prev(":checkbox[name='goodReceiver.isDefault']")).attr("checked",true)
})});function d(g){var i=(window.screen.height-340)/2;var h=(window.screen.width-490)/2;window.open("/member/address/openQuery.do?formName="+g,"地址查询","height=300, width=450, top="+i+", left="+h+", toolbar=no,scrollbars=yes, menubar=no, resizable=no,location=no, status=no")}var a="";var b="";jQuery(".address > li[id^='address_edit_li_'],form[name='addAddress']").each(function(g){var h=this;jQuery(this).find(":text[name='goodReceiver.goodReceiverName']").blur(function(){if(jQuery.trim(jQuery(this).val())==""||jQuery.trim(jQuery(this).val()).length>20){jQuery(h).find("span[name='receiverNameInputDesc']").hide();jQuery(h).find("span[name='receiverNameDesc']").show()}else{if(jQuery(this).val()!=filterScripts(jQuery(this).val())){jQuery(h).find("span[name='receiverNameDesc']").hide();jQuery(h).find("span[name='receiverNameInputDesc']").show()
}else{jQuery(h).find("span[name='receiverNameDesc']").hide();jQuery(h).find("span[name='receiverNameInputDesc']").hide()}}});jQuery(this).find(" :text[name='goodReceiver.address1']").blur(function(){if(jQuery.trim(jQuery(this).val())==""){jQuery(h).find("span[name='detailAddressInputDesc']").hide();jQuery(h).find("span[name='detailAddressDesc']").show()}else{if(jQuery.trim(jQuery(this).val()).length<3||jQuery.trim(jQuery(this).val()).length>100){jQuery(h).find("span[name='detailAddressInputDesc']").hide();jQuery(h).find("span[name='detailAddressDesc']").show()}else{if(jQuery(this).val()!=filterScripts(jQuery(this).val())){jQuery(h).find("span[name='detailAddressDesc']").hide();jQuery(h).find("span[name='detailAddressInputDesc']").show()}else{jQuery(h).find("span[name='detailAddressDesc']").hide();
jQuery(h).find("span[name='detailAddressInputDesc']").hide()}}}});jQuery(this).find(" :text[name='goodReceiver.postCode']").blur(function(){if(!jQuery.trim(jQuery(this).val()).match(/^\d{4,6}$/)){jQuery(h).find("span[name='postCodeDesc']").hide();jQuery(h).find("span[name='postCodeTooLong']").show()}});jQuery(this).find(" :text[name='goodReceiver.mobil'],:text[name='goodReceiver.phone2']").blur(function(){if(jQuery.trim(jQuery(":text[name='goodReceiver.mobil']").val())==""&&jQuery.trim(jQuery(":text[name='goodReceiver.phone2']")).val()==""){jQuery(h).find("span[name='cellDesc']").show()}else{jQuery(h).find("span[name='cellDesc']").hide();if(!/^0?1[3458]\d{9}$/.test(jQuery(":text[name='goodReceiver.mobil']").val())&&jQuery.trim(jQuery(":text[name='goodReceiver.mobil']").val())!=""){jQuery("span[name='errorMobilDesc']").show()
}else{if(jQuery.trim(jQuery(" :text[name='goodReceiver.phone2']").val())!=""&&(!(jQuery(":text[name='goodReceiver.phone1']").val()).match(/^(0\d{2,3})?$/)||!(jQuery(":text[name='goodReceiver.phone2']").val()).match(/^\d{7,8}$/)||!(jQuery(":text[name='goodReceiver.phone3']").val()).match(/^\d{0,6}$/))){jQuery("span[name='errorPhone2Desc']").show()}else{jQuery("span[name='errorMobilDesc']").hide();jQuery("span[name='errorPhone2Desc']").hide()}}}})});jQuery(".address > li button[class='y44']").each(function(g){jQuery(this).click(function(){jQuery("[id^='address_list_li_']").css("display","");jQuery("[id^='address_edit_li_']").css("display","none");jQuery("#address_list_li_"+g).css("display","none");jQuery("#address_edit_li_"+g).css("display","");jQuery("form[name='editAddress_"+g+"'] a[name='set_post_code']").click(function(){d("editAddress_"+g)
});new YHDaddressSelector("editAddress_"+g).setPlace(jQuery("#edit_provinceId_"+g).val(),jQuery("#edit_cityId_"+g).val(),jQuery("#edit_countyId_"+g).val(),jQuery("#edit_areaId_"+g).val(),jQuery(":hidden[name='goodReceiver.postCode']").val());e("form[name='editAddress_"+g+"']",function(){jQuery("form[name='editAddress_"+g+"']").submit()})})})});function setPlace(c,a,f,d,e,b){new YHDaddressSelector(c).setPlace(a,f,d,e,b)}function YHDaddressSelector(formName){var url="/member/userinfo/address.do?type=";var addressSelector="form[name='"+formName+"'] span[name='addressSelector']";this.init=function(){jQuery(addressSelector).children().remove();addProviceSelector(function(){})};this.setPlace=function(pid,cid,coid,aid,post){jQuery(addressSelector).children().remove();clearPostCode();addProviceSelector(function(p){jQuery(p).val(pid);
addCitySelector(pid,function(c){jQuery(c).val(cid);addCountySelector(cid,function(co){jQuery(co).val(coid);addAreaSelector(coid,function(a){jQuery(a).val(aid)})})})});jQuery("form[name='"+formName+"'] input[name='goodReceiver.postCode']").each(function(){jQuery(this).val(post)})};var setPostCode=function(areaId){jQuery.get("/member/address/address2post.do?areaId="+areaId,function(data){jQuery("form[name='"+formName+"'] input[name='goodReceiver.postCode']").each(function(){jQuery(this).val(data);jQuery("[name='postCodeDesc']").hide()})})};var clearPostCode=function(){jQuery("form[name='"+formName+"'] input[name='goodReceiver.postCode']").each(function(){jQuery(this).val("")})};var addAreaSelector=function(countyID,initArea){jQuery.get(url+"area&countyId="+countyID,function(areaList){var areaSelector=jQuery("<select>");
jQuery(areaSelector).attr("name","goodReceiver.area.id");jQuery(areaSelector)[0].options.add(new Option("请选择四级区域","0"));var areaFlag=true;jQuery.each(eval(areaList),function(entryIndex,entry){if(entry.id!=countyID){jQuery(areaSelector)[0].options.add(new Option(entry.cnname,entry.id));areaFlag=false}});jQuery(addressSelector).append(areaSelector);initArea(areaSelector);if(areaFlag){jQuery(areaSelector).hide();jQuery(areaSelector)[0].options.add(new Option(countyID,countyID));jQuery(areaSelector).val(countyID);setPostCode(countyID)}jQuery(areaSelector).change(function(){clearPostCode();if(jQuery(this).val()!="0"){setPostCode(jQuery(this).val())}})})};var addCountySelector=function(cityId,initCounty){var countySelector=jQuery("<select>");jQuery(countySelector).attr("name","goodReceiver.county.id");
jQuery(countySelector)[0].options.add(new Option("请选择区/县/街道","0"));jQuery.get(url+"county&cityId="+cityId,function(countyList){jQuery.each(eval(countyList),function(entryIndex,entry){jQuery(countySelector)[0].options.add(new Option(entry.cnname,entry.id))});jQuery(addressSelector).append(countySelector);initCounty(countySelector);jQuery(countySelector).change(function(){jQuery(this).nextAll("select").remove();clearPostCode();if(jQuery(this).val()!="0"){addAreaSelector(jQuery(this).val(),function(co){})}})})};var addCitySelector=function(provId,initCity){jQuery(formName+" input[name='goodReceiver.postCode']").each(function(){jQuery(this).val(data)});var citySelector=jQuery("<select>");jQuery(citySelector).attr("name","goodReceiver.city.id");jQuery(citySelector)[0].options.add(new Option("请选择市/区","0"));
jQuery.get(url+"city&provId="+provId,function(cityList){jQuery.each(eval(cityList),function(entryIndex,entry){jQuery(citySelector)[0].options.add(new Option(entry.cnname,entry.id))});jQuery(addressSelector).append(citySelector);initCity(citySelector);jQuery(citySelector).change(function(){jQuery(this).nextAll("select").remove();clearPostCode();if(jQuery(this).val()!="0"){addCountySelector(jQuery(this).val(),function(c){})}})})};var addProviceSelector=function(initProv){var proviceSelector=jQuery("<select>");jQuery(proviceSelector).attr("name","goodReceiver.province.id");jQuery(proviceSelector)[0].options.add(new Option("请选择省","0"));jQuery.get(url+"province&countryID=1",function(provinceList){jQuery.each(eval(provinceList),function(entryIndex,entry){jQuery(proviceSelector)[0].options.add(new Option(entry.cnname,entry.id))
});jQuery(addressSelector).append(proviceSelector);initProv(proviceSelector);jQuery(proviceSelector).change(function(){jQuery(this).nextAll("select").remove();clearPostCode();if(jQuery(this).val()!="0"){addCitySelector(jQuery(this).val(),function(p){})}})})}};jQuery(document).ready(function(){var f="";if(currSiteType==1){f=URLPrefix.central}else{f=URLPrefix.mall}var h=f+"/advertise/getAdVoByJsonp.do?callback=?";var g;jQuery.getJSON(h,function(a){if(a.flag==1){jQuery("#fixedRight").addClass("fixedRight");jQuery("#fixedRight").html("<a id ='fixedLink' target='_blank'  onclick=\"gotracker(1,'"+a.tk+"')\"><span>"+a.text.substr(0,8)+"</span></a>");jQuery("#fixedLink").attr("href",a.link);jQuery("#fixedRight").css("marginTop",-jQuery("#fixedRight").height()/2+"px")}else{jQuery("#fixedRight").hide()}});if(navigator.userAgent.indexOf("MSIE 6.")!=-1){function e(){document.getElementById("fixedRight").style.pixelTop=jQuery(window).scrollTop()+jQuery(window).height()/2}window.onscroll=e}});