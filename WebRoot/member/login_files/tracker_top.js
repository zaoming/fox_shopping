Array.prototype.toTRACKERJSONString=function(){var d="[";for(var c=0;c<this.length;c++){if(this[c] instanceof Parameter){if(this[c].value instanceof Array){d+="{"+this[c].key+"="+this[c].value.toTRACKERJSONString()+"},"}else{d+=this[c].toJSONString()+","}}}if(d.indexOf(",")>0){d=d.substring(0,d.length-1)}return d+"]"};var trackerUrl="";function Parameter(d,c){this.key=d;if(this.key=="internalKeyword"){this.value=encodeURI(c)}else{this.value=c}this.toJSONString=function(){return"{"+this.key+"="+this.value+"}"}}var linkPosition="";var buttonPosition="";function TrackerContainer(b){this.url=b;this.parameterArray=new Array();this.stockArray=new Array();this.commonAttached=new Array();this.addParameter=function(a){this.parameterArray.push(a)};this.addStock=function(d,a){this.stockArray.push(new Parameter(d,a))
};this.addCommonAttached=function(a,d){this.commonAttached.push(new Parameter(a,d))};this.buildAttached=function(){if(this.stockArray.length>0){this.commonAttached.push(new Parameter("1",this.stockArray))}if(this.commonAttached.length>0){this.addParameter(new Parameter("attachedInfo",this.commonAttached.toTRACKERJSONString("attachedInfo")))}};this.toUrl=function(){this.buildAttached();for(var f=0;f<this.parameterArray.length;f++){var a=this.parameterArray[f].key;var e=this.parameterArray[f].value;this.url+="&"+a+"="+e}trackerUrl=this.url;return this.url}}var trackerUrl=("https:"==document.location.protocol?"https://":"http://")+URLPrefix.tracker+"/tracker/info.do?1=1";var trackerContainer=new TrackerContainer(trackerUrl);trackerContainer.addParameter(new Parameter("ieVersion",navigator.userAgent));
trackerContainer.addParameter(new Parameter("platform",navigator.platform));var page_refer=document.referrer?document.referrer:"";var page_location=window.location.href;function addTrackPositionToCookie(c,d){if(c=="1"){document.cookie="linkPosition="+encodeURIComponent(d)+";path=/;domain=."+no3wUrl+";"}else{if(c=="2"){document.cookie="buttonPosition="+decodeURIComponent(d)+";path=/;domain=."+no3wUrl+";"}}}function getCookie(i){var g=document.cookie;var f=g.split("; ");for(var h=0;h<f.length;h++){var j=f[h].split("=");if(j[0]==i){return j[1]}}return null}function gotracker(f,j,g){var i=trackerUrl;var h=new RegExp("&linkPosition=\\w*","g");i=i.replace(h,"");var h=new RegExp("&buttonPosition=\\w*","g");i=i.replace(h,"");var h=new RegExp("&productId=\\w*","g");i=i.replace(h,"");if(f!=null){if(f==2){i=i+"&buttonPosition="+j
}else{i=i+"&linkPosition="+j}}if(g!=null){i=i+"&productId="+g}jQuery.ajax({async:true,url:i,type:"GET",dataType:"jsonp",jsonp:"jsoncallback"})}function bindLinkClickTracker(d,e){var f=jQuery("#"+d+" a");f.click(function(){var a=jQuery(this).text();a=e+"_"+encodeURIComponent(jQuery.trim(a));addTrackPositionToCookie("1",a)})}function callLoadCookie(){var b="";if(page_location.indexOf("yihaodian.com")!=-1&&page_refer.indexOf("1mall.com")!=-1){b=URLPrefix.mall}else{if(page_location.indexOf("1mall.com")!=-1&&page_refer.indexOf("yihaodian.com")!=-1){b=URLPrefix.central}}if(b!=""){if("https:"==document.location.protocol){b=b.replace("http","https")}jQuery.getJSON(b+"/yhd-common/assign-login-api.do?cookieNames=unionKey&cookieNames=adgroupKeywordID&cookieNames=unionType&cookieNames=uid&cookieNames=websiteid&callback=?",function(a){if(!a.ERROR){jQuery(a.info).each(function(){if(this.value!=""){jQuery.cookie(this.name,this.value,{domain:no3wUrl,path:"/"})
}})}})}}function callLoadlinkCookie(){var d="";if(page_location.indexOf("yihaodian.com")!=-1){d=URLPrefix.mall}else{if(page_location.indexOf("1mall.com")!=-1){d=URLPrefix.central}}if(d!=""){if("https:"==document.location.protocol){d=d.replace("http","https")}var c=d+"/yhd-common/assign-login-api.do?&cookieNames=linkPosition&cookieNames=buttonPosition&callback=?";jQuery.ajax({async:true,url:c,timeout:1000,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",success:function(a){if(!a.ERROR){jQuery(a.info).each(function(){if(this.value!=""){var b="";trackerContainer.addParameter(new Parameter(this.name,this.value));b="cookieDatas="+this.name+",,"+this.value+",,0";callAddCookieApi(d,b)}})}},complete:function(){initHijack()},statusCode:{404:function(){initHijack()}}})}else{initHijack()}}function callAddCookieApi(d,c){jQuery.ajax({async:true,url:d+"/yhd-common/cookie-set-api.do?"+c+"&callback=?",timeout:1000,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",success:function(a){}})
}callLoadCookie();