/* SVN.committedRevision=396276 */
jQuery(".test").click(function(){submitFavorite(null,304)});var favoriteNumInputTip=currSiteType==1?"请输入您收藏的商品名称":"请输入您收藏的商品或店铺名称";var favoriteTip=currSiteType==1?"没有选择要删除的商品":"没有选择要删除的商品或店铺";var gFavoriteType="";function deleteFavoriteProducts(g,e){var a="",d="";var f=jQuery("input[name=productId]");var h=jQuery("input[name=merchantId]");var c=jQuery(".recpt li.on").attr("refer");if(!(f[0]===undefined)){if(g==""){for(var b=0;b<f.length;b++){if(f[b].checked){a=a+f[b].value+","}}}else{a=g}}if(!(h[0]===undefined)){if(e==""){for(var b=0;b<h.length;b++){if(h[b].checked){d=d+h[b].value+","}}}else{d=e}}if(a===undefined||d===undefined){YHD.alert(favoriteTip)}else{if(a==""&&d==""){YHD.alert(favoriteTip)}else{window.location="/member/myCollection/deleteCollectionProduct.do?productIdList="+a+"&merchantIdList="+d+"&refer="+c
}}}jQuery("#search_button").click(function(){if(currSiteType==1){loadCollectionProductAllInfo(1,null,0)}else{loadCollectionProductAllInfo(1,null,"")}});function loadCollectionProductAllInfo(a,d,e){d=jQuery(".collection_tag_id").attr("id");var b=jQuery("#search_textfield").val();if(favoriteNumInputTip==b){b=""}if(typeof(e)=="undefined"){e=gFavoriteType}var c="";if(b==""){c="/member/myCollection/ajaxViewCollectionProductAll.do?pagenationVO.currentPage="+a+"&product_cname="+encodeURIComponent(encodeURIComponent(b))+"&tag.id="+d+"&favoriteType="+e}else{c="/member/myCollection/ajaxViewCollectionProductAll.do?pageModelVO.currentPage="+a+"&product_cname="+encodeURIComponent(encodeURIComponent(b))+"&tag.id="+d+"&favoriteType="+e}if(b.length>40){jQuery("#err_popwin").html("请输入搜索内容，不超过40个字");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});
return}jQuery.ajax({url:c,success:function(f){document.getElementById("collectionProductAll").innerHTML=f;window.scroll(0,0);jQuery(".deleteFavorite").click(function(){if(confirm("您确认要删除吗?")){deleteFavoriteProducts("","")}});jQuery(".select_all_1").click(function(){jQuery("input[name=productId]").attr("checked",jQuery(".select_all_1").attr("checked"));jQuery("input[name=merchantId]").attr("checked",jQuery(".select_all_1").attr("checked"));jQuery(".select_all_2").attr("checked",jQuery(".select_all_1").attr("checked"))});jQuery(".select_all_2").click(function(){jQuery("input[name=productId]").attr("checked",jQuery(".select_all_2").attr("checked"));jQuery("input[name=merchantId]").attr("checked",jQuery(".select_all_2").attr("checked"));jQuery(".select_all_1").attr("checked",jQuery(".select_all_2").attr("checked"))
});jQuery("button[name=fav_buy]").click(function(){var h=jQuery(this).attr("tName");var g=jQuery(this).attr("pid");var i=jQuery(this).attr("pmid");addToCart(this,g,i,1,true,h)});jQuery("a[name=edit_collection]").click(function(){executiveLandedCheck();var i=jQuery(this).attr("pid");var k=jQuery(this).attr("pmid");var g=0;var j=0;var h="/member/myCollection/getPopboxInfo.do?callback=?";jQuery.getJSON(h,function(m){if(m.ERROR){}else{YHD.popwin(m.value,460,349);var l="";jQuery(".fkey li a").click(function(){var n=jQuery(this).attr("flag");if(n=="false"){jQuery(this).addClass("on");l=l+" "+jQuery(this).text();jQuery("#tagName").attr("value",jQuery.trim(l));jQuery(this).attr("flag","true")}else{jQuery(this).removeClass("on");jQuery(this).attr("flag","false");var p="";var q=jQuery.trim(jQuery("#tagName").attr("value")).split(" ");
for(var o=0;o<q.length;o++){if(q[o]!=jQuery(this).text()){p=p+" "+q[o]}}jQuery("#tagName").attr("value",jQuery.trim(p));l=jQuery("#tagName").attr("value")}});if(jQuery("#checkFlag").checked){j=1}jQuery("#addTag_confirm").click(function(){submitpTag(i,k,j)})}})})}})}function lazyCollectionProductAllInfo(){if(jQuery("#collectionProductAll")[0]){if(jQuery.trim(jQuery("#collectionProductAll").html())==""){jQuery("#collectionProductAll").html("<p align='center'><img src='"+imagePath+"/loade.gif'/>请您稍等,数据正在加载...</p>");if(currSiteType==1){loadCollectionProductAllInfo(1,null,0)}else{loadCollectionProductAllInfo(1,null,"")}}}}jQuery(".favoritekey li").click(function(){jQuery("#search_textfield").removeAttr("value");var b=jQuery(this).find("a").attr("id");var a=jQuery(this).find("a").attr("class");if(a.indexOf("red")!=-1){jQuery(this).find("a").removeClass("red");
jQuery(this).find("a").removeClass("collection_tag_id")}else{jQuery(".favoritekey li").each(function(c){jQuery(this).find("a").removeClass("red");jQuery(this).find("a").removeClass("collection_tag_id")});jQuery(this).find("a").addClass("red");jQuery(this).find("a").addClass("collection_tag_id")}loadCollectionProductAllInfo(1,b,"")});jQuery(".favoritekey li").mouseenter(function(){jQuery(this).append('<s class="keyedit"></s><s class="keydelate"></s>');var a=jQuery(this).find("a").attr("id");var b=jQuery(this).find("a").html();var c=jQuery(this).find("c").html();jQuery(".keyedit").click(function(){var d=jQuery(this).parent();jQuery(this).siblings("s").after('<div class=keyeditbox><input type="text" value='+b+" /><button class=w44 >保存</button><u>删除</u></div>");d.find(".w44").click(function(){var f=d.find("input").val();
if(f==""){jQuery("#err_popwin").html("标签签名不能为空");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}if(f.length>10){jQuery("#err_popwin").html("标签名字过长，每个标签不能超过10个汉字或字符");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}var e="/member/myCollection/updateCollectionTagName.do?tag.id="+a+"&tag.name="+encodeURIComponent(f)+"&callback=?";jQuery.getJSON(e,function(g){if(g.ERROR){}else{if(g.code>0){jQuery(".keyeditbox").parent().after('<li><a href="#" id="'+a+'">'+f+"</a>（"+c+"）</li>");jQuery(".keyeditbox").parent().remove();window.location.reload()}else{jQuery("#err_popwin").html("修改标签遇到问题，请再试一次！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})}}})});d.find("u").click(function(){if(confirm("您确认要删除吗?")){deleteCollectionTag(a)}})});jQuery(this).find(".keydelate").click(function(){if(confirm("您确认要删除吗?")){deleteCollectionTag(a)
}})});jQuery(".favoritekey li").mouseleave(function(){jQuery(this).find("s").remove()});function deleteCollectionTag(a){if(a!=""){jQuery.ajax({url:"/member/myCollection/deleteCollectionTag.do?tagProduct.tagID="+a,success:function(b){jQuery("li[delFlag='"+a+"']").remove();if(jQuery(".favoritekey ul li[delflag]").size()>8){jQuery("li[delFlag]").each(function(c){if(c<8){jQuery(".favoritekey .none").removeClass()}})}else{jQuery(".favoritekey .none").removeClass();jQuery(".favoritekey .switchkey").remove()}}})}else{jQuery("#err_popwin").html("没有选择要删除的标签");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})}}function initTabSwitch(c,b){var a=jQuery(c);if(a&&a.size()>1){jQuery(a).click(function(){var e=jQuery(c+"."+b);var f=jQuery(this);e.removeClass(b);f.addClass(b);var d=f.attr("id");
if(d=="all_coll"){jQuery("#merchantTagDiv").show();if(currSiteType==1){loadCollectionProductAllInfo(1,null,0);gFavoriteType=0}else{loadCollectionProductAllInfo(1,null,"");gFavoriteType=""}}if(d=="p_coll"){jQuery("#merchantTagDiv").show();loadCollectionProductAllInfo(1,null,0);gFavoriteType=0}if(d=="m_coll"){jQuery(".favoritekey li").each(function(g){jQuery(this).find("a").removeClass("red");jQuery(this).find("a").removeClass("collection_tag_id")});jQuery("#merchantTagDiv").hide();loadCollectionProductAllInfo(1,null,1);gFavoriteType=1}if(d=="zm_coll"){jQuery(".favoritekey li").each(function(g){jQuery(this).find("a").removeClass("red");jQuery(this).find("a").removeClass("collection_tag_id")});jQuery("#merchantTagDiv").hide();loadCollectionProductAllInfo(1,null,2);gFavoriteType=2}})}}jQuery(document).ready(function(){if(jQuery.trim(jQuery("#collectionProductAll").html())==""){lazyCollectionProductAllInfo()
}initTabSwitch(".recpt li","on");initFavoritetextfield()});function initFavoritetextfield(){jQuery("#search_textfield").blur(function(){var a=jQuery(this).val();a=jQuery.trim(a);if(a==null||a.length==0){jQuery(this).val(favoriteNumInputTip)}}).focus(function(){var a=jQuery(this).val();a=jQuery.trim(a);if(a&&a==favoriteNumInputTip){jQuery(this).val("")}})}jQuery(".switchkey").toggle(function(){var a=jQuery(".favoritekey ul li[delflag]").size();if(a>8){$(this).removeClass("on").html("隐藏部分标签")}jQuery(".favoritekey .none").removeClass().addClass("display")},function(){var a=jQuery(".favoritekey ul li[delflag]").size();if(a>8){$(this).addClass("on").html("显示全部标签")}jQuery(".favoritekey .display").removeClass().addClass("none")});jQuery(document).ready(function(){var f="";if(currSiteType==1){f=URLPrefix.central}else{f=URLPrefix.mall}var h=f+"/advertise/getAdVoByJsonp.do?callback=?";var g;jQuery.getJSON(h,function(a){if(a.flag==1){jQuery("#fixedRight").addClass("fixedRight");jQuery("#fixedRight").html("<a id ='fixedLink' target='_blank'  onclick=\"gotracker(1,'"+a.tk+"')\"><span>"+a.text.substr(0,8)+"</span></a>");jQuery("#fixedLink").attr("href",a.link);jQuery("#fixedRight").css("marginTop",-jQuery("#fixedRight").height()/2+"px")}else{jQuery("#fixedRight").hide()}});if(navigator.userAgent.indexOf("MSIE 6.")!=-1){function e(){document.getElementById("fixedRight").style.pixelTop=jQuery(window).scrollTop()+jQuery(window).height()/2}window.onscroll=e}});